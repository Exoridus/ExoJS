var Exo=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=70)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=(b.VERSION="1.0.0",b.TAU=2*Math.PI,b.DEG_TO_RAD=Math.PI/180,b.RAD_TO_DEG=180/Math.PI,b.SHAPE={NONE:0,POLYGON:1,RECTANGLE:2,CIRCLE:3},b.TIME={MILLISECONDS:1,SECONDS:1e3,MINUTES:6e4,HOURS:36e5},b.SCALE_MODE={NEAREST:9728,LINEAR:9729},b.WRAP_MODE={REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648},b.ATTRIBUTE_TYPE={BYTE:5120,SHORT:5122,INT:5124,FLOAT:5126,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125},b.RANGE_NODE=32,b.RANGE_DEVICE=256),e=(b.RANGE_GLOBAL=1024,b.OFFSET_KEYBOARD=0),f=b.OFFSET_MOUSE=d,g=b.OFFSET_GAMEPAD=2*d;b.OFFSET_POINTER=3*d,b.KEYS={Backspace:e+8,Tab:e+9,Clear:e+12,Enter:e+13,Shift:e+16,Control:e+17,Alt:e+18,Pause:e+19,CapsLock:e+20,Escape:e+27,Space:e+32,PageUp:e+33,PageDown:e+34,End:e+35,Home:e+36,Left:e+37,Up:e+38,Right:e+39,Down:e+40,Insert:e+45,Delete:e+46,Help:e+47,Zero:e+48,One:e+49,Two:e+50,Three:e+51,Four:e+52,Five:e+53,Six:e+54,Seven:e+55,Eight:e+56,Nine:e+57,A:e+65,B:e+66,C:e+67,D:e+68,E:e+69,F:e+70,G:e+71,H:e+72,I:e+73,J:e+74,K:e+75,L:e+76,M:e+77,N:e+78,O:e+79,P:e+80,Q:e+81,R:e+82,S:e+83,T:e+84,U:e+85,V:e+86,W:e+87,X:e+88,Y:e+89,Z:e+90,NumPad0:e+96,NumPad1:e+97,NumPad2:e+98,NumPad3:e+99,NumPad4:e+100,NumPad5:e+101,NumPad6:e+102,NumPad7:e+103,NumPad8:e+104,NumPad9:e+105,NumPadMultiply:e+106,NumPadAdd:e+107,NumPadEnter:e+108,NumPadSubtract:e+109,NumPadDecimal:e+110,NumPadDivide:e+111,F1:e+112,F2:e+113,F3:e+114,F4:e+115,F5:e+116,F6:e+117,F7:e+118,F8:e+119,F9:e+120,F10:e+121,F11:e+122,F12:e+123,NumLock:e+144,ScrollLock:e+145,Colon:e+186,Equals:e+187,Comma:e+188,Dash:e+189,Period:e+190,QuestionMark:e+191,Tilde:e+192,OpenBracket:e+219,BackwardSlash:e+220,ClosedBracket:e+221,Quotes:e+222},b.GAMEPAD={FaceButtonBottom:g+0,FaceButtonLeft:g+1,FaceButtonRight:g+2,FaceButtonTop:g+3,LeftTriggerBottom:g+4,RightTriggerBottom:g+5,LeftTriggerTop:g+6,RightTriggerTop:g+7,Select:g+8,Start:g+9,LeftStickButton:g+10,RightStickButton:g+11,DPadUp:g+12,DPadDown:g+13,DPadLeft:g+14,DPadRight:g+15,Special:g+16,LeftStickLeft:g+17,LeftStickRight:g+18,LeftStickUp:g+19,LeftStickDown:g+20,RightStickLeft:g+21,RightStickRight:g+22,RightStickUp:g+23,RightStickDown:g+24},b.MOUSE={LeftButton:f+0,MiddleButton:f+1,RightButton:f+2,BackButton:f+3,ForwardButton:f+4,Move:f+5,MoveLeft:f+6,MoveRight:f+7,MoveUp:f+8,MoveDown:f+9,Scroll:f+10,ScrollLeft:f+11,ScrollRight:f+12,ScrollUp:f+13,ScrollDown:f+14,EnterWindow:f+15,LeaveWindow:f+16},b.UNIFORM_TYPE={INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,FLOAT:5126,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678},b.BLEND_MODE={NORMAL:{src:1,dst:771},ADD:{src:770,dst:772},MULTIPLY:{src:772,dst:771},SCREEN:{src:770,dst:1}},b.DATABASE_TYPES=["arrayBuffer","audioBuffer","audio","blob","font","image","json","music","sound","string"],b.CODEC_NOT_SUPPORTED=/^no$/,b.NEWLINE=/(?:\r\n|\r|\n)/,b.FILE_TYPES=[{mimeType:"image/x-icon",pattern:[0,0,1,0],mask:[255,255,255,255]},{mimeType:"image/x-icon",pattern:[0,0,2,0],mask:[255,255,255,255]},{mimeType:"image/bmp",pattern:[66,77],mask:[255,255]},{mimeType:"image/gif",pattern:[71,73,70,56,55,97],mask:[255,255,255,255,255,255]},{mimeType:"image/gif",pattern:[71,73,70,56,57,97],mask:[255,255,255,255,255,255]},{mimeType:"image/webp",pattern:[82,73,70,70,0,0,0,0,87,69,66,80,86,80],mask:[255,255,255,255,0,0,0,0,255,255,255,255,255,255]},{mimeType:"image/png",pattern:[137,80,78,71,13,10,26,10],mask:[255,255,255,255,255,255,255,255]},{mimeType:"image/jpeg",pattern:[255,216,255],mask:[255,255,255]},{mimeType:"audio/basic",pattern:[46,115,110,100],mask:[255,255,255,255]},{mimeType:"audio/mpeg",pattern:[73,68,51],mask:[255,255,255]},{mimeType:"audio/wave",pattern:[82,73,70,70,0,0,0,0,87,65,86,69],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mimeType:"audio/midi",pattern:[77,84,104,100,0,0,0,6],mask:[255,255,255,255,255,255,255,255]},{mimeType:"audio/aiff",pattern:[70,79,82,77,0,0,0,0,65,73,70,70],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mimeType:"video/avi",pattern:[82,73,70,70,0,0,0,0,65,86,73,32],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mimeType:"application/ogg",pattern:[79,103,103,83,0],mask:[255,255,255,255,255]}]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0}),b.determineMimeType=b.removeItems=b.rgbToHex=b.inRange=b.isPowerOfTwo=b.sign=b.clamp=b.radiansToDegrees=b.degreesToRadians=b.decodeAudioBuffer=b.supportsCodec=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=c(0),h=c(5),i=d(h),j=document.createElement("audio"),k=i.default.webAudio?new AudioContext:null,l=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=!0,e=!1,f=void 0;try{for(var h,i=b[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var k=h.value;if(j.canPlayType(k).replace(g.CODEC_NOT_SUPPORTED,""))return!0}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return!1},m=function(a){return i.default.webAudio?new Promise(function(b,c){k.decodeAudioData(a,b,c)}):Promise.reject(Error("Web Audio is not supported!"))},n=function(a){return a*g.DEG_TO_RAD},o=function(a){return a*g.RAD_TO_DEG},p=function(a,b,c){return Math.min(Math.max(a,Math.min(c,a)),Math.max(b,c))},q=function(a){return a&&(a<0?-1:1)},r=function(a){return 0!==a&&0==(a&a-1)},s=function(a,b,c){return a>=Math.min(b,c)&&a<=Math.max(b,c)},t=function(a,b,c){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=((1<<24)+(a<<16)+(b<<8)+c).toString(16).substr(1);return d?"#"+e:e},u=function(a,b,c){if(!(b>=a.length||c<=0)){for(var d=a.length,e=b+c>d?d-b:c,f=d-e,g=b;g<f;g++)a[g]=a[g+e];a.length=f}},v=function(a){var b=new Uint8Array(a),c=new DataView(a),d=c.getUint32(0,!1);return!(b.length<Math.max(12,d)||d%4!=0)&&"ftypmp4"===String.fromCharCode.apply(String,e(b.subarray(4,11)))},w=function(a){var b=new Uint8Array(a),c=[26,69,223,163].every(function(a,c){return a===b[c]}),d=b.subarray(4,4100),f=d.findIndex(function(a,b,c){return 66===c[b]&&130===c[b+1]});return!(!c||-1===f)&&"webm"===String.fromCharCode.apply(String,e(d.subarray(f+3,f+7)))},x=function(a){var b=new Uint8Array(a),c=function(a){return b.length<a.pattern.length?"continue":a.pattern.every(function(c,d){return(b[d]&a.mask[d])===c})?{v:a.mimeType}:void 0},d=!0,e=!1,h=void 0;try{for(var i,j=g.FILE_TYPES[Symbol.iterator]();!(d=(i=j.next()).done);d=!0){var k=i.value,l=c(k);switch(l){case"continue":continue;default:if("object"===(void 0===l?"undefined":f(l)))return l.v}}}catch(a){e=!0,h=a}finally{try{!d&&j.return&&j.return()}finally{if(e)throw h}}return v(a)?"video/mp4":w(a)?"video/webm":"text/plain"};b.supportsCodec=l,b.decodeAudioBuffer=m,b.degreesToRadians=n,b.radiansToDegrees=o,b.clamp=p,b.sign=q,b.isPowerOfTwo=r,b.inRange=s,b.rgbToHex=t,b.removeItems=u,b.determineMimeType=x},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this._x=b,this._y=c,this._array=null}return e(a,[{key:"set",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x=a,this._y=b,this}},{key:"copy",value:function(a){return this._x=a.x,this._y=a.y,this}},{key:"clone",value:function(){return new a(this._x,this._y)}},{key:"equals",value:function(a){return this._x===a.x&&this._y===a.y}},{key:"toArray",value:function(){var a=this._array||(this._array=new Float32Array(2));return a[0]=this._x,a[1]=this._y,a}},{key:"normalize",value:function(){var a=this.magnitude;return a>0&&(this._x/=a,this._y/=a),this}},{key:"reverse",value:function(){return this._x*=-1,this._y*=-1,this}},{key:"add",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x+=a,this._y+=b,this}},{key:"subtract",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x-=a,this._y-=b,this}},{key:"multiply",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x*=a,this._y*=b,this}},{key:"divide",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x/=a,this._y/=b,this}},{key:"transform",value:function(a){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this).set(this._x*a.a+this._y*a.b+a.x,this._x*a.c+this._y*a.d+a.y)}},{key:"perp",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this).set(this._y,-1*this._x)}},{key:"distanceTo",value:function(a,b){var c=this._x-a,d=this._y-b;return Math.sqrt(c*c+d*d)}},{key:"cross",value:function(a){return this._x*a.y-this._y*a.x}},{key:"dot",value:function(a){return this._x*a.x+this._y*a.y}},{key:"project",value:function(a){var b=this.dot(a)/a.dot(a);return this.set(b*a.x,b*a.y)}},{key:"reflect",value:function(a){var b=this._x,c=this._y;return this.project(a).multiply(2).subtract(b,c)}},{key:"destroy",value:function(){this._array&&(this._array=null),this._x=null,this._y=null}},{key:"x",get:function(){return this._x},set:function(a){this._x=a}},{key:"y",get:function(){return this._y},set:function(a){this._y=a}},{key:"array",get:function(){return this.toArray()}},{key:"angle",get:function(){return Math.atan2(this._x,this._y)}},{key:"magnitude",get:function(){return Math.sqrt(this._x*this._x+this._y*this._y)}}]),a}();b.default=f,f.Empty=new f(0,0),f.Temp=new f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(0),f=c(9),g=d(f),h=c(43),i=d(h);b.default={GAME_CONFIG:{basePath:"",width:800,height:600,soundVolume:1,musicVolume:1,masterVolume:1,videoVolume:1,canvas:null,canvasParent:null,clearColor:g.default.Black,clearBeforeRender:!0,contextOptions:{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1,depth:!1}},WRAP_MODE:e.WRAP_MODE.CLAMP_TO_EDGE,SCALE_MODE:e.SCALE_MODE.LINEAR,PREMULTIPLY_ALPHA:!0,BLEND_MODE:e.BLEND_MODE.MULTIPLY,TEXT_STYLE:{align:"left",fill:"black",stroke:"black",strokeThickness:0,fontSize:20,fontWeight:"bold",fontFamily:"Arial",wordWrap:!1,wordWrapWidth:100,baseline:"alphabetic",lineJoin:"miter",miterLimit:10,padding:0},QUAD_TREE_MAX_LEVEL:5,QUAD_TREE_MAX_OBJECTS:20,BATCH_LIMIT_SPRITES:2500,BATCH_LIMIT_PARTICLES:5e3,TRIGGER_THRESHOLD:300,GAMEPAD_MAPPING:new i.default}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=c(16),m=d(l),n=c(17),o=d(n),p=c(1),q=c(0),r=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return h._size=new k.default(d,g),h}return g(b,a),h(b,[{key:"transform",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,c=k.default.Temp,d=void 0,e=void 0,f=void 0,g=void 0;return c.set(this.left,this.top).transform(a),d=f=c.x,e=g=c.y,c.set(this.left,this.bottom).transform(a),d=Math.min(d,c.x),e=Math.min(e,c.y),f=Math.max(f,c.x),g=Math.max(g,c.y),c.set(this.right,this.top).transform(a),d=Math.min(d,c.x),e=Math.min(e,c.y),f=Math.max(f,c.x),g=Math.max(g,c.y),c.set(this.right,this.bottom).transform(a),d=Math.min(d,c.x),e=Math.min(e,c.y),f=Math.max(f,c.x),g=Math.max(g,c.y),b.set(d,e,f-d,g-e)}},{key:"set",value:function(a,b,c,d){return this.position.set(a,b),this._size.set(c,d),this}},{key:"copy",value:function(a){return this.position.copy(a.position),this._size.copy(a.size),this}},{key:"clone",value:function(){return new b(this.x,this.y,this.width,this.height)}},{key:"equals",value:function(a){return a===this||this.position.equals(a.position)&&this._size.equals(a.size)}},{key:"getBounds",value:function(){return this._bounds||(this._bounds=new b),this._bounds.copy(this)}},{key:"contains",value:function(a,b,c){var d=new k.default(this.left,this.top),e=new k.default(this.right,this.bottom);return c&&(d.transform(c),e.transform(c)),(0,p.inRange)(a,d.x,e.x)&&(0,p.inRange)(b,d.y,e.y)}},{key:"containsRect",value:function(a){return(0,p.inRange)(a.left,this.left,this.right)&&(0,p.inRange)(a.right,this.left,this.right)&&(0,p.inRange)(a.top,this.top,this.bottom)&&(0,p.inRange)(a.bottom,this.top,this.bottom)}},{key:"getCollision",value:function(a){switch(a.type){case q.SHAPE.RECTANGLE:return o.default.checkRectangleRectangle(this,a);case q.SHAPE.CIRCLE:return o.default.checkCircleRectangle(a,this);case q.SHAPE.POLYGON:return o.default.checkPolygonRectangle(a,this);case q.SHAPE.NONE:default:throw new Error('Invalid Shape Type "'+a.type+'".')}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._size.destroy(),this._size=null}},{key:"type",get:function(){return q.SHAPE.RECTANGLE}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"width",get:function(){return this._size.x},set:function(a){this._size.x=a}},{key:"height",get:function(){return this._size.y},set:function(a){this._size.y=a}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}}]),b}(m.default);b.default=r,r.Empty=new r(0,0,0,0),r.Temp=new r},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default={webAudio:"AudioContext"in window,indexedDB:"indexedDB"in window,webGL:function(){var a=document.createElement("canvas"),b="probablySupportsContext"in a?"probablySupportsContext":"supportsContext";return b in a?a[b]("webgl")||a[b]("experimental-webgl"):"WebGLRenderingContext"in window}(),passiveEvents:function(){var a=!1;try{window.addEventListener("test",null,{get passive(){a=!0}})}catch(a){}return a}()}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=function(){function a(){d(this,a),this._events=new Map}return e(a,[{key:"on",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;if(!this._events)return this;var d=this._events.get(a);return d?d.push({callback:b,context:c}):this._events.set(a,[{callback:b,context:c}]),this}},{key:"once",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e=function e(){for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];c.off(a,e,d),b.call.apply(b,[d].concat(g))};return this.on(a,e,d)}},{key:"off",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",b=arguments[1],c=arguments[2];if(!this._events)return this;for(var d=this._events,e="*"===a?Object.keys(d):[a],g=e.length,h=0;h<g;h++){var i=e[h],j=d.get(i);if(!j)break;if(j.length)if(b||c){for(var k=j.length-1;k>=0;k--)b&&b!==j[k].callback||c&&c!==j[k].context||(0,f.removeItems)(j,k,1);j.length||d.delete(i)}else(0,f.removeItems)(j,0,j.length),d.delete(i);else d.delete(i)}return this}},{key:"trigger",value:function(a){if(!this._events)return this;var b=this._events.get(a);if(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=!0,g=!1,h=void 0;try{for(var i,j=b[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k,l=i.value;(k=l.callback).call.apply(k,[l.context].concat(d))}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}}return this}},{key:"destroy",value:function(){if(this._events.size){var a=!0,b=!1,c=void 0;try{for(var d,e=this._events.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=!0,h=!1,i=void 0;try{for(var j,k=f[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;l.callback=null,l.context=null}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}f.length=0}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}this._events.clear(),this._events=null}},{key:"events",get:function(){return this._events}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g._channelBuffer=a,g._channels=new Float32Array(a,4*c,d),g}return g(b,a),h(b,[{key:"resetChannels",value:function(){this._channels.fill(0)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.resetChannels(),this._channelBuffer=null,this._channels=null}},{key:"channelBuffer",get:function(){return this._channelBuffer}},{key:"channels",get:function(){return this._channels}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=c(2),i=(d(h),function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,k=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;e(this,a),this.a=b,this.b=c,this.x=d,this.c=f,this.d=g,this.y=h,this.e=i,this.f=j,this.z=k,this._array=null}return f(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.a,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.b,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.x,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.c,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.d,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.y,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.e,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.f,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:this.z;return this.a=a,this.b=b,this.x=c,this.c=d,this.d=e,this.y=f,this.e=g,this.f=h,this.z=i,this}},{key:"copy",value:function(a){return this.a=a.a,this.b=a.b,this.x=a.x,this.c=a.c,this.d=a.d,this.y=a.y,this.e=a.e,this.f=a.f,this.z=a.z,this}},{key:"clone",value:function(){return new a(this.a,this.b,this.x,this.c,this.d,this.y,this.e,this.f,this.z)}},{key:"combine",value:function(a){return this.set(this.a*a.a+this.c*a.b+this.e*a.x,this.b*a.a+this.d*a.b+this.f*a.x,this.x*a.a+this.y*a.b+this.z*a.x,this.a*a.c+this.c*a.d+this.e*a.y,this.b*a.c+this.d*a.d+this.f*a.y,this.x*a.c+this.y*a.d+this.z*a.y,this.a*a.e+this.c*a.f+this.e*a.z,this.b*a.e+this.d*a.f+this.f*a.z,this.x*a.e+this.y*a.f+this.z*a.z)}},{key:"inverse",value:function(){var b=this.a*(this.z*this.d-this.y*this.f)-this.b*(this.z*this.c-this.y*this.e)+this.x*(this.f*this.c-this.d*this.e);return 0!==b?this.set((this.z*this.d-this.y*this.f)/b,(this.z*this.c-this.y*this.e)/-b,(this.f*this.c-this.d*this.e)/b,(this.z*this.b-this.x*this.f)/-b,(this.z*this.a-this.x*this.e)/b,(this.f*this.a-this.b*this.e)/-b,(this.y*this.b-this.x*this.d)/b,(this.y*this.a-this.x*this.c)/-b,(this.d*this.a-this.b*this.c)/b):this.copy(a.Identity)}},{key:"translate",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return this.combine(a.Temp.set(1,0,b,0,1,c,0,0,1))}},{key:"rotate",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,e=(0,g.degreesToRadians)(b),f=Math.cos(e),h=Math.sin(e);return this.combine(a.Temp.set(f,-h,c*(1-f)+d*h,h,f,d*(1-f)-c*h,0,0,1))}},{key:"scale",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;return this.combine(a.Temp.set(b,0,d*(1-b),0,c,e*(1-c),0,0,1))}},{key:"toArray",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.transposedArray:this.array}},{key:"destroy",value:function(){this._array&&(this._array=null),this.a=null,this.b=null,this.x=null,this.c=null,this.d=null,this.y=null,this.e=null,this.f=null,this.z=null}},{key:"array",get:function(){var a=this._array||(this._array=new Float32Array(9));return a[0]=this.a,a[1]=this.c,a[2]=this.e,a[3]=this.b,a[4]=this.d,a[5]=this.f,a[6]=this.x,a[7]=this.y,a[8]=this.z,a}},{key:"transposedArray",get:function(){var a=this._array||(this._array=new Float32Array(9));return a[0]=this.a,a[1]=this.b,a[2]=this.x,a[3]=this.c,a[4]=this.d,a[5]=this.y,a[6]=this.e,a[7]=this.f,a[8]=this.z,a}}]),a}());b.default=i,i.Identity=new i(1,0,0,0,1,0,0,0,1),i.Temp=new i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,a),this._r=255&b,this._g=255&c,this._b=255&e,this._a=(0,f.clamp)(g,0,1),this._array=null,this._rgba=null}return e(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._r,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._g,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._b,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._a;return this._r=255&a,this._g=255&b,this._b=255&c,this._a=(0,f.clamp)(d,0,1),this._rgba=null,this}},{key:"setRGBA",value:function(a){return this._a=(a>>24&255)/255,this._r=a>>16&255,this._g=a>>8&255,this._b=255&a,this._rgba=a,this}},{key:"getRGBA",value:function(){return null===this._rgba&&(this._rgba=this._a&&((255*this._a|0)<<24)+(this._b<<16)+(this._g<<8)+this._r>>>0),this._rgba}},{key:"copy",value:function(a){return this.set(a.r,a.g,a.b,a.a)}},{key:"clone",value:function(){return new a(this._r,this._g,this._b,this._a)}},{key:"equals",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a===this||this._r===a.r&&this._g===a.g&&this._b===a.b&&(b||this._a===a.a)}},{key:"toArray",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._array||(this._array=new Float32Array(4));return a?(b[0]=this._r/255,b[1]=this._g/255,b[2]=this._b/255):(b[0]=this._r,b[1]=this._g,b[2]=this._b),b[3]=this._a,b}},{key:"destroy",value:function(){this._array&&(this._array=null),this._r=null,this._g=null,this._b=null,this._a=null,this._rgba=null}},{key:"r",get:function(){return this._r},set:function(a){this._r=255&a,this._rgba=null}},{key:"g",get:function(){return this._g},set:function(a){this._g=255&a,this._rgba=null}},{key:"b",get:function(){return this._b},set:function(a){this._b=255&a,this._rgba=null}},{key:"a",get:function(){return this._a},set:function(a){this._a=(0,f.clamp)(a,0,1),this._rgba=null}},{key:"rgba",get:function(){return this.getRGBA()},set:function(a){this.setRGBA(a)}},{key:"hex",get:function(){return(0,f.rgbToHex)(this._r,this._g,this._b)}}]),a}();b.default=g,g.AliceBlue=new g(240,248,255,1),g.AntiqueWhite=new g(250,235,215,1),g.Aqua=new g(0,255,255,1),g.Aquamarine=new g(127,255,212,1),g.Azure=new g(240,255,255,1),g.Beige=new g(245,245,220,1),g.Bisque=new g(255,228,196,1),g.Black=new g(0,0,0,1),g.BlanchedAlmond=new g(255,235,205,1),g.Blue=new g(0,0,255,1),g.BlueViolet=new g(138,43,226,1),g.Brown=new g(165,42,42,1),g.BurlyWood=new g(222,184,135,1),g.CadetBlue=new g(95,158,160,1),g.Chartreuse=new g(127,255,0,1),g.Chocolate=new g(210,105,30,1),g.Coral=new g(255,127,80,1),g.CornflowerBlue=new g(100,149,237,1),g.Cornsilk=new g(255,248,220,1),g.Crimson=new g(220,20,60,1),g.Cyan=new g(0,255,255,1),g.DarkBlue=new g(0,0,139,1),g.DarkCyan=new g(0,139,139,1),g.DarkGoldenrod=new g(184,134,11,1),g.DarkGray=new g(169,169,169,1),g.DarkGreen=new g(0,100,0,1),g.DarkKhaki=new g(189,183,107,1),g.DarkMagenta=new g(139,0,139,1),g.DarkOliveGreen=new g(85,107,47,1),g.DarkOrange=new g(255,140,0,1),g.DarkOrchid=new g(153,50,204,1),g.DarkRed=new g(139,0,0,1),g.DarkSalmon=new g(233,150,122,1),g.DarkSeaGreen=new g(143,188,139,1),g.DarkSlateBlue=new g(72,61,139,1),g.DarkSlateGray=new g(47,79,79,1),g.DarkTurquoise=new g(0,206,209,1),g.DarkViolet=new g(148,0,211,1),g.DeepPink=new g(255,20,147,1),g.DeepSkyBlue=new g(0,191,255,1),g.DimGray=new g(105,105,105,1),g.DodgerBlue=new g(30,144,255,1),g.Firebrick=new g(178,34,34,1),g.FloralWhite=new g(255,250,240,1),g.ForestGreen=new g(34,139,34,1),g.Fuchsia=new g(255,0,255,1),g.Gainsboro=new g(220,220,220,1),g.GhostWhite=new g(248,248,255,1),g.Gold=new g(255,215,0,1),g.Goldenrod=new g(218,165,32,1),g.Gray=new g(128,128,128,1),g.Green=new g(0,128,0,1),g.GreenYellow=new g(173,255,47,1),g.Honeydew=new g(240,255,240,1),g.HotPink=new g(255,105,180,1),g.IndianRed=new g(205,92,92,1),g.Indigo=new g(75,0,130,1),g.Ivory=new g(255,255,240,1),g.Khaki=new g(240,230,140,1),g.Lavender=new g(230,230,250,1),g.LavenderBlush=new g(255,240,245,1),g.LawnGreen=new g(124,252,0,1),g.LemonChiffon=new g(255,250,205,1),g.LightBlue=new g(173,216,230,1),g.LightCoral=new g(240,128,128,1),g.LightCyan=new g(224,255,255,1),g.LightGoldenrodYellow=new g(250,250,210,1),g.LightGray=new g(211,211,211,1),g.LightGreen=new g(144,238,144,1),g.LightPink=new g(255,182,193,1),g.LightSalmon=new g(255,160,122,1),g.LightSeaGreen=new g(32,178,170,1),g.LightSkyBlue=new g(135,206,250,1),g.LightSlateGray=new g(119,136,153,1),g.LightSteelBlue=new g(176,196,222,1),g.LightYellow=new g(255,255,224,1),g.Lime=new g(0,255,0,1),g.LimeGreen=new g(50,205,50,1),g.Linen=new g(250,240,230,1),g.Magenta=new g(255,0,255,1),g.Maroon=new g(128,0,0,1),g.MediumAquamarine=new g(102,205,170,1),g.MediumBlue=new g(0,0,205,1),g.MediumOrchid=new g(186,85,211,1),g.MediumPurple=new g(147,112,219,1),g.MediumSeaGreen=new g(60,179,113,1),g.MediumSlateBlue=new g(123,104,238,1),g.MediumSpringGreen=new g(0,250,154,1),g.MediumTurquoise=new g(72,209,204,1),g.MediumVioletRed=new g(199,21,133,1),g.MidnightBlue=new g(25,25,112,1),g.MintCream=new g(245,255,250,1),g.MistyRose=new g(255,228,225,1),g.Moccasin=new g(255,228,181,1),g.NavajoWhite=new g(255,222,173,1),g.Navy=new g(0,0,128,1),g.OldLace=new g(253,245,230,1),g.Olive=new g(128,128,0,1),g.OliveDrab=new g(107,142,35,1),g.Orange=new g(255,165,0,1),g.OrangeRed=new g(255,69,0,1),g.Orchid=new g(218,112,214,1),g.PaleGoldenrod=new g(238,232,170,1),g.PaleGreen=new g(152,251,152,1),g.PaleTurquoise=new g(175,238,238,1),g.PaleVioletRed=new g(219,112,147,1),g.PapayaWhip=new g(255,239,213,1),g.PeachPuff=new g(255,218,185,1),g.Peru=new g(205,133,63,1),g.Pink=new g(255,192,203,1),g.Plum=new g(221,160,221,1),g.PowderBlue=new g(176,224,230,1),g.Purple=new g(128,0,128,1),g.Red=new g(255,0,0,1),g.RosyBrown=new g(188,143,143,1),g.RoyalBlue=new g(65,105,225,1),g.SaddleBrown=new g(139,69,19,1),g.Salmon=new g(250,128,114,1),g.SandyBrown=new g(244,164,96,1),g.SeaGreen=new g(46,139,87,1),g.SeaShell=new g(255,245,238,1),g.Sienna=new g(160,82,45,1),g.Silver=new g(192,192,192,1),g.SkyBlue=new g(135,206,235,1),g.SlateBlue=new g(106,90,205,1),g.SlateGray=new g(112,128,144,1),g.Snow=new g(255,250,250,1),g.SpringGreen=new g(0,255,127,1),g.SteelBlue=new g(70,130,180,1),g.Tan=new g(210,180,140,1),
g.Teal=new g(0,128,128,1),g.Thistle=new g(216,191,216,1),g.Tomato=new g(255,99,71,1),g.TransparentBlack=new g(0,0,0,0),g.TransparentWhite=new g(255,255,255,0),g.Turquoise=new g(64,224,208,1),g.Violet=new g(238,130,238,1),g.Wheat=new g(245,222,179,1),g.White=new g(255,255,255,1),g.WhiteSmoke=new g(245,245,245,1),g.Yellow=new g(255,255,0,1),g.YellowGreen=new g(154,205,50,1)},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.TIME.MILLISECONDS;d(this,a),this._milliseconds=b*c}return e(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.TIME.MILLISECONDS;return this._milliseconds=a*b,this}},{key:"setMilliseconds",value:function(a){return this.milliseconds=a,this}},{key:"setSeconds",value:function(a){return this.seconds=a,this}},{key:"setMinutes",value:function(a){return this.minutes=a,this}},{key:"setHours",value:function(a){return this.hours=a,this}},{key:"equals",value:function(a){return this._milliseconds===a.milliseconds}},{key:"greaterThan",value:function(a){return this._milliseconds>a.milliseconds}},{key:"lessThan",value:function(a){return this._milliseconds<a.milliseconds}},{key:"clone",value:function(){return new a(this._milliseconds)}},{key:"copy",value:function(a){return this._milliseconds=a.milliseconds,this}},{key:"add",value:function(a){return this._milliseconds+=a.milliseconds,this}},{key:"subtract",value:function(a){return this._milliseconds-=a.milliseconds,this}},{key:"destroy",value:function(){this._milliseconds=null}},{key:"milliseconds",get:function(){return this._milliseconds},set:function(a){this._milliseconds=a}},{key:"seconds",get:function(){return this._milliseconds/f.TIME.SECONDS},set:function(a){this._milliseconds=a*f.TIME.SECONDS}},{key:"minutes",get:function(){return this._milliseconds/f.TIME.MINUTES},set:function(a){this._milliseconds=a*f.TIME.MINUTES}},{key:"hours",get:function(){return this._milliseconds/f.TIME.HOURS},set:function(a){this._milliseconds=a*f.TIME.HOURS}}]),a}();b.default=g,g.Empty=new g(0),g.Temp=new g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(13),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"process",value:function(a){return a.arrayBuffer()}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"storageType",get:function(){return"arrayBuffer"}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(11),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.mimeType,e=void 0===d?"text/plain":d;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,null).then(function(a){return new Blob([a],{type:e})})}},{key:"storageType",get:function(){return"blob"}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"request",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET",mode:"cors",cache:"default"};return fetch(a,b)}},{key:"process",value:function(a){return Promise.resolve(null)}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"load",value:function(a,b,c){var d=this;return this.request(a,b).then(function(a){return d.process(a)}).then(function(a){return d.create(a,c)})}},{key:"destroy",value:function(){}},{key:"storageType",get:function(){return"resource"}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(1),k=c(6),l=d(k),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._source=a,c._duration=a.duration||0,c._volume=a.volume||1,c._speed=a.playbackRate||1,c._loop=a.loop||!1,c}return g(b,a),h(b,[{key:"connect",value:function(a){}},{key:"play",value:function(a){this.paused&&(this.applyOptions(a),this._source.play(),this.trigger("start"))}},{key:"pause",value:function(){this.playing&&(this._source.pause(),this.trigger("stop"))}},{key:"stop",value:function(){this.pause(),this.currentTime=0}},{key:"toggle",value:function(){this.paused?this.play():this.pause()}},{key:"applyOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.loop,c=a.speed,d=a.volume,e=a.time;void 0!==b&&(this.loop=b),void 0!==c&&(this.speed=c),void 0!==d&&(this.volume=d),void 0!==e&&(this.currentTime=e)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.stop(),this._source=null,this._duration=null,this._volume=null,this._speed=null,this._loop=null}},{key:"audioContext",get:function(){return null}},{key:"analyserTarget",get:function(){return null}},{key:"source",get:function(){return this._source}},{key:"duration",get:function(){return this._duration}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,j.clamp)(a,0,2);this.volume!==b&&(this._source.volume=this._volume=b)}},{key:"loop",get:function(){return this._loop},set:function(a){var b=!!a;this.loop!==b&&(this._source.loop=this._loop=b)}},{key:"speed",get:function(){return this._speed},set:function(a){var b=Math.max(0,a);this.speed!==b&&(this._source.playbackRate=this._speed=b)}},{key:"currentTime",get:function(){return this._source.currentTime},set:function(a){this._source.currentTime=Math.max(0,a)}},{key:"paused",get:function(){return this._source.paused},set:function(a){a?this.pause():this.play()}},{key:"playing",get:function(){return!this.paused},set:function(a){a?this.play():this.pause()}}]),b}(l.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(4),h=d(g),i=c(2),j=(d(i),c(3)),k=d(j),l={NONE:0,SCALE_MODE:1,WRAP_MODE:2,PREMULTIPLY_ALPHA:4,SOURCE:8,SOURCE_FRAME:16},m=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.scaleMode,f=void 0===d?k.default.SCALE_MODE:d,g=c.wrapMode,i=void 0===g?k.default.WRAP_MODE:g,j=c.premultiplyAlpha,m=void 0===j?k.default.PREMULTIPLY_ALPHA:j;e(this,a),this._source=null,this._sourceFrame=new h.default,this._renderState=null,this._scaleMode=f,this._wrapMode=i,this._premultiplyAlpha=m,this._flags=l.SCALE_MODE|l.WRAP_MODE|l.PREMULTIPLY_ALPHA,b&&this.setSource(b)}return f(a,[{key:"setSource",value:function(a){return this._source!==a&&(this._source=a,this.updateSource()),this}},{key:"setScaleMode",value:function(a){return this._scaleMode!==a&&(this._scaleMode=a,this.addFlag(l.SCALE_MODE)),this}},{key:"setWrapMode",value:function(a){return this._wrapMode!==a&&(this._wrapMode=a,this.addFlag(l.WRAP_MODE)),this}},{key:"setPremultiplyAlpha",value:function(a){return this._premultiplyAlpha!==a&&(this._premultiplyAlpha=a,this.addFlag(l.PREMULTIPLY_ALPHA)),this}},{key:"updateSource",value:function(){return this.addFlag(l.SOURCE).addFlag(l.SOURCE_FRAME)}},{key:"update",value:function(){return this._flags&&this._renderState&&(this.hasFlag(l.SCALE_MODE)&&(this._renderState.setScaleMode(this,this._scaleMode),this.removeFlag(l.SCALE_MODE)),this.hasFlag(l.WRAP_MODE)&&(this._renderState.setWrapMode(this,this._wrapMode),this.removeFlag(l.WRAP_MODE)),this.hasFlag(l.PREMULTIPLY_ALPHA)&&(this._renderState.setPremultiplyAlpha(this,this._premultiplyAlpha),this.removeFlag(l.PREMULTIPLY_ALPHA)),this.hasFlag(l.SOURCE)&&this._source&&(this._renderState.setTextureImage(this,this._source),this.removeFlag(l.SOURCE))),this}},{key:"bind",value:function(a,b){return this._renderState||(this._renderState=a),this._renderState.bindTexture(this,b),this}},{key:"hasFlag",value:function(a){return 0!=(this._flags&a)}},{key:"addFlag",value:function(a){return this._flags|=a,this}},{key:"removeFlag",value:function(a){return this._flags&=~a,this}},{key:"destroy",value:function(){this._renderState&&(this._renderState.removeTexture(this),this._renderState=null),this._source=null,this._sourceFrame.destroy(),this._sourceFrame=null,this._scaleMode=null,this._wrapMode=null,this._premultiplyAlpha=null,this._flags=null}},{key:"source",get:function(){return this._source},set:function(a){this.setSource(a)}},{key:"sourceFrame",get:function(){return this.hasFlag(l.SOURCE_FRAME)&&(this._source?this._sourceFrame.set(0,0,this._source.videoWidth||this._source.width,this._source.videoHeight||this._source.height):this._sourceFrame.set(0,0,0,0),this.removeFlag(l.SOURCE_FRAME)),this._sourceFrame}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(a){this.setScaleMode(a)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(a){this.setWrapMode(a)}},{key:"premultiplyAlpha",get:function(){return this._premultiplyAlpha},set:function(a){this.setPremultiplyAlpha(a)}},{key:"size",get:function(){return this.sourceFrame.size}},{key:"width",get:function(){return this.sourceFrame.width}},{key:"height",get:function(){return this.sourceFrame.height}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=d(g),i=c(0),j=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(this,a),this._position=new h.default(b,c),this._bounds=null}return f(a,[{key:"set",value:function(){throw new Error("Method not implemented!")}},{key:"copy",value:function(a){throw new Error("Method not implemented!")}},{key:"clone",value:function(){throw new Error("Method not implemented!")}},{key:"equals",value:function(a){throw new Error("Method not implemented!")}},{key:"getBounds",value:function(){throw new Error("Method not implemented!")}},{key:"contains",value:function(a,b,c){throw new Error("Method not implemented!")}},{key:"getCollision",value:function(a){throw new Error("Method not implemented!")}},{key:"destroy",value:function(){this._bounds&&(this._bounds.destroy(),this._bounds=null),this._position.destroy(),this._position=null}},{key:"type",get:function(){return i.SHAPE.NONE}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a}},{key:"bounds",get:function(){return this.getBounds()}}]),a}();b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=d(g),i=c(24),j=d(i),k=c(42),l=d(k),m=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.shapeA,d=b.shapeB,f=b.distance,g=void 0===f?0:f,i=b.separation,j=void 0===i?h.default.Empty:i,k=b.shapeAInB,l=void 0!==k&&k,m=b.shapeBInA,n=void 0!==m&&m;e(this,a),this._shapeA=c,this._shapeB=d,this._distance=g,this._separation=j.clone(),this._shapeAInB=l,this._shapeBInA=n}return f(a,[{key:"destroy",value:function(){this._shapeA=null,this._shapeB=null,this._distance=null,this._separation=null,this._shapeAInB=null,this._shapeBInA=null}},{key:"shapeA",get:function(){return this._shapeA},set:function(a){this._shapeA=a}},{key:"shapeB",get:function(){return this._shapeB},set:function(a){this._shapeB=a}},{key:"distance",get:function(){return this._distance},set:function(a){this._distance=a}},{key:"separation",get:function(){return this._separation},set:function(a){this._separation.copy(a)}},{key:"shapeAInB",get:function(){return this._shapeAInB},set:function(a){this._shapeAInB=a}},{key:"shapeBInA",get:function(){return this._shapeBInA},set:function(a){this._shapeBInA=a}}],[{key:"checkPolygonPolygon",value:function(b,c){for(var d=h.default.Temp,e=b.points,f=c.points,g=e.length,i=f.length,k=new j.default,l=new j.default,m=new h.default,n=!1,o=!1,p=!0,q=!0,r=1/0,s=void 0,t=0;t<g;t++){var u=e[t],v=e[(t+1)%g];if(d.copy(v).subtract(u.x,u.y).perp(),b.project(d,k),c.project(d,l),!k.overlaps(l))return null;n=l.contains(k),o=k.contains(l),!n&&p&&(p=!1),!o&&q&&(q=!1),s=k.getOverlap(l),(n||o)&&(s+=Math.min(Math.abs(k.min-l.min),Math.abs(k.max-l.max))),s<r&&(r=s,m.copy(d))}for(var w=0;w<i;w++){var x=f[w],y=f[(w+1)%i];if(d.copy(y).subtract(x.x,x.y).perp(),b.project(d,k),c.project(d,l),!k.overlaps(l))return null;n=l.contains(k),o=k.contains(l),!n&&p&&(p=!1),!o&&q&&(q=!1),s=k.getOverlap(l),(n||o)&&(s+=Math.min(Math.abs(k.min-l.min),Math.abs(k.max-l.max))),s<r&&(r=s,m.copy(d))}return new a({shapeA:b,shapeB:c,distance:r,separation:m,shapeAInB:p,shapeBInA:q})}},{key:"checkPolygonRectangle",value:function(b,c){return a.checkPolygonPolygon(b,l.default.Temp.set(0,0,[new h.default(c.left,c.top),new h.default(c.right,c.top),new h.default(c.left,c.bottom),new h.default(c.right,c.bottom)]))}},{key:"checkPolygonCircle",value:function(a,b){}},{key:"checkCircleCircle",value:function(b,c){var d=b.position.distanceTo(c.x,c.y),e=b.radius+c.radius;return d>e?null:new a({shapeA:b,shapeB:c,distance:d,separation:c.position.clone().subtract(b.x,b.y).normalize().multiply(e-d),shapeAInB:b.radius<=c.radius&&d<=c.radius-b.radius,shapeBInA:c.radius<=b.radius&&d<=b.radius-c.radius})}},{key:"checkCircleRectangle",value:function(a,b){}},{key:"checkRectangleRectangle",value:function(b,c){return c.left>b.right||c.top>b.bottom?null:b.left>c.right||b.top>c.bottom?null:new a({shapeA:b,shapeB:c,distance:0,separation:h.default.Empty,shapeAInB:c.containsRect(b),shapeBInA:b.containsRect(c)})}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(4),h=d(g),i=c(2),j=d(i),k=c(8),l=(d(k),function(){function a(){e(this,a),this._minX=1/0,this._minY=1/0,this._maxX=-1/0,this._maxY=-1/0,this._rect=new h.default,this._dirty=!0}return f(a,[{key:"addCoords",value:function(a,b){return this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,b),this._maxX=Math.max(this._maxX,a),this._maxY=Math.max(this._maxY,b),this._dirty=!0,this}},{key:"addPoint",value:function(a,b){return b&&(a=a.transform(b,j.default.Temp)),this.addCoords(a.x,a.y)}},{key:"addRect",value:function(a,b){return b&&(a=a.transform(b,h.default.Temp)),this.addCoords(a.left,a.top).addCoords(a.right,a.bottom)}},{key:"getRect",value:function(){return this._dirty&&(this._rect.set(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY),this._dirty=!1),this._rect}},{key:"reset",value:function(){return this._minX=1/0,this._minY=1/0,this._maxX=-1/0,this._maxY=-1/0,this._dirty=!0,this}},{key:"destroy",value:function(){this._rect.destroy(),this._rect=null,this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._dirty=null}},{key:"minX",get:function(){return this._minX}},{key:"minY",get:function(){return this._minY}},{key:"maxX",get:function(){return this._maxX}},{key:"maxY",get:function(){return this._maxY}}]),a}());b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(26),k=d(j),l=c(9),m=d(l),n=c(3),o=d(n),p=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._tint=m.default.White.clone(),a._blendMode=o.default.BLEND_MODE,a}return g(b,a),h(b,[{key:"render",value:function(a){throw new Error("Method not implemented!")}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._tint.destroy(),this._tint=null,this._blendMode=null}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint.copy(a)}},{key:"blendMode",get:function(){return this._blendMode},set:function(a){this._blendMode=a}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"apply",value:function(a,b){throw new Error("Method not implemented!")}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(11),k=d(j),l=c(1),m=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a,c){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,c).then(function(a){return(0,l.decodeAudioBuffer)(a)})}},{key:"storageType",get:function(){return"audioBuffer"}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(12),k=d(j),l=c(1),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._objectURLs=new Set,a}return g(b,a),h(b,[{key:"create",value:function(a){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=d.mimeType,f=void 0===e?(0,l.determineMimeType)(a):e,g=d.loadEvent,h=void 0===g?"canplaythrough":g;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{mimeType:f}).then(function(a){return new Promise(function(b,d){var e=document.createElement("audio"),f=URL.createObjectURL(a);c._objectURLs.add(f),e.addEventListener(h,function(){return b(e)}),e.addEventListener("error",function(){return d(Error("Error loading audio source."))}),e.addEventListener("abort",function(){return d(Error("Audio loading was canceled."))}),e.src=f})})}},{key:"destroy",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._objectURLs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;URL.revokeObjectURL(f)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._objectURLs.clear(),this._objectURLs=null}},{key:"objectURLs",get:function(){return this._objectURLs}},{key:"storageType",get:function(){return"audio"}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(12),k=d(j),l=c(1),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._objectURLs=new Set,a}return g(b,a),h(b,[{key:"create",value:function(a){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=d.mimeType,f=void 0===e?(0,l.determineMimeType)(a):e;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{mimeType:f}).then(function(a){return new Promise(function(b,d){var e=new Image,f=URL.createObjectURL(a);c._objectURLs.add(f),e.addEventListener("load",function(){return b(e)}),e.addEventListener("error",function(){return d(Error("Error loading image source."))}),e.addEventListener("abort",function(){return d(Error("Image loading was canceled."))}),e.src=f})})}},{key:"destroy",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._objectURLs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;URL.revokeObjectURL(f)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._objectURLs.clear(),this._objectURLs=null}},{key:"objectURLs",get:function(){return this._objectURLs}},{key:"storageType",get:function(){return"image"}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;d(this,a),this._min=b,this._max=c}return e(a,[{key:"set",value:function(a,b){return this.min=a,this.max=b,this}},{key:"copy",value:function(a){return this.set(a.min,a.max)}},{key:"clone",value:function(){return new a(this.min,this.max)}},{key:"contains",value:function(a){return a.min>this._min&&a.max<this._max}},{key:"includes",value:function(a){return a<=this._max&&a>=this._min}},{key:"overlaps",value:function(a){return!(this._min>a.max||a.min>this._max)}},{key:"getOverlap",value:function(a){return this.overlaps(a)?Math.min(this._max,a.max)-Math.max(this._min,a.min):0}},{key:"destroy",value:function(){this._min=null,this._max=null}},{key:"min",get:function(){return this._min},set:function(a){this._min=a}},{key:"max",get:function(){return this._y},set:function(a){this._max=a}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(10),h=d(g),i=c(0),j=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,a),this._startTime=0,this._timeBuffer=0,this._isRunning=!1,this._time=new h.default,b&&this.start()}return f(a,[{key:"start",value:function(){return this._isRunning||(this._startTime=Date.now(),this._isRunning=!0),this}},{key:"stop",value:function(){return this._isRunning&&(this._timeBuffer+=Date.now()-this._startTime,this._isRunning=!1),this}},{key:"reset",value:function(){return this._timeBuffer=0,this._isRunning=!1,this}},{key:"restart",value:function(){
return this.reset().start()}},{key:"getElapsedMilliseconds",value:function(){return this._isRunning?this._timeBuffer+(Date.now()-this._startTime):this._timeBuffer}},{key:"getElapsedSeconds",value:function(){return this.getElapsedMilliseconds()/i.TIME.SECONDS}},{key:"getElapsedMinutes",value:function(){return this.getElapsedMilliseconds()/i.TIME.MINUTES}},{key:"getElapsedTime",value:function(){return this._time.setMilliseconds(this.getElapsedMilliseconds())}},{key:"destroy",value:function(){this._startTime=null,this._timeBuffer=null,this._isRunning=null,this._time.destroy(),this._time=null}},{key:"isRunning",get:function(){return this._isRunning}},{key:"time",get:function(){return this._time}}]),a}();b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(48),k=d(j),l=c(8),m=d(l),n=c(4),o=d(n),p=c(18),q=d(p),r=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._scene=null,a._parent=null,a._active=!0,a._globalTransform=new m.default,a._localBounds=new o.default,a._bounds=new q.default,a}return g(b,a),h(b,[{key:"getLocalBounds",value:function(){return this._localBounds}},{key:"getBounds",value:function(){return this.updateParentTransforms(),this.updateBounds(),this._bounds.getRect()}},{key:"updateBounds",value:function(){return this._bounds.reset().addRect(this.getLocalBounds(),this.getGlobalTransform()),this}},{key:"updateParentTransforms",value:function(){return this._parent&&this._parent.updateParentTransforms(),this._dirtyTransform&&(this.updateTransform(),this._dirtyTransform=!1),this}},{key:"getGlobalTransform",value:function(){return this._globalTransform.copy(this.getTransform()),this._parent&&this._globalTransform.combine(this._parent.getGlobalTransform()),this._globalTransform}},{key:"setOrigin",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var c=this.getBounds();a*=c.width,b*=c.height}return this.origin.set(a,b),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._globalTransform.destroy(),this._globalTransform=null,this._localBounds.destroy(),this._localBounds=null,this._bounds.destroy(),this._bounds=null,this._scene=null,this._parent=null,this._active=null}},{key:"scene",get:function(){return this._scene},set:function(a){this._scene=a}},{key:"parent",get:function(){return this._parent},set:function(a){this._parent=a}},{key:"active",get:function(){return this._active},set:function(a){this._active=a}},{key:"globalTransform",get:function(){return this.getGlobalTransform()}},{key:"localBounds",get:function(){return this.getLocalBounds()}},{key:"bounds",get:function(){return this.getBounds()}}]),b}(k.default);b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d,g));return h._callback=a,h._scope=c||h,h}return g(b,a),h(b,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._x,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._y;return this._x===a&&this._y===b||(this._x=a,this._y=b,this._callback.call(this._scope)),this}},{key:"add",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x+a,this._y+b)}},{key:"subtract",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x-a,this._y-b)}},{key:"multiply",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x*a,this._y*b)}},{key:"divide",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x/a,this._y/b)}},{key:"normalize",value:function(){return this.divide(this.magnitude)}},{key:"copy",value:function(a){return this.set(a.x,a.y)}},{key:"clone",value:function(){return new b(this._callback,this._scope,this._x,this._y)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._callback=null,this._scope=null}},{key:"x",get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this._callback.call(this._scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this._callback.call(this._scope))}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=d(g),i=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,a),this._size=new h.default(b,c),this._renderState=null,this._isRoot=d}return f(a,[{key:"bind",value:function(a){return this._renderState||(this._renderState=a),this._renderState.bindRenderTarget(this),this}},{key:"destroy",value:function(){this._renderState&&(this._renderState.removeRenderTarget(this),this._renderState=null),this._size.destroy(),this._size=null,this._isRoot=null}},{key:"isRoot",get:function(){return this._isRoot},set:function(a){this._isRoot=a}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"width",get:function(){return this._size.x},set:function(a){this._size.x=0|a}},{key:"height",get:function(){return this._size.y},set:function(a){this._size.y=0|a}}]),a}();b.default=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._renderState=null,this._vertexBuffer=null,this._indexBuffer=null,this._bound=!1}return e(a,[{key:"bind",value:function(a){}},{key:"unbind",value:function(){}},{key:"render",value:function(a){}},{key:"flush",value:function(){}},{key:"destroy",value:function(){this._bound&&this.unbind(),this._renderState&&(this._renderState.deleteBuffer(this._indexBuffer),this._indexBuffer=null,this._renderState.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null,this._renderState=null),this._bound=null}},{key:"bound",get:function(){return this._bound},set:function(a){this._bound=a}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(53),h=d(g),i=c(54),j=d(i),k=function(){function a(b,c){e(this,a),this._renderState=null,this._vertexSource=null,this._fragmentSource=null,this._uniforms=new Map,this._attributes=new Map,this._program=null,this._bound=!1,this._stride=0,void 0!==b&&this.setVertexSource(b),void 0!==c&&this.setFragmentSource(c)}return f(a,[{key:"bind",value:function(a){if(this._renderState||(this._renderState=a,this._program=a.compileProgram(this._vertexSource,this._fragmentSource)),!this._bound){var b=this._renderState,c=this._program;b.useProgram(c);var d=0,e=!0,f=!1,g=void 0;try{for(var h,i=this._attributes.values()[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j.bind(b,c,this._stride,d),d+=j.byteSize}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}var k=!0,l=!1,m=void 0;try{for(var n,o=this._uniforms.values()[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){n.value.bind(b,c)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}this._bound=!0}return this}},{key:"unbind",value:function(){if(this._bound){var a=!0,b=!1,c=void 0;try{for(var d,e=this._attributes.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.unbind()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}var f=!0,g=!1,h=void 0;try{for(var i,j=this._uniforms.values()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){i.value.unbind()}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}this._bound=!1}return this}},{key:"setVertexSource",value:function(a){this._vertexSource=Array.isArray(a)?a.join("\n"):a}},{key:"setFragmentSource",value:function(a){this._fragmentSource=Array.isArray(a)?a.join("\n"):a}},{key:"setAttributes",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value,i=g instanceof h.default?g:new h.default(g);this._attributes.set(i.name,i),this._stride+=i.byteSize}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"setUniforms",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value,h=g instanceof j.default?g:new j.default(g);this._uniforms.set(h.name,h)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"getUniform",value:function(a){if(!this._uniforms.has(a))throw new Error('Could not find Uniform "'+a+'".');return this._uniforms.get(a)}},{key:"destroy",value:function(){this._bound&&this.unbind();var a=!0,b=!1,c=void 0;try{for(var d,e=this._attributes.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.destroy()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}var f=!0,g=!1,h=void 0;try{for(var i,j=this._uniforms.values()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){i.value.destroy()}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}this._renderState&&(this._renderState.deleteProgram(this._program),this._renderState=null,this._program=null),this._attributes.clear(),this._attributes=null,this._uniforms.clear(),this._uniforms=null,this._vertexSource=null,this._fragmentSource=null,this._bound=null}},{key:"vertexSource",get:function(){return this._vertexSource}},{key:"fragmentSource",get:function(){return this._fragmentSource}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(66),k=d(j),l=c(4),m=d(l),n=c(2),o=(d(n),function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._texture=null,c._textureFrame=new m.default,c._vertexData=new ArrayBuffer(48),c._positionData=new Float32Array(c._vertexData,0,8),c._texCoordData=new Uint32Array(c._vertexData,32,4),c._updateTexCoords=!0,a&&c.setTexture(a),c}return g(b,a),h(b,[{key:"setTexture",value:function(a){return this._texture=a,this._localBounds.set(0,0,a.width,a.height),this.setTextureFrame(a.sourceFrame),this.scale.set(1,1),this}},{key:"setTextureFrame",value:function(a){return this._textureFrame.copy(a),this._updateTexCoords=!0,this}},{key:"render",value:function(a){if(this.active){a.render(this,"sprite");var b=!0,c=!1,d=void 0;try{for(var e,f=this.children[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){e.value.render(a)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}return this}},{key:"getPositionData",value:function(){return this.updatePositionData(),this._positionData}},{key:"updatePositionData",value:function(){var a=this._positionData,b=this.getLocalBounds(),c=b.left,d=b.top,e=b.right,f=b.bottom,g=this.getGlobalTransform(),h=g.a,i=g.b,j=g.c,k=g.d,l=g.x,m=g.y;return a[0]=c*h+d*i+l,a[1]=c*j+d*k+m,a[2]=e*h+d*i+l,a[3]=e*j+d*k+m,a[4]=c*h+f*i+l,a[5]=c*j+f*k+m,a[6]=e*h+f*i+l,a[7]=e*j+f*k+m,this}},{key:"getTexCoordData",value:function(){return this._updateTexCoords&&(this.updateTexCoordData(),this._updateTexCoords=!1),this._texCoordData}},{key:"updateTexCoordData",value:function(){var a=this._texCoordData,b=this._textureFrame,c=b.left,d=b.top,e=b.right,f=b.bottom,g=this._texture,h=g.width,i=g.height,j=c/h*65535&65535,k=(d/i*65535&65535)<<16,l=e/h*65535&65535,m=(f/i*65535&65535)<<16;return a[0]=k|j,a[1]=k|l,a[2]=m|j,a[3]=m|l,this}},{key:"updateTexture",value:function(){return this._texture&&this._texture.updateSource(),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._texture=null,this._textureFrame.destroy(),this._textureFrame=null,this._vertexData=null,this._positionData=null,this._texCoordData=null,this._updateTexCoords=null}},{key:"texture",get:function(){return this._texture},set:function(a){this.setTexture(a)}},{key:"textureFrame",get:function(){return this._textureFrame},set:function(a){this.setTextureFrame(a)}},{key:"width",get:function(){return Math.abs(this.scaleX)*this._texture.width},set:function(a){this.scaleX=a/this._texture.width}},{key:"height",get:function(){return Math.abs(this.scaleY)*this._texture.height},set:function(a){this.scaleY=a/this._texture.height}}]),b}(k.default));b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},l=c(6),m=d(l),n=c(33),o=d(n),p=c(11),q=d(p),r=c(21),s=d(r),t=c(22),u=d(t),v=c(12),w=d(v),x=c(34),y=d(x),z=c(23),A=d(z),B=c(35),C=d(B),D=c(36),E=d(D),F=c(38),G=d(F),H=c(40),I=d(H),J=c(41),K=d(J),L=c(46),M=d(L),N=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=a.basePath,d=void 0===c?"":c;f(this,b);var e=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return e._queue=new Set,e._resources=new o.default,e._factories=new Map,e._basePath=d,e._request={method:"GET",mode:"cors",cache:"default"},e._database=null,e.addFactory("arrayBuffer",new q.default).addFactory("audioBuffer",new s.default).addFactory("audio",new u.default).addFactory("blob",new w.default).addFactory("font",new y.default).addFactory("image",new A.default).addFactory("json",new C.default).addFactory("music",new E.default).addFactory("sound",new G.default).addFactory("string",new I.default).addFactory("texture",new K.default).addFactory("video",new M.default),e}return h(b,a),j(b,[{key:"addFactory",value:function(a,b){return this._factories.set(a,b),this._resources.addType(a),this}},{key:"getFactory",value:function(a){if(!this._factories.has(a))throw new Error('No resource factory for type "'+a+'".');return this._factories.get(a)}},{key:"load",value:function(a){var b=this,c=[].concat(e(this._queue)),d=0;return a&&this.once("complete",a,this),this._queue.clear(),this.trigger("start",c.length,d,c),c.map(function(a){return b.loadItem(a)}).reduce(function(a,e){return a.then(function(){return e}).then(function(a){return b.trigger("progress",c.length,++d,c,a)})},Promise.resolve()).then(function(){return b.trigger("complete",c.length,d,c,b._resources)})}},{key:"loadItem",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.type,d=b.name,e=b.path,f=b.options;if(this._resources.has(c,d))return Promise.resolve(this._resources.get(c,d));var g=this.getFactory(c);return this._database?this._database.loadData(g.storageType,d).then(function(b){return b.data||g.request(a._basePath+e,a._request).then(function(a){return g.process(a)}).then(function(b){return a._database.saveData(g.storageType,d,b).then(function(a){return a.data})})}).then(function(a){return g.create(a,f)}).then(function(b){return a._resources.set(c,d,b),b}):g.load(this._basePath+e,this._request,f).then(function(b){return a._resources.set(c,d,b),b})}},{key:"addItem",value:function(a,b,c,d){if(!this._factories.has(a))throw new Error('No resource factory for type "'+a+'".');return this._queue.add({type:a,name:b,path:c,options:d}),this}},{key:"addList",value:function(a,b,c){var d=!0,e=!1,f=void 0;try{for(var g,h=Object.entries(b)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var j=g.value,k=i(j,2),l=k[0],m=k[1];this.addItem(a,l,m,c)}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return this}},{key:"destroy",value:function(){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this);var a=!0,c=!1,d=void 0;try{for(var e,f=this._factories.values()[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}this._database&&(this._database.destroy(),this._database=null),this._resources.destroy(),this._resources=null,this._queue.clear(),this._queue=null,this._factories.clear(),this._factories=null,this._basePath=null,this._request=null}},{key:"resources",get:function(){return this._resources}},{key:"basePath",get:function(){return this._basePath},set:function(a){this._basePath=a}},{key:"request",get:function(){return this._request},set:function(a){this._request=a}},{key:"database",get:function(){return this._database},set:function(a){this._database=a}}]),b}(m.default);b.default=N},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._resources=new Map,this._types=new Set}return e(a,[{key:"addType",value:function(a){return this._types.has(a)||(this._resources.set(a,new Map),this._types.add(a)),this}},{key:"getResources",value:function(a){if(!this._types.has(a))throw new Error('Unknown type "'+a+'".');return this._resources.get(a)}},{key:"has",value:function(a,b){return this.getResources(a).has(b)}},{key:"get",value:function(a,b){var c=this.getResources(a);if(!c.has(b))throw new Error('Missing resource "'+b+'" with type "'+a+'".');return c.get(b)}},{key:"set",value:function(a,b,c){return this.getResources(a).set(b,c),this}},{key:"remove",value:function(a,b){return this.getResources(a).delete(b),this}},{key:"clear",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._resources.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.clear()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this}},{key:"destroy",value:function(){this.clear(),this._resources.clear(),this._resources=null,this._types.clear(),this._types=null}},{key:"resources",get:function(){return this._resources}},{key:"types",get:function(){return this._types}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(11),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.family,e=c.destriptors,f=c.addToDocument,g=void 0===f||f;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,null).then(function(a){return new Promise(function(b,c){var f=new FontFace(d,a,e);f.load().then(function(){g&&document.fonts.add(f),b(f)}).catch(function(){return c(f)})})})}},{key:"storageType",get:function(){return"font"}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(13),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"process",value:function(a){return a.json()}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"storageType",get:function(){return"json"}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(22),k=d(j),l=c(37),m=d(l),n=c(5),o=d(n),p=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a,c){return o.default.webAudio?i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,c).then(function(a){return new m.default(a)}):Promise.reject(Error("Web Audio is not supported!"))}},{key:"storageType",get:function(){return"music"}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(14),k=d(j),l=c(1),m=c(5),n=d(m),o=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));if(!n.default.webAudio)throw new Error("Web Audio API is not supported, use the fallback Audio instead.");return c._audioContext=null,c._sourceNode=null,c._gainNode=null,c}return g(b,a),h(b,[{key:"connect",value:function(a){this._audioContext||(this._audioContext=a.audioContext,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(a.musicGain),this._gainNode.gain.value=this._volume,this._sourceNode=this._audioContext.createMediaElementSource(this.source),this._sourceNode.connect(this._gainNode))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._audioContext&&(this._audioContext=null,this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null)}},{key:"audioContext",get:function(){return this._audioContext}},{key:"analyserTarget",get:function(){return this._gainNode}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,l.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._gainNode&&(this._gainNode.gain.value=b))}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{
value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(21),k=d(j),l=c(39),m=d(l),n=c(5),o=d(n),p=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a,c){return o.default.webAudio?i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,c).then(function(a){return new m.default(a)}):Promise.reject(Error("Web Audio is not supported!"))}},{key:"storageType",get:function(){return"sound"}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(14),k=d(j),l=c(1),m=c(5),n=d(m),o=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));if(!n.default.webAudio)throw new Error("Web Audio API is not supported, use the fallback Audio instead.");return c._audioContext=null,c._sourceNode=null,c._gainNode=null,c._paused=!0,c._startTime=0,c._currentTime=0,c}return g(b,a),h(b,[{key:"connect",value:function(a){this._audioContext||(this._audioContext=a.audioContext,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(a.soundGain),this._gainNode.gain.value=this._volume)}},{key:"play",value:function(a){this._paused&&(this.applyOptions(a),this._sourceNode=this._audioContext.createBufferSource(),this._sourceNode.buffer=this.source,this._sourceNode.loop=this._loop,this._sourceNode.playbackRate.value=this._speed,this._sourceNode.connect(this._gainNode),this._sourceNode.start(0,this._currentTime),this._startTime=this._audioContext.currentTime,this._paused=!1,this.trigger("start"))}},{key:"pause",value:function(){if(!this._paused){var a=this.duration,b=this.currentTime;this._currentTime=b<=a?b:(b-a)*(b/a|0),this._sourceNode.stop(0),this._sourceNode.disconnect(),this._sourceNode=null,this._paused=!0,this.trigger("stop")}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._audioContext&&(this._audioContext=null,this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null)}},{key:"audioContext",get:function(){return this._audioContext}},{key:"analyserTarget",get:function(){return this._gainNode}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,l.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._gainNode&&(this._gainNode.gain.value=b))}},{key:"loop",set:function(a){var b=!!a;this._loop!==b&&(this._loop=b,this._sourceNode&&(this._sourceNode.loop=b))}},{key:"speed",set:function(a){var b=Math.max(0,a);this._speed!==b&&(this._speed=b,this._sourceNode&&(this._sourceNode.playbackRate.value=b))}},{key:"currentTime",get:function(){return this._startTime&&this._audioContext?this._currentTime+this._audioContext.currentTime-this._startTime:0},set:function(a){this.pause(),this._currentTime=Math.max(0,a),this.play()}},{key:"paused",get:function(){return!(!this._paused||this._loop)&&this.currentTime>=this.duration}},{key:"playing",get:function(){return!this._paused}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(13),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"process",value:function(a){return a.text()}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"storageType",get:function(){return"string"}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(23),k=d(j),l=c(15),m=d(l),n=c(3),o=d(n),p=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.mimeType,e=c.scaleMode,f=void 0===e?o.default.SCALE_MODE:e,g=c.wrapMode,h=void 0===g?o.default.WRAP_MODE:g,j=c.premultiplyAlpha,k=void 0===j?o.default.PREMULTIPLY_ALPHA:j;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{mimeType:d}).then(function(a){return new m.default(a,{scaleMode:f,wrapMode:h,premultiplyAlpha:k})})}},{key:"storageType",get:function(){return"image"}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(16),k=d(j),l=c(17),m=d(l),n=c(18),o=d(n),p=c(24),q=d(p),r=c(0),s=c(2),t=d(s),u=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return g._points=d.map(function(a){return a.clone()}),g}return g(b,a),h(b,[{key:"setPoints",value:function(a){for(var b=this._points,c=b.length,d=c-a.length,e=0;e<c;e++)b[e].copy(a[e]);if(d>0){var f=!0,g=!1,h=void 0;try{for(var i,j=b.splice(a.length,d)[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){i.value.destroy()}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}}else if(d<0)for(var k=c;k<a.length;k++)b.push(a[k].clone())}},{key:"project",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new q.default,c=1/0,d=-1/0;a.normalize();var e=!0,f=!1,g=void 0;try{for(var h,i=this._points[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=a.dot(j);c=Math.min(c,k),d=Math.max(d,k)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return b.set(c,d)}},{key:"set",value:function(a,b,c){return this.position.set(a,b),this.setPoints(c),this}},{key:"copy",value:function(a){return this.position.copy(a.position),this.setPoints(a.points),this}},{key:"clone",value:function(){return new b(this.x,this.y,this.points)}},{key:"equals",value:function(a){return a===this||this._points.length===a.points.length&&this._points.every(function(b,c){return b.equals(a.points[c])})}},{key:"getBounds",value:function(){this._bounds?this._bounds.reset():this._bounds=new o.default;var a=!0,b=!1,c=void 0;try{for(var d,e=this._points[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;this._bounds.addCoords(f.x+this.x,f.y+this.y)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this._bounds.getRect()}},{key:"contains",value:function(a,b,c){for(var d=this._points,e=d.length,f=new t.default,g=new t.default,h=!1,i=0,j=e-1;i<e;j=i++){var k=d[i],l=d[j];c&&(k=k.transform(c,f),l=l.transform(c,g)),k.y>b!=l.y>b&&a<(l.x-k.x)*((b-k.y)/(l.y-k.y))+k.x&&(h=!h)}return h}},{key:"getCollision",value:function(a){switch(a.type){case r.SHAPE.RECTANGLE:return m.default.checkPolygonRectangle(this,a);case r.SHAPE.CIRCLE:return m.default.checkPolygonCircle(this,a);case r.SHAPE.POLYGON:return m.default.checkPolygonPolygon(this,a);case r.SHAPE.NONE:default:throw new Error('Invalid Shape Type "'+a.type+'".')}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this);var a=!0,c=!1,d=void 0;try{for(var e,f=this._points[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}this._points.length=0,this._points=null}},{key:"type",get:function(){return r.SHAPE.POLYGON}},{key:"points",get:function(){return this._points},set:function(a){this.setPoints(a)}}]),b}(k.default);b.default=u,u.Empty=new u(0,0,[]),u.Temp=new u},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(44),i=d(h),j=c(45),k=d(j),l=c(0),m=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,[new k.default(0,l.GAMEPAD.FaceButtonBottom),new k.default(1,l.GAMEPAD.FaceButtonLeft),new k.default(2,l.GAMEPAD.FaceButtonRight),new k.default(3,l.GAMEPAD.FaceButtonTop),new k.default(4,l.GAMEPAD.LeftTriggerBottom),new k.default(5,l.GAMEPAD.RightTriggerBottom),new k.default(6,l.GAMEPAD.LeftTriggerTop),new k.default(7,l.GAMEPAD.RightTriggerTop),new k.default(8,l.GAMEPAD.Select),new k.default(9,l.GAMEPAD.Start),new k.default(10,l.GAMEPAD.LeftStickButton),new k.default(11,l.GAMEPAD.RightStickButton),new k.default(12,l.GAMEPAD.DPadUp),new k.default(13,l.GAMEPAD.DPadDown),new k.default(14,l.GAMEPAD.DPadLeft),new k.default(15,l.GAMEPAD.DPadRight),new k.default(16,l.GAMEPAD.Special)],[new k.default(0,l.GAMEPAD.LeftStickLeft,{negate:!0}),new k.default(0,l.GAMEPAD.LeftStickRight),new k.default(1,l.GAMEPAD.LeftStickUp,{negate:!0}),new k.default(1,l.GAMEPAD.LeftStickDown),new k.default(2,l.GAMEPAD.RightStickLeft,{negate:!0}),new k.default(2,l.GAMEPAD.RightStickRight),new k.default(3,l.GAMEPAD.RightStickUp,{negate:!0}),new k.default(3,l.GAMEPAD.RightStickDown)]))}return g(b,a),b}(i.default);b.default=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._buttons=new Set(b),this._axes=new Set(c)}return e(a,[{key:"setButtons",value:function(a){this._buttons.clear();var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._buttons.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"setAxes",value:function(a){this._axes.clear();var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._axes.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"destroy",value:function(){this._buttons.clear(),this._buttons=null,this._axes.clear(),this._axes=null}},{key:"buttons",get:function(){return this._buttons},set:function(a){this.setButtons(a)}},{key:"axes",get:function(){return this._axes},set:function(a){this.setAxes(a)}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=e.threshold,h=void 0===g?.2:g,i=e.negate,j=void 0!==i&&i,k=e.normalize,l=void 0!==k&&k;d(this,a),this._index=b,this._channel=c,this._key=c%f.RANGE_NODE,this._threshold=h,this._negate=j,this._normalize=l}return e(a,[{key:"transformValue",value:function(a){var b=a;return this._negate&&(b*=-1),this._normalize&&(b=(b+1)/2),b>this._threshold?b:0}},{key:"index",get:function(){return this._index},set:function(a){this._index=a}},{key:"channel",get:function(){return this._channel},set:function(a){this._channel=a,this._key=this._channel%f.RANGE_NODE}},{key:"key",get:function(){return this._key},set:function(a){this._key=a%f.RANGE_NODE,this._channel=f.OFFSET_GAMEPAD+this._key}},{key:"threshold",get:function(){return this._threshold},set:function(a){this._threshold=a}},{key:"negate",get:function(){return this._negate},set:function(a){this._negate=a}},{key:"normalize",get:function(){return this._normalize},set:function(a){this._normalize=a}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(12),k=d(j),l=c(1),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._objectURLs=new Set,a}return g(b,a),h(b,[{key:"create",value:function(a){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=d.mimeType,f=void 0===e?(0,l.determineMimeType)(a):e,g=d.loadEvent,h=void 0===g?"canplaythrough":g;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{mimeType:f}).then(function(a){return new Promise(function(b,d){var e=document.createElement("video"),f=URL.createObjectURL(a);c._objectURLs.add(f),e.addEventListener(h,function(){return b(e)}),e.addEventListener("error",function(){return d(Error("Error loading video source."))}),e.addEventListener("abort",function(){return d(Error("Video loading was canceled."))}),e.src=f})})}},{key:"destroy",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._objectURLs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;URL.revokeObjectURL(f)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._objectURLs.clear(),this._objectURLs=null}},{key:"objectURLs",get:function(){return this._objectURLs}},{key:"storageType",get:function(){return"video"}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(19),h=d(g),i=function(){function a(b){e(this,a),this._app=b,this._currentScene=null,this._sceneActive=!1,b.on("scene:change",this.changeScene,this).on("scene:start",this.startScene,this).on("scene:stop",this.stopScene,this)}return f(a,[{key:"update",value:function(a){if(this._currentScene&&this._sceneActive){var b=this._app.displayManager;this._currentScene.update(a),b.begin();var c=!0,d=!1,e=void 0;try{for(var f,g=this._currentScene.nodes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var i=f.value;i instanceof h.default&&i.render(b)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}b.end()}}},{key:"startScene",value:function(){if(!this._currentScene)throw new Error("No scene was specified, use scene:change!");if(this._sceneActive)throw new Error("Scene can only be started once!");this._sceneActive=!0,this._currentScene.init()}},{key:"stopScene",value:function(){this._currentScene&&(this._sceneActive&&(this._currentScene.unload(),this._sceneActive=!1),this._currentScene.destroy(),this._currentScene=null,this._app.loader.off())}},{key:"changeScene",value:function(a){this.stopScene(),this._currentScene=a,this._currentScene.app=this._app,this._currentScene.load(this._app.loader)}},{key:"destroy",value:function(){this._app.trigger("scene:stop").off("scene:change",this.changeScene,this).off("scene:start",this.startScene,this).off("scene:stop",this.stopScene,this),this._app=null}}]),a}();b.default=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=c(27),m=d(l),n=c(8),o=d(n),p=c(1),q=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._transform=new o.default,a._position=new m.default(a._setDirty,a),a._scale=new m.default(a._setDirty,a,1,1),a._origin=new m.default(a._setDirty,a),a._rotation=0,a._sin=0,a._cos=1,a._dirtyTransform=!0,a}return g(b,a),h(b,[{key:"getTransform",value:function(){return this._dirtyTransform&&(this.updateTransform(),this._dirtyTransform=!1),this._transform}},{key:"updateTransform",value:function(){var a=this._transform,b=this._scale,c=this._origin,d=this._position;return a.a=b.x*this._cos,a.b=b.y*this._sin,a.c=b.x*-this._sin,a.d=b.y*this._cos,a.x=c.x*-a.a-c.y*a.b+d.x,a.y=c.x*-a.c-c.y*a.d+d.y,this}},{key:"setPosition",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._position.set(a,b),this}},{key:"setScale",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._scale.set(a,b),this}},{key:"setOrigin",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._origin.set(a,b),this}},{key:"setRotation",value:function(a){var b=a%360,c=b<0?b+360:b,d=(0,p.degreesToRadians)(c);return this._rotation=c,this._cos=Math.cos(d),this._sin=Math.sin(d),this._setDirty(),this}},{key:"translate",value:function(a,b){return this.setPosition(this.x+a,this.y+b)}},{key:"rotate",value:function(a){return this.setRotation(this._rotation+a)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._transform.destroy(),this._transform=null,this._position.destroy(),this._position=null,this._scale.destroy(),this._scale=null,this._origin.destroy(),this._origin=null,this._rotation=null,this._sin=null,this._cos=null,this._dirtyTransform=null}},{key:"_setDirty",value:function(){this._dirtyTransform=!0}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale.copy(a)}},{key:"scaleX",get:function(){return this._scale.x},set:function(a){this._scale.x=a}},{key:"scaleY",get:function(){return this._scale.y},set:function(a){this._scale.y=a}},{key:"origin",get:function(){return this._origin},set:function(a){this._origin.copy(a)}},{key:"originX",get:function(){return this._origin.x},set:function(a){this._origin.x=a}},{key:"originY",get:function(){return this._origin.y},set:function(a){this._origin.y=a}},{key:"rotation",get:function(){return this._rotation},set:function(a){this.setRotation(a)}},{key:"transform",get:function(){return this.getTransform()},set:function(a){this._transform.copy(a)}}]),b}(k.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(50),h=d(g),i=c(28),j=d(i),k=c(51),l=d(k),m=c(56),n=d(m),o=c(9),p=d(o),q=c(58),r=d(q),s=c(4),t=d(s),u=c(3),v=d(u),w=c(5),x=d(w),y=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.width,f=void 0===d?800:d,g=c.height,i=void 0===g?600:g,k=c.clearColor,m=void 0===k?p.default.Black:k,o=c.clearBeforeRender,q=void 0===o||o,s=c.contextOptions,u=void 0===s?{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!0,depth:!1}:s;if(e(this,a),!x.default.webGL)throw new Error("This browser or hardware does not support WebGL.");if(this._canvas=b.canvas,this._context=this._createContext(u),!this._context)throw new Error("This browser or hardware does not support WebGL.");this._contextLost=this._context.isContextLost(),this._contextLost&&this._context.getExtension("WEBGL_lose_context")&&this._context.getExtension("WEBGL_lose_context").restoreContext(),this._renderers=new Map,this._renderTarget=new j.default(f,i,!0),this._view=new r.default(new t.default(0,0,f,i)),this._clearBeforeRender=q,this._isRendering=!1,this._renderState=new h.default(this._context),this._renderState.blendMode=v.default.BLEND_MODE,this._renderState.clearColor=m,this._renderTarget.bind(this._renderState),this._addEvents(),this._setupGL(),this.addRenderer("sprite",new l.default).addRenderer("particle",new n.default).resize(f,i)}return f(a,[{key:"addRenderer",value:function(a,b){if(this._renderers.has(a))throw new Error('Renderer "'+a+'" was already added.');return this._renderers.set(a,b),this}},{key:"getRenderer",value:function(a){if(!this._renderers.has(a))throw new Error('Could not find renderer "'+a+'".');return this._renderers.get(a)}},{key:"updateViewport",value:function(){var a=this._renderTarget.width,b=this._renderTarget.height,c=this._view.viewport;return this._renderState.viewport=t.default.Temp.set(Math.round(a*c.x),Math.round(b*c.y),Math.round(a*c.width),Math.round(b*c.height)),this._renderState.projection=this._view.getTransform(),this}},{key:"resize",value:function(a,b){return this._canvas.width=a,this._canvas.height=b,this._renderTarget.width=a,this._renderTarget.height=b,this.updateViewport(),this}},{key:"setView",value:function(a){return this._view.copy(a),this.updateViewport(),this}},{key:"resetView",value:function(){return this._view.reset(t.default.Temp.set(0,0,this._renderTarget.width,this._renderTarget.height)),this.updateViewport(),this}},{key:"begin",value:function(){return this._isRendering||this._contextLost?this:(this._clearBeforeRender&&this._renderState.clear(),this._isRendering=!0,this)}},{key:"render",value:function(a,b){return!this._isRendering||this._contextLost?this:(a.active&&this.isVisible(a)&&(this._renderState.renderer=this.getRenderer(b),this._renderState.renderer.render(a)),this)}},{key:"end",value:function(){return!this._isRendering||this._contextLost?this:(this._renderState.renderer&&this._renderState.renderer.flush(),this._isRendering=!1,this)}},{key:"isVisible",value:function(a){return a.active}},{key:"destroy",value:function(){this._removeEvents();var a=!0,b=!1,c=void 0;try{for(var d,e=this._renderers.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.destroy()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._renderers.clear(),this._renderers=null,this._renderState.destroy(),this._renderState=null,this._view=null,this._clearBeforeRender=null,this._isRendering=null,this._contextLost=null,this._context=null,this._canvas=null}},{key:"_createContext",value:function(a){try{return this._canvas.getContext("webgl",a)||this._canvas.getContext("experimental-webgl",a)}catch(a){return null}}},{key:"_addEvents",value:function(){this._onContextLostHandler=this._onContextLost.bind(this),this._onContextRestoredHandler=this._onContextRestored.bind(this),this._canvas.addEventListener("webglcontextlost",this._onContextLostHandler,!1),this._canvas.addEventListener("webglcontextrestored",this._onContextRestoredHandler,!1)}},{key:"_removeEvents",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLostHandler,!1),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestoredHandler,!1),this._onContextLostHandler=null,this._onContextRestoredHandler=null}},{key:"_setupGL",value:function(){var a=this._context;a.colorMask(!0,!0,!0,!1),a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND)}},{key:"_onContextLost",value:function(){this._contextLost=!0}},{key:"_onContextRestored",value:function(){this._contextLost=!1}},{key:"renderState",get:function(){return this._renderState}}]),a}();b.default=y},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(28),h=(d(g),c(9)),i=d(h),j=c(8),k=d(j),l=c(4),m=d(l),n=c(0),o=c(75),p=d(o),q=function(){function a(b){if(e(this,a),!b)throw new Error("This browser or hardware does not support WebGL.");this._context=b,this._renderer=null,this._shader=null,this._blendMode=null,this._glFramebuffer=null,this._glFramebuffers=new WeakMap,this._textureUnit=-1,this._glTexture=null,this._glTextures=new WeakMap,this._clearColor=new i.default,this._viewport=new m.default,this._projection=new k.default}return f(a,[{key:"clear",value:function(a){var b=this._context;return void 0!==a&&(this.clearColor=a),b.clear(b.COLOR_BUFFER_BIT),this}},{key:"createBuffer",value:function(){return this._context.createBuffer()}},{
key:"getGLFramebuffer",value:function(a){return this._glFramebuffers.has(a)||this._glFramebuffers.set(a,a.isRoot?null:this._context.createFramebuffer()),this._glFramebuffers.get(a)}},{key:"removeRenderTarget",value:function(a){if(this._glFramebuffers.has(a)){var b=this._context,c=this._glFramebuffers.get(a);this._glFramebuffer===c&&(b.bindFramebuffer(b.FRAMEBUFFER,null),this._glFramebuffer=null),b.deleteFramebuffer(c),this._glFramebuffers.delete(a)}return this}},{key:"bindRenderTarget",value:function(a){return this.glFramebuffer=this.getGLFramebuffer(a),this}},{key:"getGLTexture",value:function(a){return this._glTextures.has(a)||this._glTextures.set(a,new p.default(this._context)),this._glTextures.get(a)}},{key:"removeTexture",value:function(a){if(this._glTextures.has(a)){var b=this._glTextures.get(a);this._glTexture===b&&(this._glTexture.unbind(),this._glTexture=null),b.destroy(),this._glTextures.delete(a)}return this}},{key:"bindTexture",value:function(a,b){return void 0!==b&&(this.textureUnit=b),this.glTexture=this.getGLTexture(a),this}},{key:"setScaleMode",value:function(a,b){return this.bindTexture(a).getGLTexture(a).setScaleMode(b)}},{key:"setWrapMode",value:function(a,b){return this.bindTexture(a).getGLTexture(a).setWrapMode(b)}},{key:"setPremultiplyAlpha",value:function(a,b){return this.bindTexture(a).getGLTexture(a).setPremultiplyAlpha(b)}},{key:"setTextureImage",value:function(a,b){return this.bindTexture(a).getGLTexture(a).setTextureImage(b)}},{key:"createVertexBuffer",value:function(a,b){return new ArrayBuffer(a*b*4)}},{key:"createIndexBuffer",value:function(a){for(var b=new Uint16Array(6*a),c=b.length,d=0,e=0;d<c;d+=6,e+=4)b[d]=e,b[d+1]=e+1,b[d+2]=e+3,b[d+3]=e,b[d+4]=e+2,b[d+5]=e+3;return b}},{key:"bindVertexBuffer",value:function(a,b){var c=this._context;return c.bindBuffer(c.ARRAY_BUFFER,a),c.bufferData(c.ARRAY_BUFFER,b,c.DYNAMIC_DRAW),this}},{key:"bindIndexBuffer",value:function(a,b){var c=this._context;return c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),c.bufferData(c.ELEMENT_ARRAY_BUFFER,b,c.STATIC_DRAW),this}},{key:"setVertexSubData",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._context;c.bufferSubData(c.ARRAY_BUFFER,b,a)}},{key:"deleteBuffer",value:function(a){this._context.deleteBuffer(a)}},{key:"drawElements",value:function(a){var b=this._context;b.drawElements(b.TRIANGLES,a,b.UNSIGNED_SHORT,0)}},{key:"compileShader",value:function(a,b){var c=this._context,d=c.createShader(a);return c.shaderSource(d,b),c.compileShader(d),c.getShaderParameter(d,c.COMPILE_STATUS)?d:(console.log(c.getShaderInfoLog(d)),null)}},{key:"compileProgram",value:function(a,b){var c=this._context,d=this.compileShader(c.VERTEX_SHADER,a),e=this.compileShader(c.FRAGMENT_SHADER,b),f=c.createProgram();return c.attachShader(f,d),c.attachShader(f,e),c.linkProgram(f),c.deleteShader(d),c.deleteShader(e),c.getProgramParameter(f,c.LINK_STATUS)?f:(c.deleteProgram(f),console.error("gl.VALIDATE_STATUS",c.getProgramParameter(f,c.VALIDATE_STATUS)),console.error("gl.getError()",c.getError()),c.getProgramInfoLog(f)&&console.warn("gl.getProgramInfoLog()",c.getProgramInfoLog(f)),null)}},{key:"deleteProgram",value:function(a){return this._context.deleteProgram(a),this}},{key:"useProgram",value:function(a){return this._context.useProgram(a),this}},{key:"setUniformValue",value:function(a,b,c,d){var e=this._context;switch(c){case n.UNIFORM_TYPE.INT:return e.uniform1i(a,b),this;case n.UNIFORM_TYPE.FLOAT:return e.uniform1f(a,b),this;case n.UNIFORM_TYPE.FLOAT_VEC2:return e.uniform2fv(a,b),this;case n.UNIFORM_TYPE.FLOAT_VEC3:return e.uniform3fv(a,b),this;case n.UNIFORM_TYPE.FLOAT_VEC4:return e.uniform4fv(a,b),this;case n.UNIFORM_TYPE.INT_VEC2:return e.uniform2iv(a,b),this;case n.UNIFORM_TYPE.INT_VEC3:return e.uniform3iv(a,b),this;case n.UNIFORM_TYPE.INT_VEC4:return e.uniform4iv(a,b),this;case n.UNIFORM_TYPE.BOOL:return e.uniform1i(a,b),this;case n.UNIFORM_TYPE.BOOL_VEC2:return e.uniform2iv(a,b),this;case n.UNIFORM_TYPE.BOOL_VEC3:return e.uniform3iv(a,b),this;case n.UNIFORM_TYPE.BOOL_VEC4:return e.uniform4iv(a,b),this;case n.UNIFORM_TYPE.FLOAT_MAT2:return e.uniformMatrix2fv(a,!1,b),this;case n.UNIFORM_TYPE.FLOAT_MAT3:return e.uniformMatrix3fv(a,!1,b),this;case n.UNIFORM_TYPE.FLOAT_MAT4:return e.uniformMatrix4fv(a,!1,b),this;case n.UNIFORM_TYPE.SAMPLER_2D:return b.bind(this,d).update(),e.uniform1i(a,d),this;default:throw new Error("Unknown uniform type "+this._type)}return this}},{key:"getUniformLocation",value:function(a,b){return this._context.getUniformLocation(a,b)}},{key:"getAttributeLocation",value:function(a,b){return this._context.getAttribLocation(a,b)}},{key:"setVertexPointer",value:function(a,b,c,d,e,f){this._context.vertexAttribPointer(a,b,c,d,e,f)}},{key:"toggleVertexArray",value:function(a,b){b?this._context.enableVertexAttribArray(a):this._context.disableVertexAttribArray(a)}},{key:"destroy",value:function(){this._clearColor.destroy(),this._clearColor=null,this._viewport.destroy(),this._viewport=null,this._projection.destroy(),this._projection=null,this._context=null,this._glFramebuffer=null,this._glFramebuffers=null,this._textureUnit=null,this._glTexture=null,this._glTextures=null,this._blendMode=null,this._shader=null,this._renderer=null}},{key:"blendMode",get:function(){return this._blendMode},set:function(a){a&&a!==this._blendMode&&(this._context.blendFunc(a.src,a.dst),this._blendMode=a)}},{key:"shader",get:function(){return this._shader},set:function(a){a&&a!==this._shader&&(this._shader&&this._shader.unbind(),this._shader=a,this._shader.bind(this))}},{key:"renderer",get:function(){return this._renderer},set:function(a){a&&a!==this._renderer&&(this._renderer&&this._renderer.unbind(),this._renderer=a,this._renderer.bind(this),this._renderer.setProjection(this._projection))}},{key:"glFramebuffer",get:function(){return this._glFramebuffer},set:function(a){var b=this._context,c=a||null;c!==this._glFramebuffer&&(b.bindFramebuffer(b.FRAMEBUFFER,c),this._glFramebuffer=c)}},{key:"glTexture",get:function(){return this._glTexture},set:function(a){a&&a!==this._glTexture&&(this._glTexture=a.bind())}},{key:"textureUnit",get:function(){return this._textureUnit},set:function(a){var b=0|a;if(b!==this._textureUnit){var c=this._context;c.activeTexture(c.TEXTURE0+b),this._textureUnit=b}}},{key:"clearColor",get:function(){return this._clearColor},set:function(a){a&&!this._clearColor.equals(a,!0)&&(this._context.clearColor(a.r/255,a.g/255,a.b/255,a.a),this._clearColor.copy(a))}},{key:"viewport",get:function(){return this._viewport},set:function(a){a&&!a.equals(this._viewport)&&(this._context.viewport(a.x,a.y,a.width,a.height),this._viewport.copy(a))}},{key:"projection",get:function(){return this._projection},set:function(a){this._projection.copy(a),this._renderer&&this._renderer.setProjection(a)}}]),a}();b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(29),k=d(j),l=c(52),m=d(l),n=c(3),o=d(n),p=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._shader=new m.default,a._attributeCount=16,a._batchSize=0,a._batchLimit=o.default.BATCH_LIMIT_SPRITES,a._vertexData=null,a._indexData=null,a._floatView=null,a._uintView=null,a._currentTexture=null,a}return g(b,a),h(b,[{key:"bind",value:function(a){return this._renderState||(this._renderState=a,this._indexBuffer=a.createBuffer(),this._vertexBuffer=a.createBuffer(),this._indexData=a.createIndexBuffer(this._batchLimit),this._vertexData=a.createVertexBuffer(this._batchLimit,this._attributeCount),this._uintView=new Uint32Array(this._vertexData),this._floatView=new Float32Array(this._vertexData)),this.bound||(a.bindVertexBuffer(this._vertexBuffer,this._vertexData).bindIndexBuffer(this._indexBuffer,this._indexData),a.shader=this._shader,this.bound=!0),this}},{key:"unbind",value:function(){return this.bound&&(this.flush(),this._shader.unbind(),this.bound=!1),this}},{key:"setProjection",value:function(a){this._shader.setProjection(a)}},{key:"render",value:function(a){var b=this._batchSize>=this._batchLimit,c=this._currentTexture!==a.texture,d=c||b,e=d?0:this._batchSize*this._attributeCount,f=this._floatView,g=this._uintView,h=a.getPositionData(),i=a.getTexCoordData();return d&&(this.flush(),c&&(this._currentTexture=a.texture,this._shader.setSpriteTexture(this._currentTexture))),this._currentTexture.update(),f[e]=h[0],f[e+1]=h[1],f[e+4]=h[2],f[e+5]=h[3],f[e+8]=h[4],f[e+9]=h[5],f[e+12]=h[6],f[e+13]=h[7],g[e+2]=i[0],g[e+6]=i[1],g[e+10]=i[2],g[e+14]=i[3],g[e+3]=g[e+7]=g[e+11]=g[e+15]=a.tint.getRGBA(),this._batchSize++,this}},{key:"flush",value:function(){return this._batchSize&&(this._renderState.setVertexSubData(this._floatView.subarray(0,this._batchSize*this._attributeCount)),this._renderState.drawElements(6*this._batchSize),this._batchSize=0),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._shader.destroy(),this._shader=null,this._indexData=null,this._vertexData=null,this._floatView=null,this._uintView=null,this._batchSize=null,this._batchLimit=null,this._attributeCount=null,this._currentTexture=null}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(30),j=d(i),k=c(0),l=(c(55),function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setVertexSource("precision lowp float;\r\n\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec4 aColor;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nvoid main(void) {\r\n    vTextureCoord = aTextureCoord;\r\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\r\n\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n}\r\n"),a.setFragmentSource("precision lowp float;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\r\n}\r\n"),a.setAttributes([{name:"aVertexPosition",type:k.ATTRIBUTE_TYPE.FLOAT,size:2,normalized:!1},{name:"aTextureCoord",type:k.ATTRIBUTE_TYPE.UNSIGNED_SHORT,size:2,normalized:!0},{name:"aColor",type:k.ATTRIBUTE_TYPE.UNSIGNED_BYTE,size:4,normalized:!0}]),a.setUniforms([{name:"projectionMatrix",type:k.UNIFORM_TYPE.FLOAT_MAT3},{name:"uSampler",type:k.UNIFORM_TYPE.SAMPLER_2D,unit:0}]),a}return g(b,a),h(b,[{key:"setProjection",value:function(a){this.getUniform("projectionMatrix").setMatrix(a)}},{key:"setSpriteTexture",value:function(a){this.getUniform("uSampler").setTexture(a,0)}}]),b}(j.default));b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.name,e=b.type,f=b.size,g=void 0===f?1:f,h=b.normalized,i=void 0!==h&&h,j=b.enabled,k=void 0===j||j;d(this,a),this._name=c,this._type=e,this._size=g,this._normalized=i,this._enabled=k,this._renderState=null,this._location=null,this._bound=!1}return e(a,[{key:"setEnabled",value:function(a){this._enabled!==a&&(this._enabled=a,this._bound&&this.upload())}},{key:"bind",value:function(a,b,c,d){if(!this._renderState&&(this._renderState=a,this._location=a.getAttributeLocation(b,this._name),-1===this._location))throw new Error('Attribute location for attribute "'+this._name+'" is not available.');this._bound||(this._bound=!0,this._renderState.setVertexPointer(this._location,this._size,this._type,this._normalized,c,d),this.upload())}},{key:"unbind",value:function(){this._bound&&(this._bound=!1)}},{key:"upload",value:function(){this._renderState.toggleVertexArray(this._location,this._enabled)}},{key:"destroy",value:function(){this._bound&&this.unbind(),this._renderState=null,this._name=null,this._enabled=null,this._location=null,this._bound=null}},{key:"name",get:function(){return this._name}},{key:"size",get:function(){return this._size}},{key:"type",get:function(){return this._type}},{key:"normalized",get:function(){return this._normalized}},{key:"enabled",get:function(){return this._enabled},set:function(a){this.setEnabled(a)}},{key:"byteSize",get:function(){return this.bytesType*this._size}},{key:"bytesType",get:function(){switch(this._type){case f.ATTRIBUTE_TYPE.BYTE:case f.ATTRIBUTE_TYPE.UNSIGNED_BYTE:return 1;case f.ATTRIBUTE_TYPE.SHORT:case f.ATTRIBUTE_TYPE.UNSIGNED_SHORT:return 2;case f.ATTRIBUTE_TYPE.INT:case f.ATTRIBUTE_TYPE.UNSIGNED_INT:case f.ATTRIBUTE_TYPE.FLOAT:return 4}return 0}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=(c(0),c(8)),h=d(g),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.name,d=b.type,f=b.unit,g=void 0===f?-1:f,h=b.transpose,i=void 0!==h&&h;e(this,a),this._name=c,this._type=d,this._value=null,this._unit=g,this._transpose=i,this._renderState=null,this._location=null,this._bound=!1,this._dirty=!1}return f(a,[{key:"setValue",value:function(a){this._value=a,this._dirty=!0,this.upload()}},{key:"setMatrix",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._transpose;this._transpose=b,this.setValue(a instanceof h.default?a.toArray(b):a)}},{key:"setTexture",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._unit;this._unit=b,this.setValue(a)}},{key:"bind",value:function(a,b){this._renderState||(this._renderState=a,this._location=a.getUniformLocation(b,this._name)),this._bound||(this._bound=!0,this.upload())}},{key:"unbind",value:function(){this._bound&&(this._bound=!1)}},{key:"upload",value:function(){this._bound&&this._dirty&&(this._renderState.setUniformValue(this._location,this._value,this._type,this._unit),this._dirty=!1)}},{key:"destroy",value:function(){this._bound&&this.unbind(),this._name=null,this._type=null,this._value=null,this._renderState=null,this._location=null,this._bound=null,this._unit=null,this._transpose=null,this._dirty=null}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"value",get:function(){return this._value},set:function(a){this.setValue(a)}}]),a}();b.default=i},function(a,b,c){(function(a){function c(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};b.resolve=function(){for(var b="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(b=g+"/"+b,e="/"===g.charAt(0))}return b=c(d(b.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+b||"."},b.normalize=function(a){var e=b.isAbsolute(a),f="/"===g(a,-1);return a=c(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},b.isAbsolute=function(a){return"/"===a.charAt(0)},b.join=function(){var a=Array.prototype.slice.call(arguments,0);return b.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},b.relative=function(a,c){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=b.resolve(a).substr(1),c=b.resolve(c).substr(1);for(var e=d(a.split("/")),f=d(c.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},b.sep="/",b.delimiter=":",b.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},b.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},b.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(b,c(76))},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(29),k=d(j),l=c(57),m=d(l),n=c(1),o=c(3),p=d(o),q=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._shader=new m.default,a._attributeCount=40,a._batchSize=0,a._batchLimit=p.default.BATCH_LIMIT_PARTICLES,a._vertexData=null,a._indexData=null,a._floatView=null,a._uintView=null,a._currentTexture=null,a}return g(b,a),h(b,[{key:"bind",value:function(a){return this._renderState||(this._renderState=a,this._indexBuffer=a.createBuffer(),this._vertexBuffer=a.createBuffer(),this._indexData=a.createIndexBuffer(this._batchLimit),this._vertexData=a.createVertexBuffer(this._batchLimit,this._attributeCount),this._uintView=new Uint32Array(this._vertexData),this._floatView=new Float32Array(this._vertexData)),this.bound||(a.bindVertexBuffer(this._vertexBuffer,this._vertexData).bindIndexBuffer(this._indexBuffer,this._indexData),a.shader=this._shader,this.bound=!0),this}},{key:"unbind",value:function(){return this.bound&&(this.flush(),this._shader.unbind(),this.bound=!1),this}},{key:"setProjection",value:function(a){this._shader.setProjection(a)}},{key:"render",value:function(a){var b=this._batchSize>=this._batchLimit,c=this._currentTexture!==a.texture,d=c||b,e=this._floatView,f=this._uintView,g=a.particles,h=a.textureFrame,i=a.textureCoords;d&&(this.flush(),c&&(this._currentTexture=a.texture,this._shader.setParticleTexture(this._currentTexture))),this._currentTexture.update();var j=!0,k=!1,l=void 0;try{for(var m,o=g[Symbol.iterator]();!(j=(m=o.next()).done);j=!0){var p=m.value;this._batchSize>=this._batchLimit&&this.flush();var q=this._batchSize*this._attributeCount,r=p.position,s=p.scale,t=p.rotation,u=p.color;e[q]=e[q+11]=h.x,e[q+1]=e[q+20]=h.y,e[q+10]=e[q+30]=h.width,e[q+21]=e[q+31]=h.height,e[q+2]=e[q+22]=i.x,e[q+3]=e[q+13]=i.y,e[q+12]=e[q+32]=i.width,e[q+23]=e[q+33]=i.height,e[q+4]=e[q+14]=e[q+24]=e[q+34]=r.x,e[q+5]=e[q+15]=e[q+25]=e[q+35]=r.y,e[q+6]=e[q+16]=e[q+26]=e[q+36]=s.x,e[q+7]=e[q+17]=e[q+27]=e[q+37]=s.y,e[q+8]=e[q+18]=e[q+28]=e[q+38]=(0,n.degreesToRadians)(t),f[q+9]=f[q+19]=f[q+29]=f[q+39]=u.getRGBA(),this._batchSize++}}catch(a){k=!0,l=a}finally{try{!j&&o.return&&o.return()}finally{if(k)throw l}}return this}},{key:"flush",value:function(){return this._batchSize&&(this._renderState.setVertexSubData(this._floatView.subarray(0,this._batchSize*this._attributeCount)),this._renderState.drawElements(6*this._batchSize),this._batchSize=0),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._shader.destroy(),this._shader=null,this._indexData=null,this._vertexData=null,this._floatView=null,this._uintView=null,this._batchSize=null,this._batchLimit=null,this._attributeCount=null,this._currentTexture=null}}]),b}(k.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(30),j=d(i),k=c(0),l=(c(55),function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setVertexSource("precision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aPosition;\nattribute vec2 aScale;\nattribute float aRotation;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n    vTextureCoord = aTextureCoord;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n\n    vec2 pos = vec2(\n        (aVertexPosition.x * cos(aRotation)) - (aVertexPosition.y * sin(aRotation)),\n        (aVertexPosition.x * sin(aRotation)) + (aVertexPosition.y * cos(aRotation))\n    );\n\n    gl_Position = vec4((projectionMatrix * vec3((pos * aScale) + aPosition, 1.0)).xy, 0.0, 1.0);\n}\n"),a.setFragmentSource("precision lowp float;\n\nuniform sampler2D uSampler;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\n}\n"),a.setAttributes([{name:"aVertexPosition",type:k.ATTRIBUTE_TYPE.FLOAT,size:2,normalized:!1},{name:"aTextureCoord",type:k.ATTRIBUTE_TYPE.FLOAT,size:2,normalized:!1},{name:"aPosition",type:k.ATTRIBUTE_TYPE.FLOAT,size:2,normalized:!1},{name:"aScale",type:k.ATTRIBUTE_TYPE.FLOAT,size:2,normalized:!1},{name:"aRotation",type:k.ATTRIBUTE_TYPE.FLOAT,size:1,normalized:!1},{name:"aColor",type:k.ATTRIBUTE_TYPE.UNSIGNED_BYTE,size:4,normalized:!0}]),a.setUniforms([{name:"projectionMatrix",type:k.UNIFORM_TYPE.FLOAT_MAT3},{name:"uSampler",type:k.UNIFORM_TYPE.SAMPLER_2D,unit:0}]),a}return g(b,a),h(b,[{key:"setProjection",value:function(a){this.getUniform("projectionMatrix").setMatrix(a)}},{key:"setParticleTexture",value:function(a){this.getUniform("uSampler").setTexture(a,0)}}]),b}(j.default));b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(27),h=d(g),i=c(4),j=d(i),k=c(8),l=d(k),m=c(1),n=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new j.default(0,0,100,100);e(this,a),this._center=new h.default(this._setDirty,this),this._size=new h.default(this._setDirty,this),this._rotation=0,this._sin=0,this._cos=1,this._viewport=new j.default(0,0,1,1),this._transform=new l.default,this._dirtyTransform=!0,this.reset(b)}return f(a,[{key:"setCenter",value:function(a,b){return this._center.set(a,b),this}},{key:"setSize",value:function(a,b){return this._size.set(a,b),this}},{key:"setRotation",value:function(a){var b=a%360,c=b<0?b+360:b,d=(0,m.degreesToRadians)(c);return this._rotation=c<0?c+360:c,this._cos=Math.cos(d),this._sin=Math.sin(d),this._setDirty(),this}},{key:"setViewport",value:function(a){return this._viewport.copy(a),this}},{key:"move",value:function(a,b){return this.setCenter(this._center.x+a,this._center.y+b)}},{key:"zoom",value:function(a){return this.setSize(this._size.x*a,this._size.y*a)}},{key:"rotate",value:function(a){return this.setRotation(this._rotation+a)}},{key:"reset",value:function(a){return this._center.set(a.x+a.width/2|0,a.y+a.height/2|0),this._size.set(a.width,a.height),this._rotation=0,this._cos=1,this._sin=0,this._setDirty(),this}},{key:"getTransform",value:function(){return this._dirtyTransform&&(this.updateTransform(),this._dirtyTransform=!1),this._transform}},{key:"updateTransform",value:function(){var a=this._transform,b=this._center,c=this._size,d=2/c.x,e=-2/c.y,f=b.x*-d,g=b.y*-e,h=b.x*-this._cos-b.y*this._sin+b.x,i=b.x*this._sin-b.y*this._cos+b.y;return a.a=d*this._cos,a.b=d*this._sin,a.c=e*-this._sin,a.d=e*this._cos,a.x=d*h+f,a.y=e*i+g,this}},{key:"copy",value:function(a){return this.center=a.center,this.size=a.size,this.viewport=a.viewport,this.transform=a.transform,this.rotation=a.rotation,this}},{key:"destroy",value:function(){this._center.destroy(),this._center=null,this._size.destroy(),this._size=null,this._viewport.destroy(),this._viewport=null,this._transform.destroy(),this._transform=null,this._rotation=null,this._cos=null,this._sin=null,this._dirtyTransform=null}},{key:"_setDirty",value:function(){this._dirtyTransform=!0}},{key:"center",get:function(){return this._center},set:function(a){this._center.copy(a)}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"rotation",get:function(){return this._rotation},set:function(a){this.setRotation(a)}},{key:"viewport",get:function(){return this._viewport},set:function(a){this._viewport.copy(a),this._dirtyTransform=!0}},{key:"transform",get:function(){return this.getTransform()},set:function(a){this._transform.copy(a)}},{key:"width",get:function(){return this._size.x}},{key:"height",get:function(){return this._size.y}},{key:"left",get:function(){return this._center.x-this._size.x/2}},{key:"top",get:function(){return this._center.y-this._size.y/2}},{key:"right",get:function(){return this._center.x+this._size.x/2}},{key:"bottom",get:function(){return this._center.y+this._size.y/2}}]),a}();b.default=n},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=c.masterVolume,f=void 0===e?1:e,g=c.musicVolume,h=void 0===g?1:g,i=c.soundVolume,j=void 0===i?1:i,k=c.videoVolume,l=void 0===k?1:k;d(this,a),this._app=b,this._context=new AudioContext,this._destination=this._context.destination,this._compressor=this._context.createDynamicsCompressor(),this._compressor.connect(this._destination),this._masterGain=this._context.createGain(),this._masterGain.connect(this._compressor),this._musicGain=this._context.createGain(),this._musicGain.connect(this._masterGain),this._soundGain=this._context.createGain(),this._soundGain.connect(this._masterGain),this._videoGain=this._context.createGain(),this._videoGain.connect(this._masterGain),this._masterVolume=null,this._soundVolume=null,this._musicVolume=null,this._videoVolume=null,this.setMasterVolume(f),this.setSoundVolume(j),this.setMusicVolume(h),this.setVideoVolume(l),b.on("media:play",this.play,this).on("media:volume:master",this.setMasterVolume,this).on("media:volume:sound",this.setSoundVolume,this).on("media:volume:music",this.setMusicVolume,this).on("media:volume:video",this.setVideoVolume,this)}return e(a,[{key:"play",value:function(a,b){a.connect(this),a.play(b)}},{key:"setMasterVolume",value:function(a){var b=(0,f.clamp)(a,0,1);this._masterVolume!==b&&(this._masterGain.gain.value=this._masterVolume=b)}},{key:"setSoundVolume",value:function(a){var b=(0,f.clamp)(a,0,1);this._soundVolume!==b&&(this._soundGain.gain.value=this._soundVolume=a)}},{key:"setMusicVolume",value:function(a){var b=(0,f.clamp)(a,0,1);this._musicVolume!==b&&(this._musicGain.gain.value=this._musicVolume=b)}},{key:"setVideoVolume",value:function(a){var b=(0,f.clamp)(a,0,1);this._videoVolume!==b&&(this._videoGain.gain.value=this._videoVolume=b)}},{key:"destroy",value:function(){this._app.off("media:play",this.play,this).off("media:volume:master",this.setMasterVolume,this).off("media:volume:sound",this.setSoundVolume,this).off("media:volume:music",this.setMusicVolume,this),this._soundGain.disconnect(),this._soundGain=null,this._musicGain.disconnect(),this._musicGain=null,this._videoGain.disconnect(),
this._videoGain=null,this._masterGain.disconnect(),this._masterGain=null,this._compressor.disconnect(),this._compressor=null,this._context.close(),this._context=null,this._masterVolume=null,this._soundVolume=null,this._musicVolume=null,this._videoVolume=null,this._destination=null,this._app=null}},{key:"audioContext",get:function(){return this._context}},{key:"masterGain",get:function(){return this._masterGain}},{key:"soundGain",get:function(){return this._soundGain}},{key:"musicGain",get:function(){return this._musicGain}},{key:"videoGain",get:function(){return this._videoGain}},{key:"analyserTarget",get:function(){return this._compressor}},{key:"masterVolume",get:function(){return this._masterVolume},set:function(a){this.setMasterVolume(a)}},{key:"soundVolume",get:function(){return this._soundVolume},set:function(a){this.setSoundVolume(a)}},{key:"musicVolume",get:function(){return this._musicVolume},set:function(a){this.setMusicVolume(a)}},{key:"videoVolume",get:function(){return this._videoVolume},set:function(a){this.setVideoVolume(a)}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(7),k=d(j),l=c(61),m=d(l),n=c(62),o=d(n),p=c(63),q=d(p),r=c(65),s=d(r),t=c(0),u=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new ArrayBuffer(4*t.RANGE_GLOBAL),0,t.RANGE_GLOBAL));return c._app=a,c._inputs=new Set,c._keyboard=new m.default(a,c.channelBuffer),c._mouse=new o.default(a,c.channelBuffer),c._gamepadManager=new q.default(a,c.channelBuffer),c._pointerManager=new s.default(a,c.channelBuffer),a.on("input:add",c.add,c).on("input:remove",c.remove,c).on("input:clear",c.clear,c),c}return g(b,a),h(b,[{key:"add",value:function(a){if(Array.isArray(a)){var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}else this._inputs.add(a)}},{key:"remove",value:function(a){if(Array.isArray(a)){var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this.remove(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}else this._inputs.delete(a)}},{key:"clear",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var a=!0,b=!1,c=void 0;try{for(var d,e=this._inputs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0)d.value.destroy()}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}else this._inputs.clear()}},{key:"update",value:function(){this._gamepadManager.update();var a=!0,b=!1,c=void 0;try{for(var d,e=this._inputs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.update(this.channels)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._keyboard.update(),this._mouse.update()}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._app.off("input:add",this.add,this).off("input:remove",this.remove,this).off("input:clear",this.clear,this),this._inputs.clear(),this._inputs=null,this._keyboard.destroy(),this._keyboard=null,this._mouse.destroy(),this._mouse=null,this._gamepadManager.destroy(),this._gamepadManager=null,this._pointerManager.destroy(),this._pointerManager=null,this._app=null}}]),b}(k.default);b.default=u},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(7),k=d(j),l=c(0),m={NONE:0,KEY_DOWN:1,KEY_UP:2},n=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,l.OFFSET_KEYBOARD,l.RANGE_DEVICE));return d._app=a,d._channelsPressed=new Set,d._channelsReleased=new Set,d._flags=m.NONE,d._addEventListeners(),d}return g(b,a),h(b,[{key:"update",value:function(){this._flags&&(this._flags&m.KEY_DOWN&&(this.trigger("keyboard:down",this._channelsPressed,this),this._channelsPressed.clear()),this._flags&m.KEY_UP&&(this.trigger("keyboard:up",this._channelsReleased,this),this._channelsReleased.clear()),this._flags=0)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._removeEventListeners(),this._channelsPressed.clear(),this._channelsPressed=null,this._channelsReleased.clear(),this._channelsReleased=null,this._flags=null,this._app=null}},{key:"_addEventListeners",value:function(){this._onKeyDownHandler=this._onKeyDown.bind(this),this._onKeyUpHandler=this._onKeyUp.bind(this),window.addEventListener("keydown",this._onKeyDownHandler,!0),window.addEventListener("keyup",this._onKeyUpHandler,!0)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("keydown",this._onKeyDownHandler,!0),window.removeEventListener("keyup",this._onKeyUpHandler,!0),this._onKeyDownHandler=null,this._onKeyUpHandler=null}},{key:"_onKeyDown",value:function(a){this.channels[a.keyCode]=1,this._channelsPressed.add(b.getChannelCode(a.keyCode)),this._flags|=m.KEY_DOWN}},{key:"_onKeyUp",value:function(a){this.channels[a.keyCode]=0,this._channelsReleased.add(b.getChannelCode(a.keyCode)),this._flags|=m.KEY_UP}}],[{key:"getChannelCode",value:function(a){return l.OFFSET_KEYBOARD+a%l.RANGE_DEVICE}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(7),k=d(j),l=c(2),m=d(l),n=c(0),o=c(5),p=d(o),q={NONE:0,POSITION:1,SCROLL:2,WINDOW_STATE:4,BUTTON_DOWN:8,BUTTON_UP:16},r=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,n.OFFSET_MOUSE,n.RANGE_DEVICE));return d._app=a,d._canvas=a.canvas,d._position=new m.default,d._positionDelta=new m.default,d._scrollDelta=new m.default,d._insideWindow=!1,d._channelsPressed=new Set,d._channelsReleased=new Set,d._flags=q.NONE,d._addEventListeners(),d}return g(b,a),h(b,[{key:"update",value:function(){this._flags&&(this._flags&q.WINDOW_STATE&&this._app.trigger(this._insideWindow?"mouse:enter":"mouse:leave",this),this._flags&q.SCROLL&&(this._app.trigger("mouse:scroll",this._scrollDelta,this),this._scrollDelta.set(0,0)),this._flags&q.POSITION&&(this._app.trigger("mouse:move",this._position,this),this._positionDelta.set(0,0)),this._flags&q.BUTTON_DOWN&&(this._app.trigger("mouse:down",this._channelsPressed,this),this._channelsPressed.clear()),this._flags&q.BUTTON_UP&&(this._app.trigger("mouse:up",this._channelsReleased,this),this._channelsReleased.clear()),this._flags=q.NONE,this.channels.fill(0,5,17))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._removeEventListeners(),this._position.destroy(),this._position=null,this._positionDelta.destroy(),this._positionDelta=null,this._scrollDelta.destroy(),this._scrollDelta=null,this._channelsPressed.clear(),this._channelsPressed=null,this._channelsReleased.clear(),this._channelsReleased=null,this._flags=null,this._insideWindow=null,this._canvas=null,this._app=null}},{key:"_addEventListeners",value:function(){var a=this._canvas,b=!p.default.passiveEvents||{capture:!0,passive:!0};this._onMouseDownHandler=this._onMouseDown.bind(this),this._onMouseUpHandler=this._onMouseUp.bind(this),this._onMouseMoveHandler=this._onMouseMove.bind(this),this._onMouseOverHandler=this._onMouseOver.bind(this),this._onMouseOutHandler=this._onMouseOut.bind(this),this._onMouseWheelHandler=this._onMouseWheel.bind(this),this._killEventHandler=this._killEvent.bind(this),a.addEventListener("mousedown",this._onMouseDownHandler,!0),a.addEventListener("mouseup",this._onMouseUpHandler,!0),a.addEventListener("mousemove",this._onMouseMoveHandler,!0),a.addEventListener("mouseover",this._onMouseOverHandler,!0),a.addEventListener("mouseout",this._onMouseOutHandler,!0),a.addEventListener("wheel",this._onMouseWheelHandler,b),a.addEventListener("contextmenu",this._killEventHandler,!0),a.addEventListener("selectstart",this._killEventHandler,!0)}},{key:"_removeEventListeners",value:function(){var a=this._canvas,b=!p.default.passiveEvents||{capture:!0,passive:!0};a.removeEventListener("mousedown",this._onMouseDownHandler,!0),a.removeEventListener("mouseup",this._onMouseUpHandler,!0),a.removeEventListener("mousemove",this._onMouseMoveHandler,!0),a.removeEventListener("mouseover",this._onMouseOverHandler,!0),a.removeEventListener("mouseout",this._onMouseOutHandler,!0),a.removeEventListener("wheel",this._onMouseWheelHandler,b),a.removeEventListener("contextmenu",this._killEventHandler,!0),a.removeEventListener("selectstart",this._killEventHandler,!0),this._onMouseDownHandler=null,this._onMouseUpHandler=null,this._onMouseMoveHandler=null,this._onMouseOverHandler=null,this._onMouseOutHandler=null,this._onMouseWheelHandler=null,this._killEventHandler=null}},{key:"_killEvent",value:function(a){a.preventDefault(),a.stopImmediatePropagation()}},{key:"_onMouseDown",value:function(a){var c=Math.min(a.button,4);this.channels[c]=1,this._channelsPressed.add(b.getChannelCode(c)),this._flags|=q.BUTTON_DOWN,a.preventDefault()}},{key:"_onMouseUp",value:function(a){var c=Math.min(a.button,4);this.channels[c]=0,this._channelsReleased.add(b.getChannelCode(c)),this._flags|=q.BUTTON_UP,a.preventDefault()}},{key:"_onMouseMove",value:function(a){var b=this.channels,c=this._canvas.getBoundingClientRect(),d=a.clientX-c.left,e=a.clientY-c.top,f=d-this.x,g=e-this.y;b[5]=1,b[6]=Math.abs(Math.min(0,f)),b[7]=Math.max(0,f),b[8]=Math.abs(Math.min(0,g)),b[9]=Math.max(0,g),this._positionDelta.set(f,g),this._position.set(d,e),this._flags|=q.POSITION,a.preventDefault()}},{key:"_onMouseWheel",value:function(a){var b=this.channels;b[10]=1,b[11]=Math.abs(Math.min(0,a.deltaX)),b[12]=Math.max(0,a.deltaX),b[13]=Math.abs(Math.min(0,a.deltaY)),b[14]=Math.max(0,a.deltaY),this._scrollDelta.set(a.deltaX,a.deltaY),this._flags|=q.SCROLL}},{key:"_onMouseOver",value:function(){var a=this.channels;a[15]=1,a[16]=0,this._insideWindow=!0,this._flags|=q.WINDOW_STATE}},{key:"_onMouseOut",value:function(){var a=this.channels;a[15]=0,a[16]=1,this._insideWindow=!1,this._flags|=q.WINDOW_STATE}},{key:"position",get:function(){return this._position}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"positionDelta",get:function(){return this._positionDelta}},{key:"deltaX",get:function(){return this._positionDelta.x}},{key:"deltaY",get:function(){return this._positionDelta.y}},{key:"scrollDelta",get:function(){return this._scrollDelta}},{key:"scrollX",get:function(){return this._scrollDelta.x}},{key:"scrollY",get:function(){return this._scrollDelta.y}},{key:"insideWindow",get:function(){return this._insideWindow}}],[{key:"getChannelCode",value:function(a){return n.OFFSET_MOUSE+a%n.RANGE_DEVICE}}]),b}(k.default);b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(64),k=d(j),l=c(7),m=d(l),n=c(0),o=window.navigator,p=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,n.OFFSET_GAMEPAD,n.RANGE_DEVICE));return d._app=a,d._gamepads=new Map,d}return g(b,a),h(b,[{key:"update",value:function(){this.updateGamepads();var a=!0,b=!1,c=void 0;try{for(var d,e=this._gamepads.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.update()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}},{key:"updateGamepads",value:function(){for(var a=this._app,b=this._gamepads,c=o.getGamepads(),d=c.length,e=0;e<d;e++)if(!!c[e]!==b.has(e)){if(c[e]){var f=new k.default(c[e],this.channelBuffer);b.set(e,f),a.trigger("gamepad:add",f,b)}else{var g=b.get(e);b.delete(e),a.trigger("gamepad:remove",g,b),g.destroy()}a.trigger("gamepad:change",b)}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this);var a=!0,c=!1,d=void 0;try{for(var e,f=this._gamepads.values()[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}this._gamepads.clear(),this._gamepads=null,this._app=null}},{key:"gamepads",get:function(){return this._gamepads}}]),b}(m.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(7),k=d(j),l=c(0),m=c(3),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,l.OFFSET_GAMEPAD+a.index*l.RANGE_NODE,l.RANGE_NODE));return d._gamepad=a,d._mapping=n.default.GAMEPAD_MAPPING,d}return g(b,a),h(b,[{key:"update",value:function(){var a=this.channels,b=this._mapping.buttons,c=this._mapping.axes,d=this._gamepad.buttons,e=this._gamepad.axes,f=!0,g=!1,h=void 0;try{for(var i,j=b[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;k.index in d&&(a[k.key]=k.transformValue(d[k.index].value))}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}var l=!0,m=!1,n=void 0;try{for(var o,p=c[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;q.index in e&&(a[q.key]=q.transformValue(e[q.index]))}}catch(a){m=!0,n=a}finally{try{!l&&p.return&&p.return()}finally{if(m)throw n}}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._mapping.destroy(),this._mapping=null,this._gamepad=null}},{key:"gamepad",get:function(){return this._gamepad}},{key:"mapping",get:function(){return this._mapping},set:function(a){this._mapping=a}},{key:"id",get:function(){return this._gamepad.id}},{key:"index",get:function(){return this._gamepad.index}},{key:"connected",get:function(){return this._gamepad.connected}}],[{key:"getChannelCode",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l.OFFSET_GAMEPAD+b*l.RANGE_NODE+a%l.RANGE_NODE}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(7),k=d(j),l=c(0),m=c(5),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,l.OFFSET_POINTER,l.RANGE_DEVICE));return d._app=a,d._canvas=a.canvas,d._pointers=new Map,d._addEventListeners(),d}return g(b,a),h(b,[{key:"update",value:function(){}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._removeEventListeners(),this._pointers.clear(),this._pointers=null,this._canvas=null,this._app=null}},{key:"_addEventListeners",value:function(){var a=this._canvas,b=!n.default.passiveEvents||{capture:!0,passive:!0};this._onPointerDownHandler=this._onPointerDown.bind(this),this._onPointerUpHandler=this._onPointerUp.bind(this),this._onPointerCancelHandler=this._onPointerCancel.bind(this),this._onPointerMoveHandler=this._onPointerMove.bind(this),this._onPointerOverHandler=this._onPointerOver.bind(this),this._onPointerOutHandler=this._onPointerOut.bind(this),this._onWheelHandler=this._onWheel.bind(this),this._stopEventHandler=this._stopEvent.bind(this),a.addEventListener("pointerdown",this._onPointerDownHandler,!0),a.addEventListener("pointerup",this._onPointerUpHandler,!0),a.addEventListener("pointercancel",this._onPointerCancelHandler,!0),a.addEventListener("pointermove",this._onPointerMoveHandler,!0),a.addEventListener("pointerover",this._onPointerOverHandler,!0),a.addEventListener("pointerout",this._onPointerOutHandler,!0),a.addEventListener("wheel",this._onWheelHandler,b),a.addEventListener("contextmenu",this._stopEventHandler,!0),a.addEventListener("selectstart",this._stopEventHandler,!0)}},{key:"_removeEventListeners",value:function(){var a=this._canvas,b=!n.default.passiveEvents||{capture:!0,passive:!0};a.removeEventListener("pointerdown",this._onPointerDownHandler,!0),a.removeEventListener("pointerup",this._onPointerUpHandler,!0),a.removeEventListener("pointercancel",this._onPointerCancelHandler,!0),a.removeEventListener("pointermove",this._onPointerMoveHandler,!0),a.removeEventListener("pointerover",this._onPointerOverHandler,!0),a.removeEventListener("pointerout",this._onPointerOutHandler,!0),a.removeEventListener("wheel",this._onWheelHandler,b),a.removeEventListener("contextmenu",this._stopEventHandler,!0),a.removeEventListener("selectstart",this._stopEventHandler,!0),this._onPointerDownHandler=null,this._onPointerUpHandler=null,this._onPointerCancelHandler=null,this._onPointerMoveHandler=null,this._onPointerOverHandler=null,this._onPointerOutHandler=null,this._stopEventHandler=null}},{key:"_stopEvent",value:function(a){a.preventDefault(),a.stopImmediatePropagation()}},{key:"_onPointerDown",value:function(a){console.log("pointerdown",a)}},{key:"_onPointerUp",value:function(a){console.log("pointerup",a)}},{key:"_onPointerCancel",value:function(a){console.log("pointercancel",a)}},{key:"_onPointerMove",value:function(a){}},{key:"_onPointerOver",value:function(a){console.log("pointerover",a)}},{key:"_onPointerOut",value:function(a){console.log("pointerout",a)}},{key:"_onWheel",value:function(a){console.log("wheel",a)}},{key:"pointers",get:function(){return this._pointers}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(19),k=d(j),l=c(1),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._children=[],a}return g(b,a),h(b,[{key:"addChild",value:function(a){return this.addChildAt(a,this._children.length)}},{key:"addChildAt",value:function(a,b){if(b<0||b>this._children.length)throw new Error("The index "+b+" is out of bounds "+this._children.length);return a===this?this:(a.parent&&a.parent.removeChild(a),a.parent=this,this._children.splice(b,0,a),this)}},{key:"swapChildren",value:function(a,b){return a!==b&&(this._children[this.getChildIndex(a)]=b,this._children[this.getChildIndex(b)]=a),this}},{key:"getChildIndex",value:function(a){var b=this._children.indexOf(a);if(-1===b)throw new Error("Renderable is not a child of the container.");return b}},{key:"setChildIndex",value:function(a,b){if(b<0||b>=this._children.length)throw new Error("The index "+b+" is out of bounds "+this._children.length);return(0,l.removeItems)(this._children,this.getChildIndex(a),1),this._children.splice(b,0,a),this}},{key:"getChildAt",value:function(a){if(a<0||a>=this._children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this._children[a]}},{key:"removeChild",value:function(a){var b=this._children.indexOf(a);return-1!==b&&this.removeChildAt(b),this}},{key:"removeChildAt",value:function(a){return(0,l.removeItems)(this._children,a,1),this}},{key:"removeChildren",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._children.length,c=b-a;if(c<0||c>b)throw new Error("Values are outside the acceptable range.");return(0,l.removeItems)(this._children,a,c),this}},{key:"render",value:function(a){if(this.active){var b=!0,c=!1,d=void 0;try{for(var e,f=this._children[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){e.value.render(a)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}return this}},{key:"updateBounds",value:function(){this._bounds.reset().addRect(this.getLocalBounds(),this.getGlobalTransform());var a=!0,b=!1,c=void 0;try{for(var d,e=this._children[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.active&&this._bounds.addRect(f.getBounds())}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._children.length=0,this._children=null}},{key:"children",get:function(){return this._children}},{key:"width",get:function(){return Math.abs(this.scaleX)*this.bounds.width},set:function(a){this.scaleX=a/this.bounds.width}},{key:"height",get:function(){return Math.abs(this.scaleY)*this.bounds.height},set:function(a){this.scaleY=a/this.bounds.height}},{key:"left",get:function(){return this.x-this.width+this.origin.x}},{key:"top",get:function(){return this.y-this.height+this.origin.y}},{key:"right",get:function(){return this.x+this.width+this.origin.x}},{key:"bottom",get:function(){return this.y+this.height+this.origin.y}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=(d(g),c(9)),i=(d(h),c(10)),j=d(i),k=function(){function a(b){e(this,a),this._totalLifetime=b.totalLifetime.clone(),this._elapsedLifetime=new j.default,this._position=b.position.clone(),this._velocity=b.velocity.clone(),this._scale=b.scale.clone(),this._color=b.color.clone(),this._rotation=b.rotation,this._rotationSpeed=b.rotationSpeed}return f(a,[{key:"update",value:function(a){var b=a.seconds;this._elapsedLifetime.add(a),this._position.add(b*this._velocity.x,b*this._velocity.y),this._rotation+=b*this._rotationSpeed}},{key:"destroy",value:function(){this._totalLifetime.destroy(),this._totalLifetime=null,this._elapsedLifetime.destroy(),this._elapsedLifetime=null,this._position.destroy(),this._position=null,this._velocity.destroy(),this._velocity=null,this._scale.destroy(),this._scale=null,this._color.destroy(),this._color=null,this._rotation=null,this._rotationSpeed=null}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"velocity",get:function(){return this._velocity},set:function(a){this._velocity.copy(a)}},{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a}},{key:"rotationSpeed",get:function(){return this._rotationSpeed},set:function(a){this._rotationSpeed=a}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale.copy(a)}},{key:"color",get:function(){return this._color},set:function(a){this._color.copy(a)}},{key:"elapsedLifetime",get:function(){return this._elapsedLifetime},set:function(a){this._elapsedLifetime.copy(a)}},{key:"totalLifetime",get:function(){return this._totalLifetime},set:function(a){this._totalLifetime.copy(a)}},{key:"remainingLifetime",get:function(){return j.default.Temp.set(this.totalLifetime.milliseconds-this.elapsedLifetime.milliseconds)}},{key:"elapsedRatio",get:function(){return this.elapsedLifetime.milliseconds/this.totalLifetime.milliseconds}},{key:"remainingRatio",get:function(){return this.remainingLifetime.milliseconds/this.totalLifetime.milliseconds}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},h=c(2),i=d(h),j=c(9),k=d(j),l=c(10),m=d(l),n=c(0),o=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.totalLifetime,d=b.position,f=b.scale,g=b.color,h=b.velocity,j=b.rotation,l=b.rotationSpeed;e(this,a),this._totalLifetime=c&&c.clone()||new m.default(1,n.TIME.SECONDS),this._position=d&&d.clone()||new i.default,this._scale=f&&f.clone()||new i.default(1,1),this._color=g&&g.clone()||k.default.White.clone(),this._velocity=h&&h.clone()||new i.default,this._rotation=j||0,this._rotationSpeed=l||0}return f(a,[{key:"destroy",value:function(){
g(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this),this._totalLifetime.destroy(),this._totalLifetime=null,this._position.destroy(),this._position=null,this._velocity.destroy(),this._velocity=null,this._scale.destroy(),this._scale=null,this._color.destroy(),this._color=null,this._rotation=null,this._rotationSpeed=null}},{key:"totalLifetime",get:function(){return this._totalLifetime},set:function(a){this._totalLifetime.copy(a)}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale.copy(a)}},{key:"color",get:function(){return this._color},set:function(a){this._color.copy(a)}},{key:"velocity",get:function(){return this._velocity},set:function(a){this._velocity.copy(a)}},{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a%360}},{key:"rotationSpeed",get:function(){return this._rotationSpeed},set:function(a){this._rotationSpeed=a}}]),a}();b.default=o},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this._i=0,this._j=0,this._keys=[],this.setKeys(b)}return e(a,[{key:"setKeys",value:function(a){var b=this._keys,c=a&&a.length||[1],d=c.length,e=256,f=255;this._i=0,this._j=0,b.length=0;for(var g=0;g<e;g++)b[g]=g;for(var h=0,i=0;h<e;h++){var j=b[h];i=f&i+c[h%d]+j,b[h]=b[i],b[i]=j}this.next(e)}},{key:"next",value:function(a){for(var b=this._keys,c=a,d=0,e=this._i,f=this._j,g=void 0;c--;)e=255&e+1,g=b[e],f=255&f+g,b[e]=b[f],b[f]=g,d=256*d+b[255&b[e]+b[f]];return this._i=e,this._j=f,d}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}Object.defineProperty(b,"__esModule",{value:!0}),b.settings=b.utils=b.support=void 0;var e=c(0);Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}})});var f=c(71);Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}})});var g=c(73);Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return g[a]}})});var h=c(80);Object.keys(h).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return h[a]}})});var i=c(83);Object.keys(i).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return i[a]}})});var j=c(88);Object.keys(j).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return j[a]}})});var k=c(91);Object.keys(k).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return k[a]}})});var l=c(94);Object.keys(l).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return l[a]}})});var m=c(5),n=d(m),o=c(1),p=d(o),q=c(3),r=d(q);b.support=n,b.utils=p,b.settings=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(72);Object.defineProperty(b,"Database",{enumerable:!0,get:function(){return d(e).default}});var f=c(32);Object.defineProperty(b,"ResourceLoader",{enumerable:!0,get:function(){return d(f).default}});var g=c(33);Object.defineProperty(b,"ResourceContainer",{enumerable:!0,get:function(){return d(g).default}});var h=c(13);Object.defineProperty(b,"ResourceFactory",{enumerable:!0,get:function(){return d(h).default}});var i=c(11);Object.defineProperty(b,"ArrayBufferFactory",{enumerable:!0,get:function(){return d(i).default}});var j=c(21);Object.defineProperty(b,"AudioBufferFactory",{enumerable:!0,get:function(){return d(j).default}});var k=c(22);Object.defineProperty(b,"AudioFactory",{enumerable:!0,get:function(){return d(k).default}});var l=c(12);Object.defineProperty(b,"BlobFactory",{enumerable:!0,get:function(){return d(l).default}});var m=c(34);Object.defineProperty(b,"FontFactory",{enumerable:!0,get:function(){return d(m).default}});var n=c(23);Object.defineProperty(b,"ImageFactory",{enumerable:!0,get:function(){return d(n).default}});var o=c(35);Object.defineProperty(b,"JSONFactory",{enumerable:!0,get:function(){return d(o).default}});var p=c(36);Object.defineProperty(b,"MusicFactory",{enumerable:!0,get:function(){return d(p).default}});var q=c(38);Object.defineProperty(b,"SoundFactory",{enumerable:!0,get:function(){return d(q).default}});var r=c(40);Object.defineProperty(b,"StringFactory",{enumerable:!0,get:function(){return d(r).default}});var s=c(41);Object.defineProperty(b,"TextureFactory",{enumerable:!0,get:function(){return d(s).default}});var t=c(46);Object.defineProperty(b,"VideoFactory",{enumerable:!0,get:function(){return d(t).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(0),i=c(5),j=d(i),k=function(){function a(b,c){if(f(this,a),!j.default.indexedDB)throw new Error("This browser does not support indexedDB!");this._name=b,this._version=c,this._database=null,this._connect=null,this._onCloseHandler=this._closeConnection.bind(this)}return g(a,[{key:"open",value:function(){var a=this;return this._connect||(this._connect=new Promise(function(b,c){var d=indexedDB.open(a._name,a._version);d.addEventListener("upgradeneeded",function(a){var b=a.target.result,d=a.target.transaction,f=[].concat(e(d.objectStoreNames));b.addEventListener("error",function(a){return c(a)}),b.addEventListener("abort",function(a){return c(a)});var g=!0,i=!1,j=void 0;try{for(var k,l=f[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){var m=k.value;h.DATABASE_TYPES.includes(m)||b.deleteObjectStore(m)}}catch(a){i=!0,j=a}finally{try{!g&&l.return&&l.return()}finally{if(i)throw j}}var n=!0,o=!1,p=void 0;try{for(var q,r=h.DATABASE_TYPES[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value;f.includes(s)||b.createObjectStore(s,{keyPath:"name"})}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}}),d.addEventListener("success",function(c){a._database=c.target.result,a._database.addEventListener("close",a._onCloseHandler),a._database.addEventListener("versionchange",a._onCloseHandler),b(a._database)}),d.addEventListener("error",function(a){return c(a)}),d.addEventListener("blocked",function(a){return c(a)})}))}},{key:"close",value:function(){return this._closeConnection(),Promise.resolve()}},{key:"getObjectStore",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return h.DATABASE_TYPES.includes(a)?this.open().then(function(c){return c.transaction([a],b).objectStore(a)}):Promise.reject(Error('Could not find ObjectStore named "'+a+'".'))}},{key:"clear",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return"*"===b?h.DATABASE_TYPES.reduce(function(b,c){return b.then(function(){return a.clear(c)})},Promise.resolve()):this.getObjectStore(b,"readwrite").then(function(a){return new Promise(function(b,c){var d=a.clear();d.addEventListener("success",function(a){return b(a)}),d.addEventListener("error",function(a){return c(a)})})})}},{key:"deleteDatabase",value:function(){var a=this;return this.close().then(function(){return new Promise(function(b,c){var d=indexedDB.deleteDatabase(a._name);d.addEventListener("success",function(a){return b(a)}),d.addEventListener("error",function(a){return c(a)})})})}},{key:"loadData",value:function(a,b){return this.getObjectStore(a).then(function(c){return new Promise(function(d,e){var f=c.get(b);f.addEventListener("success",function(c){var e=c.target.result,f=e&&e.data||null;d({type:a,name:b,data:f})}),f.addEventListener("error",function(a){return e(a)})})})}},{key:"saveData",value:function(a,b,c){return this.getObjectStore(a,"readwrite").then(function(d){return new Promise(function(e,f){var g=d.put({name:b,data:c});g.addEventListener("success",function(){return e({type:a,name:b,data:c})}),g.addEventListener("error",function(a){return f(a)})})})}},{key:"removeData",value:function(a,b){return this.getObjectStore(a,"readwrite").then(function(c){return new Promise(function(d,e){var f=c.delete(b);f.addEventListener("success",function(){return d({type:a,name:b,data:null})}),f.addEventListener("error",function(a){return e(a)})})})}},{key:"destroy",value:function(){this._closeConnection(),this._name=null,this._version=null,this._onCloseHandler=null}},{key:"_closeConnection",value:function(){this._database&&(this._database.removeEventListener("close",this._onCloseHandler),this._database.removeEventListener("versionchange",this._onCloseHandler),this._database.close(),this._database=null),this._connect=null}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"isOpen",get:function(){return null!==this._database}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(6);Object.defineProperty(b,"EventEmitter",{enumerable:!0,get:function(){return d(e).default}});var f=c(74);Object.defineProperty(b,"Application",{enumerable:!0,get:function(){return d(f).default}});var g=c(77);Object.defineProperty(b,"Quadtree",{enumerable:!0,get:function(){return d(g).default}});var h=c(78);Object.defineProperty(b,"Scene",{enumerable:!0,get:function(){return d(h).default}});var i=c(26);Object.defineProperty(b,"SceneNode",{enumerable:!0,get:function(){return d(i).default}});var j=c(47);Object.defineProperty(b,"SceneManager",{enumerable:!0,get:function(){return d(j).default}});var k=c(9);Object.defineProperty(b,"Color",{enumerable:!0,get:function(){return d(k).default}});var l=c(10);Object.defineProperty(b,"Time",{enumerable:!0,get:function(){return d(l).default}});var m=c(25);Object.defineProperty(b,"Clock",{enumerable:!0,get:function(){return d(m).default}});var n=c(79);Object.defineProperty(b,"Timer",{enumerable:!0,get:function(){return d(n).default}});var o=c(18);Object.defineProperty(b,"Bounds",{enumerable:!0,get:function(){return d(o).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=c(25),m=d(l),n=c(47),o=d(n),p=c(49),q=d(p),r=c(59),s=d(r),t=c(60),u=d(t),v=c(32),w=d(v),x=c(3),y=d(x),z=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),d=Object.assign({},y.default.GAME_CONFIG,a);return c._config=d,c._canvas=d.canvas instanceof HTMLCanvasElement?d.canvas:document.createElement("canvas"),c._canvasParent=("string"==typeof d.canvasParent?document.querySelector(d.canvasParent):d.canvasParent)||null,c._loader=new w.default(d),c._displayManager=new q.default(c,d),c._mediaManager=new s.default(c,d),c._inputManager=new u.default(c),c._sceneManager=new o.default(c),c._updateHandler=c.update.bind(c),c._updateId=0,c._delta=new m.default(!1),c._isRunning=!1,c._canvasParent&&c._canvasParent.appendChild(c._canvas),c}return g(b,a),h(b,[{key:"start",value:function(a){return this._isRunning||(this._isRunning=!0,this._sceneManager.changeScene(a),this._delta.restart(),this._updateId=requestAnimationFrame(this._updateHandler)),this}},{key:"stop",value:function(){return this._isRunning&&(this._isRunning=!1,this._sceneManager.stopScene(),this._delta.stop(),cancelAnimationFrame(this._updateId)),this}},{key:"update",value:function(){return this._isRunning&&(this._inputManager.update(),this._sceneManager.update(this._delta.getElapsedTime()),this._delta.restart(),this._updateId=requestAnimationFrame(this._updateHandler)),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._isRunning&&this.stop(),this._canvasParent&&this._canvasParent.removeChild(this._canvas),this._loader.destroy(),this._loader=null,this._inputManager.destroy(),this._inputManager=null,this._mediaManager.destroy(),this._mediaManager=null,this._displayManager.destroy(),this._displayManager=null,this._sceneManager.destroy(),this._sceneManager=null,this._delta.destroy(),this._delta=null,this._config=null,this._canvas=null,this._canvasParent=null,this._updateHandler=null,this._updateId=null,this._isRunning=null}},{key:"canvas",get:function(){return this._canvas}},{key:"config",get:function(){return this._config}},{key:"loader",get:function(){return this._loader}},{key:"displayManager",get:function(){return this._displayManager}},{key:"mediaManager",get:function(){return this._mediaManager}},{key:"inputManager",get:function(){return this._inputManager}},{key:"sceneManager",get:function(){return this._sceneManager}},{key:"FPS",get:function(){return 1e3/this._delta.getElapsedTime().milliseconds}}]),b}(k.default);b.default=z},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(3),h=(d(g),function(){function a(b){if(e(this,a),!b)throw new Error("This browser or hardware does not support WebGL.");this._context=b,this._texture=b.createTexture(),this._width=-1,this._height=-1}return f(a,[{key:"bind",value:function(){var a=this._context;return a.bindTexture(a.TEXTURE_2D,this._texture),this}},{key:"unbind",value:function(){var a=this._context;return a.bindTexture(a.TEXTURE_2D,null),this}},{key:"setScaleMode",value:function(a){var b=this._context;return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a),this}},{key:"setWrapMode",value:function(a){var b=this._context;return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,a),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,a),this}},{key:"setPremultiplyAlpha",value:function(a){var b=this._context;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this}},{key:"setTextureImage",value:function(a){var b=this._context,c=a.videoWidth||a.width,d=a.videoHeight||a.height;return this._width!==c||this._height!==d?(this._width=c,this._height=d,b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)):b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,a),this}},{key:"destroy",value:function(){this._context.deleteTexture(this._texture),this._context=null,this._texture=null,this._width=null,this._height=null}}]),a}());b.default=h},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(4),i=d(h),j=c(3),k=d(j),l=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Empty,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,a),this._bounds=b.clone(),this._level=c,this._nodes=new Map,this._children=new Set}return g(a,[{key:"clear",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._nodes.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.clear()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this._nodes.clear(),this._children.clear(),this}},{key:"insert",value:function(a){var b=this._children,c=this._getNode(a);if(c)return c.insert(a),this;if(b.add(a),b.size>k.default.QUAD_TREE_MAX_OBJECTS&&this._level<k.default.QUAD_TREE_MAX_LEVEL){this._split();var d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=this._getNode(i);j&&(b.delete(i),j.insert(i))}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}return this}},{key:"getRelatedChildren",value:function(a){var b=this._getNode(a);return b?[].concat(e(b.getRelatedChildren(a)),e(this._children)):[].concat(e(this._children))}},{key:"destroy",value:function(){this._bounds.destroy(),this._bounds=null,this._nodes.clear(),this._nodes=null,this._children.clear(),this._children=null,this._level=null}},{key:"_split",value:function(){if(this._nodes.size){var b=i.default.Temp,c=this._level+1,d=this._bounds,e=d.width/2|0,f=d.height/2|0,g=d.left,h=d.top,j=g+e,k=h+f;this._nodes.set(0,new a(b.set(g,h,e,f),c)).set(1,new a(b.set(j,h,e,f),c)).set(2,new a(b.set(g,k,e,f),c)).set(3,new a(b.set(j,k,e,f),c))}}},{key:"_getNode",value:function(a){var b=a.getBounds(),c=!0,d=!1,e=void 0;try{for(var f,g=this._nodes.values()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(b.containsRect(h.getBounds()))return h}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return null}},{key:"bounds",get:function(){return this._bounds}},{key:"level",get:function(){return this._level}},{key:"nodes",get:function(){return this._nodes}},{key:"children",get:function(){return this._children}}]),a}();b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=c(26),m=(d(l),c(18)),n=d(m),o=c(4),p=(d(o),function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._app=null,c._nodes=new Set,c._bounds=new n.default,a&&Object.assign(c,a),c}return g(b,a),h(b,[{key:"hasNode",value:function(a){return this._nodes.has(a)}},{key:"addNode",value:function(a){return a.scene!==this&&(a.scene&&a.scene.removeNode(a),a.scene=this,this._nodes.add(a)),this}},{key:"removeNode",value:function(a){return a.scene===this&&(a.scene=null,this._nodes.delete(a)),this}},{key:"clearNodes",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._nodes[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;this.removeNode(f)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this}},{key:"getBounds",value:function(){this._bounds.reset();var a=!0,b=!1,c=void 0;try{for(var d,e=this._nodes[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.active&&this._bounds.addRect(f.getBounds())}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this._bounds.getRect()}},{key:"load",value:function(a){this._app.trigger("scene:start")}},{key:"init",value:function(){}},{key:"update",value:function(a){}},{key:"unload",value:function(){}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.clearNodes(),this._bounds.destroy(),this._bounds=null,this._nodes=null,this._app=null}},{key:"app",get:function(){return this._app},set:function(a){this._app=a}},{key:"nodes",get:function(){return this._nodes}},{key:"bounds",get:function(){return this.getBounds()}}]),b}(k.default));b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(25),j=d(i),k=c(10),l=(d(k),c(0)),m=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,!1));return g._limit=0,a&&g.restart(c,d),g}return g(b,a),h(b,[{key:"reset",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.TIME.MILLISECONDS;return this._limit=a*b,this._timeBuffer=0,this._isRunning=!1,this}},{key:"restart",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.TIME.MILLISECONDS;return this.reset(a,b).start()}},{key:"getRemainingMilliseconds",value:function(){return Math.max(0,this._limit-this.getElapsedMilliseconds())}},{key:"getRemainingSeconds",value:function(){return this.getRemainingMilliseconds()/l.TIME.SECONDS}},{key:"getRemainingMinutes",value:function(){return this.getRemainingMilliseconds()/l.TIME.MINUTES}},{key:"getRemainingTime",value:function(){return this.time.setMilliseconds(this.getRemainingMilliseconds())}},{key:"isRunning",get:function(){return this._isRunning&&!this.isExpired}},{key:"isExpired",get:function(){return this.getElapsedMilliseconds()>=this._limit}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(49);Object.defineProperty(b,"DisplayManager",{enumerable:!0,get:function(){return d(e).default}});var f=c(28);Object.defineProperty(b,"RenderTarget",{enumerable:!0,get:function(){return d(f).default}});var g=c(50);Object.defineProperty(b,"RenderState",{enumerable:!0,get:function(){return d(g).default}});var h=c(15);Object.defineProperty(b,"Texture",{enumerable:!0,get:function(){return d(h).default}});var i=c(58);Object.defineProperty(b,"View",{enumerable:!0,get:function(){return d(i).default}});var j=c(29);Object.defineProperty(b,"Renderer",{enumerable:!0,get:function(){return d(j).default}});var k=c(19);Object.defineProperty(b,"Renderable",{enumerable:!0,get:function(){return d(k).default}});var l=c(66);Object.defineProperty(b,"Container",{enumerable:!0,get:function(){return d(l).default}});var m=c(81);Object.defineProperty(b,"Text",{enumerable:!0,get:function(){return d(m).default}});var n=c(82);Object.defineProperty(b,"Video",{enumerable:!0,get:function(){return d(n).default}});var o=c(30);Object.defineProperty(b,"Shader",{enumerable:!0,get:function(){return d(o).default}});var p=c(53);Object.defineProperty(b,"ShaderAttribute",{enumerable:!0,get:function(){return d(p).default}});var q=c(54);Object.defineProperty(b,"ShaderUniform",{enumerable:!0,get:function(){return d(q).default}});var r=c(31);Object.defineProperty(b,"Sprite",{enumerable:!0,get:function(){return d(r).default}});var s=c(51);Object.defineProperty(b,"SpriteRenderer",{enumerable:!0,get:function(){return d(s).default}});var t=c(52);Object.defineProperty(b,"SpriteShader",{enumerable:!0,get:function(){return d(t).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(31),k=d(j),l=c(15),m=d(l),n=c(3),o=d(n),p=c(0),q=new Map,r=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.createElement("canvas");e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new m.default(d)));return g._canvas=d,g._context=d.getContext("2d"),g._text=null,g._style=null,g._dirty=!0,g.text=a,g.style=c,g}return g(b,a),h(b,[{key:"updateTexture",value:function(){if(this._dirty){var a=this._canvas,b=this._context,c=this._style,d=c.fontWeight+" "+c.fontSize+"px "+c.fontFamily,e=c.wordWrap?this.getWordWrappedText(c.wordWrapWidth):this._text,f=e.split(p.NEWLINE),g=f.map(function(a){return b.measureText(a).width}),h=this.determineFontHeight(d)+c.strokeThickness,i=g.reduce(function(a,b){return Math.max(a,b)},0);a.width=Math.ceil(i+c.strokeThickness+2*c.padding),a.height=Math.ceil(h*f.length+2*c.padding),b.clearRect(0,0,a.width,a.height),b.font=d,b.fillStyle=c.fill,b.strokeStyle=c.stroke,b.lineWidth=c.strokeThickness,b.textBaseline=c.baseline,b.lineJoin=c.lineJoin,b.miterLimit=c.miterLimit;for(var j=0;j<f.length;j++){var k=i-g[j],l="right"===c.align?k:k/2,m=c.strokeThickness/2+("left"===c.align?0:l),n=c.strokeThickness/2+h*j;c.stroke&&c.strokeThickness&&b.strokeText(f[j],m,n),c.fill&&b.fillText(f[j],m,n)}this.texture.updateSource(),this._dirty=!1}return this}},{key:"getWordWrappedText",value:function(a){for(var b=this._context,c=b.measureText(" ").width,d=this._text.split("\n"),e=a,f="",g=0;g<d.length;g++){var h=d[g].split(" ");g>0&&(f+="\n");for(var i=0;i<h.length;i++){var j=h[i],k=b.measureText(j).width,l=k+c;l>e?(i>0&&(f+="\n"),e-=k):e-=l,f+=j+" "}}return f}},{key:"determineFontHeight",value:function(a){if(!q.has(a)){var b=document.body,c=document.createElement("div");c.appendChild(document.createTextNode("M")),c.setAttribute("style","font: "+a+";position:absolute;top:0;left:0"),b.appendChild(c),q.set(a,c.offsetHeight),b.removeChild(c)}return q.get(a)}},{key:"render",value:function(a){return this.active&&(this.updateTexture(),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"render",this).call(this,a)),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._context=null,this._canvas=null,this._text=null,this._style=null,this._dirty=null}},{key:"canvas",get:function(){return this._canvas},set:function(a){this._canvas=a,this._dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){var b=a||" ";this._text!==b&&(this._text=b,this._dirty=!0)}},{key:"style",get:function(){return this._style},set:function(a){this._style=Object.assign({},o.default.TEXT_STYLE,a),this._dirty=!0}}]),b}(k.default);b.default=r},function(a,b,c){"use strict"
;function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(1),k=c(31),l=d(k),m=c(15),n=d(m),o=c(5),p=d(o),q=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new n.default(a)));if(!p.default.webAudio)throw new Error("Web Audio API is not supported, use the fallback Audio instead.");return c._source=a,c._audioContext=null,c._sourceNode=null,c._gainNode=null,c._duration=a.duration,c._volume=a.volume,c._speed=a.playbackRate,c._loop=a.loop,c}return g(b,a),h(b,[{key:"connect",value:function(a){return this._audioContext||(this._audioContext=a.audioContext,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(a.videoGain),this._gainNode.gain.value=this._volume,this._sourceNode=this._audioContext.createMediaElementSource(this.source),this._sourceNode.connect(this._gainNode)),this}},{key:"play",value:function(a){this.paused&&(this.applyOptions(a),this._source.play(),this.trigger("start"))}},{key:"pause",value:function(){this.playing&&(this._source.pause(),this.trigger("stop"))}},{key:"stop",value:function(){this.pause(),this.currentTime=0}},{key:"toggle",value:function(){this.paused?this.play():this.pause()}},{key:"applyOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.loop,c=a.speed,d=a.volume,e=a.time;void 0!==b&&(this.loop=b),void 0!==c&&(this.speed=c),void 0!==d&&(this.volume=d),void 0!==e&&(this.currentTime=e)}},{key:"render",value:function(a){return this.active&&(this.updateTexture(),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"render",this).call(this,a)),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.stop(),this._audioContext&&(this._audioContext=null,this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null),this._source=null,this._duration=null,this._volume=null,this._speed=null,this._loop=null}},{key:"audioContext",get:function(){return this._audioContext}},{key:"analyserTarget",get:function(){return this._gainNode}},{key:"source",get:function(){return this._source}},{key:"duration",get:function(){return this._duration}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,j.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._gainNode&&(this._gainNode.gain.value=b))}},{key:"loop",get:function(){return this._loop},set:function(a){var b=!!a;this._loop!==b&&(this._source.loop=this._loop=b)}},{key:"speed",get:function(){return this._speed},set:function(a){var b=Math.max(0,a);this._speed!==b&&(this._source.playbackRate=this._speed=b)}},{key:"currentTime",get:function(){return this._source.currentTime},set:function(a){this._source.currentTime=Math.max(0,a)}},{key:"paused",get:function(){return this._source.paused},set:function(a){a?this.pause():this.play()}},{key:"playing",get:function(){return!this.paused},set:function(a){a?this.play():this.pause()}}]),b}(l.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(67);Object.defineProperty(b,"Particle",{enumerable:!0,get:function(){return d(e).default}});var f=c(84);Object.defineProperty(b,"ParticleEmitter",{enumerable:!0,get:function(){return d(f).default}});var g=c(68);Object.defineProperty(b,"ParticleOptions",{enumerable:!0,get:function(){return d(g).default}});var h=c(57);Object.defineProperty(b,"ParticleShader",{enumerable:!0,get:function(){return d(h).default}});var i=c(56);Object.defineProperty(b,"ParticleRenderer",{enumerable:!0,get:function(){return d(i).default}});var j=c(20);Object.defineProperty(b,"ParticleModifier",{enumerable:!0,get:function(){return d(j).default}});var k=c(85);Object.defineProperty(b,"ForceModifier",{enumerable:!0,get:function(){return d(k).default}});var l=c(86);Object.defineProperty(b,"ScaleModifier",{enumerable:!0,get:function(){return d(l).default}});var m=c(87);Object.defineProperty(b,"TorqueModifier",{enumerable:!0,get:function(){return d(m).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(19),k=d(j),l=c(67),m=d(l),n=c(4),o=d(n),p=c(10),q=(d(p),c(68)),r=d(q),s=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._texture=a,d._textureFrame=new o.default,d._textureCoords=new o.default,d._updateTexCoords=!0,d._emissionRate=1,d._emissionDelta=0,d._modifiers=[],d._particles=new Set,d._particleOptions=new r.default(c),a&&d.setTexture(a),d}return g(b,a),h(b,[{key:"setTexture",value:function(a){return this._texture!==a&&(this._texture=a,this.setTextureFrame(a.sourceFrame)),this}},{key:"setTextureFrame",value:function(a){return this._textureFrame.copy(a),this._updateTexCoords=!0,this}},{key:"setEmissionRate",value:function(a){return this._emissionRate=a,this}},{key:"addModifier",value:function(a){return this._modifiers.push(a),this}},{key:"computeParticleCount",value:function(a){var b=this._emissionRate*a.seconds+this._emissionDelta,c=0|b;return this._emissionDelta=b-c,c}},{key:"update",value:function(a){for(var b=this._particleOptions,c=this._particles,d=this._modifiers,e=this.computeParticleCount(a),f=0;f<e;f++)c.add(new m.default(b));var g=!0,h=!1,i=void 0;try{for(var j,k=c[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;if(l.update(a),l.elapsedLifetime.greaterThan(l.totalLifetime))l.destroy(),c.delete(l);else{var n=!0,o=!1,p=void 0;try{for(var q,r=d[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){q.value.apply(l,a)}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}}}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}}},{key:"render",value:function(a){return this.active&&a.render(this,"particle"),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._texture=null,this._textureFrame.destroy(),this._textureFrame=null,this._textureCoords.destroy(),this._textureCoords=null,this._modifiers.length=0,this._modifiers=null,this._particles.clear(),this._particles=null,this._particleOptions.destroy(),this._particleOptions=null,this._emissionRate=null,this._emissionDelta=null,this._updateTexCoords=null}},{key:"texture",get:function(){return this._texture},set:function(a){this.setTexture(a)}},{key:"textureFrame",get:function(){return this._textureFrame},set:function(a){this.setTextureFrame(a)}},{key:"textureCoords",get:function(){if(this._updateTexCoords){var a=this._textureFrame,b=a.left,c=a.top,d=a.right,e=a.bottom,f=this._texture,g=f.width,h=f.height;this._textureCoords.set(b/g,c/h,d/g,e/h),this._updateTexCoords=!1}return this._textureCoords},set:function(a){this._textureCoords.copy(a)}},{key:"emissionRate",get:function(){return this._emissionRate},set:function(a){this.setEmissionRate(a)}},{key:"particleOptions",get:function(){return this._particleOptions},set:function(a){this._particleOptions=a}},{key:"modifiers",get:function(){return this._modifiers}},{key:"particles",get:function(){return this._particles}}]),b}(k.default);b.default=s},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(20),j=d(i),k=c(2),l=d(k),m=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.Empty;e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._acceleration=a.clone(),c}return g(b,a),h(b,[{key:"apply",value:function(a,b){var c=this._acceleration,d=b.seconds;a.velocity.add(d*c.x,d*c.y)}},{key:"acceleration",get:function(){return this._acceleration},set:function(a){this._acceleration.copy(a)}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(20),j=d(i),k=c(2),l=d(k),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._scaleFactor=a&&a.clone()||new l.default,c}return g(b,a),h(b,[{key:"apply",value:function(a,b){var c=this._scaleFactor,d=b.seconds;a.scale.add(d*c.x,d*c.y)}},{key:"scaleFactor",get:function(){return this._scaleFactor},set:function(a){this._scaleFactor.copy(a)}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(20),j=d(i),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._angularAcceleration=a||0,c}return g(b,a),h(b,[{key:"apply",value:function(a,b){a.rotationSpeed+=b.seconds*this._angularAcceleration}},{key:"angularAcceleration",get:function(){return this._acceleration},set:function(a){this._angularAcceleration=a}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(7);Object.defineProperty(b,"ChannelHandler",{enumerable:!0,get:function(){return d(e).default}});var f=c(89);Object.defineProperty(b,"Input",{enumerable:!0,get:function(){return d(f).default}});var g=c(60);Object.defineProperty(b,"InputManager",{enumerable:!0,get:function(){return d(g).default}});var h=c(61);Object.defineProperty(b,"Keyboard",{enumerable:!0,get:function(){return d(h).default}});var i=c(62);Object.defineProperty(b,"Mouse",{enumerable:!0,get:function(){return d(i).default}});var j=c(45);Object.defineProperty(b,"GamepadControl",{enumerable:!0,get:function(){return d(j).default}});var k=c(44);Object.defineProperty(b,"GamepadMapping",{enumerable:!0,get:function(){return d(k).default}});var l=c(43);Object.defineProperty(b,"DefaultGamepadMapping",{enumerable:!0,get:function(){return d(l).default}});var m=c(64);Object.defineProperty(b,"Gamepad",{enumerable:!0,get:function(){return d(m).default}});var n=c(63);Object.defineProperty(b,"GamepadManager",{enumerable:!0,get:function(){return d(n).default}});var o=c(90);Object.defineProperty(b,"Pointer",{enumerable:!0,get:function(){return d(o).default}});var p=c(65);Object.defineProperty(b,"PointerManager",{enumerable:!0,get:function(){return d(p).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=c(3),m=d(l),n=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.triggerThreshold,g=void 0===d?m.default.TRIGGER_THRESHOLD:d,h=c.start,i=c.stop,j=c.active,k=c.trigger,l=c.context;e(this,b);var n=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return n._channels=new Set(a),n._value=0,n._triggerStart=0,n._triggerThreshold=g,h&&n.on("start",h,l),i&&n.on("stop",i,l),j&&n.on("active",j,l),k&&n.on("trigger",k,l),n}return g(b,a),h(b,[{key:"update",value:function(a){this._value=0;var b=!0,c=!1,d=void 0;try{for(var e,f=this._channels[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._value=Math.max(a[g],this._value)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this._value?(this._triggerStart||(this._triggerStart=Date.now(),this.trigger("start",this._value)),this.trigger("active",this._value)):(this.trigger("stop",this._value),this._triggerStart&&Date.now()-this._triggerStart<this._triggerThreshold&&(this._triggerStart=0,this.trigger("trigger",this._value)))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._channels.clear(),this._channels=null,this._value=null,this._triggerStart=null,this._triggerThreshold=null}},{key:"channels",get:function(){return this._channels}},{key:"value",get:function(){return this._value}},{key:"triggerThreshold",get:function(){return this._triggerThreshold},set:function(a){this._triggerThreshold=a}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(7),k=d(j),l=c(2),m=d(l),n=c(0),o={NONE:0,BUTTON_DOWN:1,BUTTON_UP:2,POSITION:4,WINDOW_STATE:8},p=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,n.OFFSET_POINTER,n.RANGE_NODE));return c._position=new m.default,c._size=new m.default,c._insideWindow=!1,c._flags=o.NONE,c}return g(b,a),h(b,[{key:"update",value:function(){this._flags&&(this._flags=o.NONE,this.channels.fill(0,5,17))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._position.destroy(),this._position=null,this._positionDelta.destroy(),this._positionDelta=null,this._scrollDelta.destroy(),this._scrollDelta=null,this._channelsPressed.clear(),this._channelsPressed=null,this._channelsReleased.clear(),this._channelsReleased=null,this._flags=null,this._insideWindow=null,this._canvas=null,this._app=null}},{key:"position",get:function(){return this._position}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"insideWindow",get:function(){return this._insideWindow}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(2);Object.defineProperty(b,"Vector",{enumerable:!0,get:function(){return d(e).default}});var f=c(27);Object.defineProperty(b,"ObservableVector",{enumerable:!0,get:function(){return d(f).default}});var g=c(8);Object.defineProperty(b,"Matrix",{enumerable:!0,get:function(){return d(g).default}});var h=c(48);Object.defineProperty(b,"Transformable",{enumerable:!0,get:function(){return d(h).default}});var i=c(24);Object.defineProperty(b,"Interval",{enumerable:!0,get:function(){return d(i).default}});var j=c(17);Object.defineProperty(b,"Collision",{enumerable:!0,get:function(){return d(j).default}});var k=c(69);Object.defineProperty(b,"RC4",{enumerable:!0,get:function(){return d(k).default}});var l=c(92);Object.defineProperty(b,"Random",{enumerable:!0,get:function(){return d(l).default}});var m=c(16);Object.defineProperty(b,"Shape",{enumerable:!0,get:function(){return d(m).default}});var n=c(4);Object.defineProperty(b,"Rectangle",{enumerable:!0,get:function(){return d(n).default}});var o=c(93);Object.defineProperty(b,"Circle",{enumerable:!0,get:function(){return d(o).default}});var p=c(42);Object.defineProperty(b,"Polygon",{enumerable:!0,get:function(){return d(p).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(69),j=d(i),k=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.generateSeed();f(this,a),this._seed=b,this._rc4=new j.default(this.getMixedKeys(this.flatten(b)))}return h(a,[{key:"flatten",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,c=[];if(b>=0&&"object"===(void 0===a?"undefined":g(a))){var d=!0,e=!1,f=void 0;try{for(var h,i=Object.values(a)[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;c.push(this.flatten(j,b-1))}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}}return c.length?String.fromCharCode.apply(String,c):"string"==typeof a?a:a+"\0"}},{key:"getMixedKeys",value:function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=[],d=""+a,e=d.length,f=0,g=0;f<e;f++)c[255&f]=255&(g^=19*b[255&f])+d.charCodeAt(f);return c}},{key:"next",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=this._rc4,d=Math.pow(2,52),e=2*d,f=c.next(6),g=Math.pow(256,6),h=0;f<d;)f=256*(f+h),g*=256,h=c.next(1);for(;f>=e;)f/=2,g/=2,h>>>=1;return(f+h)/g*(b-a)+a}},{key:"seed",get:function(){return this._seed},set:function(a){this._seed=a,this._rc4.setKeys(this.getMixedKeys(this.flatten(a)))}}],[{key:"generateSeed",value:function(){var a=new Uint8Array(256);if(crypto)crypto.getRandomValues(a);else for(var b=0;b<256;b++)a[b]=256*Math.random()&255;return String.fromCharCode.apply(String,e(a))}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(4),k=d(j),l=c(16),m=d(l),n=c(17),o=d(n),p=c(2),q=d(p),r=c(0),s=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return g._radius=d,g}return g(b,a),h(b,[{key:"set",value:function(a,b,c){return this.position.set(a,b),this._radius=c,this}},{key:"copy",value:function(a){return this.position.copy(a.position),this._radius=a.radius,this}},{key:"clone",value:function(){return new b(this.x,this.y,this._radius)}},{key:"equals",value:function(a){return a===this||this.position.equals(a.position)&&this._radius===a.radius}},{key:"getBounds",value:function(){return this._bounds||(this._bounds=new k.default),this._bounds.set(this._x-this._radius,this._y-this._radius,2*this._radius,2*this._radius)}},{key:"contains",value:function(a,b,c){var d=this.position;return c&&(d=d.transform(c,q.default.Temp)),d.distanceTo(a,b)<=this._radius}},{key:"getCollision",value:function(a){switch(a.type){case r.SHAPE.RECTANGLE:return o.default.checkCircleRectangle(this,a);case r.SHAPE.CIRCLE:return o.default.checkCircleCircle(this,a);case r.SHAPE.POLYGON:return o.default.checkPolygonCircle(a,this);case r.SHAPE.NONE:default:throw new Error('Invalid Shape Type "'+a.type+'".')}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._radius=null}},{key:"type",get:function(){return r.SHAPE.CIRCLE}},{key:"radius",get:function(){return this._radius},set:function(a){this._radius=a}}]),b}(m.default);b.default=s,s.Empty=new s(0,0,0),s.Temp=new s},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(14);Object.defineProperty(b,"Playable",{enumerable:!0,get:function(){return d(e).default}});var f=c(95);Object.defineProperty(b,"Audio",{enumerable:!0,get:function(){return d(f).default}});var g=c(39);Object.defineProperty(b,"Sound",{enumerable:!0,get:function(){return d(g).default}});var h=c(37);Object.defineProperty(b,"Music",{enumerable:!0,get:function(){return d(h).default}});var i=c(59);Object.defineProperty(b,"MediaManager",{enumerable:!0,get:function(){return d(i).default}});var j=c(96);Object.defineProperty(b,"AudioAnalyser",{enumerable:!0,get:function(){return d(j).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(14),k=d(j),l=c(1),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c._parentVolume=1,c}return g(b,a),h(b,[{key:"connect",value:function(a){this.parentVolume=a.masterVolume}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._parentVolume=null}},{key:"audioContext",get:function(){return null}},{key:"analyserTarget",get:function(){return null}},{key:"volume",set:function(a){var b=(0,l.clamp)(a,0,2);this.volume!==b&&(this._volume=b,this.source.volume=b*this._parentVolume)}},{key:"parentVolume",get:function(){return this._parentVolume},set:function(a){var b=(0,l.clamp)(a,0,1);this.parentVolume!==b&&(this._parentVolume=b,this.source.volume=this._volume*b)}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=c.fftSize,f=void 0===e?2048:e,g=c.minDecibels,h=void 0===g?-100:g,i=c.maxDecibels,j=void 0===i?-30:i,k=c.smoothingTimeConstant,l=void 0===k?.8:k;if(d(this,a),!b)throw new Error("No analyser target was provided.");this._target=b,this._options={fftSize:f,minDecibels:h,maxDecibels:j,smoothingTimeConstant:l}}return e(a,[{key:"ensureContext",value:function(){if(!this._context){if(!this._target.audioContext)throw new Error("Failed to provide an AudioContext from the target.");if(!this._target.analyserTarget)throw new Error("Target has no valid AudioNode to analyse.");this._context=this._target.audioContext,this._analyser=Object.assign(this._context.createAnalyser(),this._options),this._targetNode=this._target.analyserTarget,this._targetNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount),this._frequencyData=new Uint8Array(this._analyser.frequencyBinCount),this._preciseTimeDomainData=new Float32Array(this._analyser.frequencyBinCount),this._preciseFrequencyData=new Float32Array(this._analyser.frequencyBinCount)}}},{key:"destroy",value:function(){this._target=null,this._options=null,this._context&&(this._context=null,this._targetNode.disconnect(this._analyser),this._targetNode=null,this._analyser.disconnect(),this._analyser=null,this._timeDomainData=null,this._frequencyData=null,this._preciseTimeDomainData=null,this._preciseFrequencyData=null)}},{key:"timeDomainData",get:function(){return this.ensureContext(),this._analyser.getByteTimeDomainData(this._timeDomainData),this._timeDomainData}},{key:"frequencyData",get:function(){return this.ensureContext(),this._analyser.getByteFrequencyData(this._frequencyData),this._frequencyData}},{key:"preciseTimeDomainData",get:function(){return this.ensureContext(),this._analyser.getFloatTimeDomainData(this._preciseTimeDomainData),this._preciseTimeDomainData}},{key:"preciseFrequencyData",get:function(){return this.ensureContext(),this._analyser.getFloatFrequencyData(this._preciseFrequencyData),this._preciseFrequencyData}}]),a}();b.default=f}]);
//# sourceMappingURL=exo.min.js.map