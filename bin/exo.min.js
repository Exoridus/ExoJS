var Exo=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=71)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=(b.VERSION="1.0.0",b.TAU=2*Math.PI,b.RAD_PER_DEG=Math.PI/180,b.DEG_PER_RAD=180/Math.PI,b.VORONOI={LEFT:-1,MIDDLE:0,RIGHT:1},b.TIME={MILLISECONDS:1,SECONDS:1e3,MINUTES:6e4,HOURS:36e5},b.TEXTURE_FLAGS={NONE:0,SCALE_MODE:1,WRAP_MODE:2,PREMULTIPLY_ALPHA:4,SOURCE:8,SIZE:16},b.SCALE_MODES={LINEAR:0,NEAREST:1},b.WRAP_MODES={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},b.ATTRIBUTE_TYPE={BYTE:5120,SHORT:5122,INT:5124,FLOAT:5126,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125},b.INPUT_DEVICE_KEYBOARD=0),e=b.INPUT_DEVICE_POINTER=1,f=b.INPUT_DEVICE_GAMEPAD=2,g=b.INPUT_DEVICE_COUNT=3,h=(b.INPUT_CHANNELS_HANDLER=32,b.INPUT_CHANNELS_DEVICE=256),i=(b.INPUT_CHANNELS_GLOBAL=h*g,b.INPUT_OFFSET_KEYBOARD=d*h),j=b.INPUT_OFFSET_POINTER=e*h,k=b.INPUT_OFFSET_GAMEPAD=f*h;b.KEYBOARD={Backspace:i+8,Tab:i+9,Clear:i+12,Enter:i+13,Shift:i+16,Control:i+17,Alt:i+18,Pause:i+19,CapsLock:i+20,Escape:i+27,Space:i+32,PageUp:i+33,PageDown:i+34,End:i+35,Home:i+36,Left:i+37,Up:i+38,Right:i+39,Down:i+40,Insert:i+45,Delete:i+46,Help:i+47,Zero:i+48,One:i+49,Two:i+50,Three:i+51,Four:i+52,Five:i+53,Six:i+54,Seven:i+55,Eight:i+56,Nine:i+57,A:i+65,B:i+66,C:i+67,D:i+68,E:i+69,F:i+70,G:i+71,H:i+72,I:i+73,J:i+74,K:i+75,L:i+76,M:i+77,N:i+78,O:i+79,P:i+80,Q:i+81,R:i+82,S:i+83,T:i+84,U:i+85,V:i+86,W:i+87,X:i+88,Y:i+89,Z:i+90,NumPad0:i+96,NumPad1:i+97,NumPad2:i+98,NumPad3:i+99,NumPad4:i+100,NumPad5:i+101,NumPad6:i+102,NumPad7:i+103,NumPad8:i+104,NumPad9:i+105,NumPadMultiply:i+106,NumPadAdd:i+107,NumPadEnter:i+108,NumPadSubtract:i+109,NumPadDecimal:i+110,NumPadDivide:i+111,F1:i+112,F2:i+113,F3:i+114,F4:i+115,F5:i+116,F6:i+117,F7:i+118,F8:i+119,F9:i+120,F10:i+121,F11:i+122,F12:i+123,NumLock:i+144,ScrollLock:i+145,Colon:i+186,Equals:i+187,Comma:i+188,Dash:i+189,Period:i+190,QuestionMark:i+191,Tilde:i+192,OpenBracket:i+219,BackwardSlash:i+220,ClosedBracket:i+221,Quotes:i+222},b.POINTER={MouseLeft:j,MouseMiddle:j+1,MouseRight:j+2,MouseBack:j+3,MouseForward:j+4,MouseMove:j+5,MouseScroll:j+6,PenContact:j+7,PenBarrel:j+8,PenEraser:j+9},b.GAMEPAD={FaceBottom:k+0,FaceRight:k+1,FaceLeft:k+2,FaceTop:k+3,ShoulderLeftBottom:k+4,ShoulderRightBottom:k+5,ShoulderLeftTop:k+6,ShoulderRightTop:k+7,Select:k+8,Start:k+9,LeftStick:k+10,RightStick:k+11,DPadUp:k+12,DPadDown:k+13,DPadLeft:k+14,DPadRight:k+15,Home:k+16,LeftStickLeft:k+17,LeftStickRight:k+18,LeftStickUp:k+19,LeftStickDown:k+20,RightStickLeft:k+21,RightStickRight:k+22,RightStickUp:k+23,RightStickDown:k+24},b.UNIFORM_TYPE={INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,FLOAT:5126,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678},b.BLEND_MODES={NORMAL:0,ADDITIVE:1,SUBTRACT:2,MULTIPLY:3,SCREEN:4},b.DATABASE_TYPES=["arrayBuffer","blob","font","media","audio","video","music","sound","image","texture","string","json"],b.CODEC_NOT_SUPPORTED=/^no$/,b.NEWLINE=/(?:\r\n|\r|\n)/,b.FILE_TYPES=[{mimeType:"image/x-icon",pattern:[0,0,1,0],mask:[255,255,255,255]},{mimeType:"image/x-icon",pattern:[0,0,2,0],mask:[255,255,255,255]},{mimeType:"image/bmp",pattern:[66,77],mask:[255,255]},{mimeType:"image/gif",pattern:[71,73,70,56,55,97],mask:[255,255,255,255,255,255]},{mimeType:"image/gif",pattern:[71,73,70,56,57,97],mask:[255,255,255,255,255,255]},{mimeType:"image/webp",pattern:[82,73,70,70,0,0,0,0,87,69,66,80,86,80],mask:[255,255,255,255,0,0,0,0,255,255,255,255,255,255]},{mimeType:"image/png",pattern:[137,80,78,71,13,10,26,10],mask:[255,255,255,255,255,255,255,255]},{mimeType:"image/jpeg",pattern:[255,216,255],mask:[255,255,255]},{mimeType:"audio/basic",pattern:[46,115,110,100],mask:[255,255,255,255]},{mimeType:"audio/mpeg",pattern:[73,68,51],mask:[255,255,255]},{mimeType:"audio/wave",pattern:[82,73,70,70,0,0,0,0,87,65,86,69],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mimeType:"audio/midi",pattern:[77,84,104,100,0,0,0,6],mask:[255,255,255,255,255,255,255,255]},{mimeType:"audio/aiff",pattern:[70,79,82,77,0,0,0,0,65,73,70,70],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mimeType:"video/avi",pattern:[82,73,70,70,0,0,0,0,65,86,73,32],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mimeType:"application/ogg",pattern:[79,103,103,83,0],mask:[255,255,255,255,255]}]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0}),b.imageToBase64=b.random=b.bezierCurveTo=b.getMediaSize=b.getMediaHeight=b.getMediaWidth=b.stopEvent=b.removeFlag=b.addFlag=b.hasFlag=b.determineMimeType=b.removeItems=b.rgbToHex=b.inRange=b.powerOfTwo=b.sign=b.clamp=b.getVornoiRegion=b.radiansToDegrees=b.degreesToRadians=b.decodeAudioBuffer=b.supportsCodec=b.rng=b.canvasContext=b.canvas=b.audioContext=b.audio=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=c(0),h=c(5),i=d(h),j=c(8),k=d(j),l=c(34),m=d(l),n=new Audio,o=i.default.webAudio?new AudioContext:null,p=document.createElement("canvas"),q=p.getContext("2d"),r=new m.default,s=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=!0,e=!1,f=void 0;try{for(var h,i=b[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;if(n.canPlayType(j).replace(g.CODEC_NOT_SUPPORTED,""))return!0}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return!1},t=function(a){return i.default.webAudio?new Promise(function(b,c){o.decodeAudioData(a,b,c)}):Promise.reject(Error("Web Audio is not supported!"))},u=function(a){return a*g.RAD_PER_DEG},v=function(a){return a*g.DEG_PER_RAD},w=function(a,b,c){return Math.min(c,Math.max(b,a))},x=function(a){return a&&(a<0?-1:1)},y=function(a,b){var c=b.dot(a.x,a.y);return c<0?g.VORONOI.LEFT:c>a.len2?g.VORONOI.RIGHT:g.VORONOI.MIDDLE},z=function(a){return 0!==a&&0==(a&a-1)},A=function(a,b,c){return a>=Math.min(b,c)&&a<=Math.max(b,c)},B=function(a,b,c){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=((1<<24)+(a<<16)+(b<<8)+c).toString(16).substr(1);return d?"#"+e:e},C=function(a,b,c){if(!(b>=a.length||c<=0)){for(var d=a.length,e=b+c>d?d-b:c,f=d-e,g=b;g<f;g++)a[g]=a[g+e];a.length=f}},D=function(a){var b=new Uint8Array(a),c=new DataView(a),d=c.getUint32(0,!1);return!(b.length<Math.max(12,d)||d%4!=0)&&"ftypmp4"===String.fromCharCode.apply(String,e(b.subarray(4,11)))},E=function(a){var b=new Uint8Array(a),c=[26,69,223,163].every(function(a,c){return a===b[c]}),d=b.subarray(4,4100),f=d.findIndex(function(a,b,c){return 66===c[b]&&130===c[b+1]});return!(!c||-1===f)&&"webm"===String.fromCharCode.apply(String,e(d.subarray(f+3,f+7)))},F=function(a){var b=new Uint8Array(a);if(!b.length)throw new Error("Cannot determine mime type: No data.");var c=function(a){return b.length<a.pattern.length?"continue":a.pattern.every(function(c,d){return(b[d]&a.mask[d])===c})?{v:a.mimeType}:void 0},d=!0,e=!1,h=void 0;try{for(var i,j=g.FILE_TYPES[Symbol.iterator]();!(d=(i=j.next()).done);d=!0){var k=i.value,l=c(k);switch(l){case"continue":continue;default:if("object"===(void 0===l?"undefined":f(l)))return l.v}}}catch(a){e=!0,h=a}finally{try{!d&&j.return&&j.return()}finally{if(e)throw h}}return D(a)?"video/mp4":E(a)?"video/webm":"text/plain"},G=function(a,b){return 0!=(b&a)},H=function(a,b){return b|=a},I=function(a,b){return b&=~a},J=function(a){a.preventDefault(),a.stopImmediatePropagation()},K=function(a){return a&&(a.naturalWidth||a.videoWidth||a.width)||0},L=function(a){return a&&(a.naturalHeight||a.videoHeight||a.height)||0},M=function(a){return new k.default(K(a),L(a))},N=function(a,b,c,d,e,f,g,h){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];i.push(a,b);for(var j=1,k=0,l=0,m=0,n=0,o=0,p=0;j<=20;j++)k=j/20,l=1-k,m=l*l,n=m*l,o=k*k,p=o*k,i.push(n*a+3*m*k*c+3*l*o*e+p*g,n*b+3*m*k*d+3*l*o*f+p*h);return i},O=function(a,b){return r.next(a,b)},P=function(a){return p.width=a.width,p.height=a.height,q.drawImage(a,0,0),p.toDataURL()};b.audio=n,b.audioContext=o,b.canvas=p,b.canvasContext=q,b.rng=r,b.supportsCodec=s,b.decodeAudioBuffer=t,b.degreesToRadians=u,b.radiansToDegrees=v,b.getVornoiRegion=y,b.clamp=w,b.sign=x,b.powerOfTwo=z,b.inRange=A,b.rgbToHex=B,b.removeItems=C,b.determineMimeType=F,b.hasFlag=G,b.addFlag=H,b.removeFlag=I,b.stopEvent=J,b.getMediaWidth=K,b.getMediaHeight=L,b.getMediaSize=M,b.bezierCurveTo=N,b.random=O,b.imageToBase64=P},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this._x=b,this._y=c}return e(a,[{key:"set",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x=a,this._y=b,this}},{key:"copy",value:function(a){return this._x=a.x,this._y=a.y,this}},{key:"clone",value:function(){return new a(this._x,this._y)}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.x,c=a.y;return!(void 0!==b&&this.x!==b||void 0!==c&&this.y!==c)}},{key:"normalize",value:function(){var a=this.magnitude;return a>0&&(this._x/=a,this._y/=a),this}},{key:"reverse",value:function(){return this._x*=-1,this._y*=-1,this}},{key:"add",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x+=a,this._y+=b,this}},{key:"subtract",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x-=a,this._y-=b,this}},{key:"scale",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x*=a,this._y*=b,this}},{key:"divide",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._x/=a,this._y/=b,this}},{key:"transform",value:function(a){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this).set(this._x*a.a+this._y*a.b+a.x,this._x*a.c+this._y*a.d+a.y)}},{key:"transformInverse",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,c=1/(this.a*this.d+this.c*-this.b);return b.set(this._x*a.d*c+this._y*-a.c*c+(a.y*a.c-a.x*a.d)*c,this._y*a.a*c+this._x*-a.b*c+(-a.y*a.a+a.x*a.b)*c)}},{key:"perp",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this).set(this._y,-1*this._x)}},{key:"distanceTo",value:function(a,b){var c=this._x-a,d=this._y-b;return Math.sqrt(c*c+d*d)}},{key:"cross",value:function(a){return this._x*a.y-this._y*a.x}},{key:"dot",value:function(a,b){return this._x*a+this._y*b}},{key:"project",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,c=this.dot(a.x,a.y)/a.len2;return b.set(c*a.x,c*a.y)}},{key:"reflect",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,c=this._x,d=this._y;return this.project(a,b).scale(2).subtract(c,d)}},{key:"destroy",value:function(){this._x=null,this._y=null}},{key:"x",get:function(){return this._x},set:function(a){this._x=a}},{key:"y",get:function(){return this._y},set:function(a){this._y=a}},{key:"angle",get:function(){return Math.atan2(this._x,this._y)}},{key:"magnitude",get:function(){return this.len}},{key:"len",get:function(){return Math.sqrt(this.len2)}},{key:"len2",get:function(){return this._x*this._x+this._y*this._y}}]),a}();b.default=f,f.Empty=new f(0,0),f.Temp=new f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(0),f=c(7),g=d(f),h=c(41),i=d(h);b.default={APP_OPTIONS:{resourcePath:"",width:800,height:600,canvas:null,canvasParent:null,clearColor:g.default.Black,database:null},CONTEXT_OPTIONS:{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1,depth:!1},REQUEST_METHOD:"GET",REQUEST_MODE:"cors",REQUEST_CACHE:"default",SCALE_MODE:e.SCALE_MODES.LINEAR,WRAP_MODE:e.WRAP_MODES.CLAMP_TO_EDGE,PREMULTIPLY_ALPHA:!0,GENERATE_MIPMAP:!0,MEDIA_SPEED:1,MEDIA_LOOP:!1,MEDIA_TIME:0,MEDIA_MUTED:!1,VOLUME_MUSIC:1,VOLUME_SOUND:1,VOLUME_VIDEO:1,QUAD_TREE_MAX_LEVEL:5,QUAD_TREE_MAX_OBJECTS:20,BATCH_SIZE_SPRITES:2500,BATCH_SIZE_PARTICLES:5e3,INPUT_THRESHOLD:300,GAMEPAD_MAPPING:new i.default}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=c(2),i=d(h),j=c(8),k=d(j),l=c(27),m=d(l),n=c(20),o=d(n),p=c(15),q=d(p),r=c(10),s=d(r),t=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;e(this,a),this._position=new i.default(b,c),this._size=new k.default(d,f)}return f(a,[{key:"setPosition",value:function(a,b){return this.position.set(a,b),this}},{key:"setSize",value:function(a,b){return this._size.set(a,b),this}},{key:"set",value:function(a,b,c,d){return this._position.set(a,b),this._size.set(c,d),this}},{key:"copy",value:function(a){return this._position.copy(a.position),this._size.copy(a.size),this}},{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height)}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.x,c=a.y,d=a.width,e=a.height;return!(void 0!==b&&this.x!==b||void 0!==c&&this.y!==c||void 0!==d&&this.width!==d||void 0!==e&&this.height!==e)}},{key:"getBounds",value:function(){return this.clone()}},{key:"getNormals",value:function(){for(var a=i.default.Temp,b=[],c=0;c<4;c++)a.set((c+1)%3==0?this.left:this.right,0==((c+1)/2|0)?this.top:this.bottom),b.push(a.clone().subtract(c%3==0?this.left:this.right,0==(c/2|0)?this.top:this.bottom).perp().normalize());return b}},{key:"project",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.default,c=a.dot(this.left,this.top),d=c,e=void 0;return e=a.dot(this.right,this.top),c=Math.min(c,e),d=Math.max(d,e),e=a.dot(this.right,this.bottom),c=Math.min(c,e),d=Math.max(d,e),e=a.dot(this.left,this.bottom),c=Math.min(c,e),d=Math.max(d,e),b.set(c,d)}},{key:"transform",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,c=i.default.Temp,d=void 0,e=void 0,f=void 0,g=void 0;return c.set(this.left,this.top).transform(a),d=f=c.x,e=g=c.y,c.set(this.left,this.bottom).transform(a),d=Math.min(d,c.x),e=Math.min(e,c.y),f=Math.max(f,c.x),g=Math.max(g,c.y),c.set(this.right,this.top).transform(a),d=Math.min(d,c.x),e=Math.min(e,c.y),f=Math.max(f,c.x),g=Math.max(g,c.y),c.set(this.right,this.bottom).transform(a),d=Math.min(d,c.x),e=Math.min(e,c.y),f=Math.max(f,c.x),g=Math.max(g,c.y),b.set(d,e,f-d,g-e)}},{key:"contains",value:function(a,b,c){var d=new i.default(this.left,this.top),e=new i.default(this.right,this.bottom);return c&&(d.transform(c),e.transform(c)),(0,g.inRange)(a,d.x,e.x)&&(0,g.inRange)(b,d.y,e.y)}},{key:"containsRect",value:function(a){return(0,g.inRange)(a.left,this.left,this.right)&&(0,g.inRange)(a.right,this.left,this.right)&&(0,g.inRange)(a.top,this.top,this.bottom)&&(0,g.inRange)(a.bottom,this.top,this.bottom)}},{key:"intersets",value:function(b){return b instanceof a?q.default.intersectionRectRect(this,b):b instanceof o.default?q.default.intersectionSAT(this,b):b instanceof m.default&&q.default.intersectionCircleRect(b,this)}},{key:"getCollision",value:function(b){return b instanceof a?q.default.collisionRectRect(this,b):b instanceof o.default?q.default.collisionSAT(this,b):b instanceof m.default?q.default.collisionCircleRect(b,this,!0):null}},{key:"destroy",value:function(){this._position.destroy(),this._position=null,this._size.destroy(),this._size=null}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"width",get:function(){return this._size.width},set:function(a){this._size.width=a}},{key:"height",get:function(){return this._size.height},set:function(a){this._size.height=a}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}}]),a}();b.default=t,t.Empty=new t(0,0,0,0),t.Temp=new t},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default={webAudio:"AudioContext"in window,indexedDB:"indexedDB"in window,webGL:function(){var a=document.createElement("canvas"),b="probablySupportsContext"in a?"probablySupportsContext":"supportsContext";return b in a?a[b]("webgl")||a[b]("experimental-webgl"):"WebGLRenderingContext"in window}(),touchEvents:"ontouchstart"in window,pointerEvents:"PointerEvent"in window,eventOptions:function(){var a=!1;try{window.addEventListener("test",null,{get passive(){a=!0}})}catch(a){}return a}()}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=function(){function a(){d(this,a),this._events=new Map}return e(a,[{key:"on",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;if(!this._events)return this;var d=this._events.get(a);return d?d.push({callback:b,context:c}):this._events.set(a,[{callback:b,context:c}]),this}},{key:"once",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e=function e(){for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];c.off(a,e,d),b.call.apply(b,[d].concat(g))};return this.on(a,e,d)}},{key:"off",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",b=arguments[1],c=arguments[2];if(!this._events)return this;for(var d=this._events,e="*"===a?Object.keys(d):[a],g=e.length,h=0;h<g;h++){var i=e[h],j=d.get(i);if(!j)break;if(j.length)if(b||c){for(var k=j.length-1;k>=0;k--)b&&b!==j[k].callback||c&&c!==j[k].context||(0,f.removeItems)(j,k,1);j.length||d.delete(i)}else(0,f.removeItems)(j,0,j.length),d.delete(i);else d.delete(i)}return this}},{key:"trigger",value:function(a){if(!this._events)return this;var b=this._events.get(a);if(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=!0,g=!1,h=void 0;try{for(var i,j=b[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k,l=i.value;(k=l.callback).call.apply(k,[l.context].concat(d))}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}}return this}},{key:"destroy",value:function(){if(this._events.size){var a=!0,b=!1,c=void 0;try{for(var d,e=this._events.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=!0,h=!1,i=void 0;try{for(var j,k=f[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;l.callback=null,l.context=null}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}f.length=0}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}this._events.clear(),this._events=null}},{key:"events",get:function(){return this._events}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,a),this._r=255&b,this._g=255&c,this._b=255&e,this._a=(0,f.clamp)(g,0,1),this._array=null,this._rgba=null}return e(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._r,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._g,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._b,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._a;return this._r=255&a,this._g=255&b,this._b=255&c,this._a=(0,f.clamp)(d,0,1),this._rgba=null,this}},{key:"setRGBA",value:function(a){return this._a=(a>>24&255)/255,this._r=a>>16&255,this._g=a>>8&255,this._b=255&a,this._rgba=a,this}},{key:"getRGBA",value:function(){return null===this._rgba&&(this._rgba=this._a&&((255*this._a|0)<<24)+(this._b<<16)+(this._g<<8)+this._r>>>0),this._rgba}},{key:"copy",value:function(a){return this.set(a.r,a.g,a.b,a.a)}},{key:"clone",value:function(){return new a(this._r,this._g,this._b,this._a)}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.r,c=a.g,d=a.b,e=a.a;return!(void 0!==b&&this.r!==b||void 0!==c&&this.g!==c||void 0!==d&&this.b!==d||void 0!==e&&this.a!==e)}},{key:"toArray",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._array||(this._array=new Float32Array(4));return a?(b[0]=this._r/255,b[1]=this._g/255,b[2]=this._b/255):(b[0]=this._r,b[1]=this._g,b[2]=this._b),b[3]=this._a,b}},{key:"destroy",value:function(){this._array&&(this._array=null),this._r=null,this._g=null,this._b=null,this._a=null,this._rgba=null}},{key:"r",get:function(){return this._r},set:function(a){this._r=255&a,this._rgba=null}},{key:"g",get:function(){return this._g},set:function(a){this._g=255&a,this._rgba=null}},{key:"b",get:function(){return this._b},set:function(a){this._b=255&a,this._rgba=null}},{key:"a",get:function(){return this._a},set:function(a){this._a=(0,f.clamp)(a,0,1),this._rgba=null}},{key:"rgba",get:function(){return this.getRGBA()},set:function(a){this.setRGBA(a)}},{key:"hex",get:function(){return(0,f.rgbToHex)(this._r,this._g,this._b)}}]),a}();b.default=g,g.AliceBlue=new g(240,248,255,1),g.AntiqueWhite=new g(250,235,215,1),g.Aqua=new g(0,255,255,1),g.Aquamarine=new g(127,255,212,1),g.Azure=new g(240,255,255,1),g.Beige=new g(245,245,220,1),g.Bisque=new g(255,228,196,1),g.Black=new g(0,0,0,1),g.BlanchedAlmond=new g(255,235,205,1),g.Blue=new g(0,0,255,1),g.BlueViolet=new g(138,43,226,1),g.Brown=new g(165,42,42,1),g.BurlyWood=new g(222,184,135,1),g.CadetBlue=new g(95,158,160,1),g.Chartreuse=new g(127,255,0,1),g.Chocolate=new g(210,105,30,1),g.Coral=new g(255,127,80,1),g.CornflowerBlue=new g(100,149,237,1),g.Cornsilk=new g(255,248,220,1),g.Crimson=new g(220,20,60,1),g.Cyan=new g(0,255,255,1),g.DarkBlue=new g(0,0,139,1),g.DarkCyan=new g(0,139,139,1),g.DarkGoldenrod=new g(184,134,11,1),g.DarkGray=new g(169,169,169,1),g.DarkGreen=new g(0,100,0,1),g.DarkKhaki=new g(189,183,107,1),g.DarkMagenta=new g(139,0,139,1),g.DarkOliveGreen=new g(85,107,47,1),g.DarkOrange=new g(255,140,0,1),g.DarkOrchid=new g(153,50,204,1),g.DarkRed=new g(139,0,0,1),g.DarkSalmon=new g(233,150,122,1),g.DarkSeaGreen=new g(143,188,139,1),g.DarkSlateBlue=new g(72,61,139,1),g.DarkSlateGray=new g(47,79,79,1),g.DarkTurquoise=new g(0,206,209,1),g.DarkViolet=new g(148,0,211,1),g.DeepPink=new g(255,20,147,1),g.DeepSkyBlue=new g(0,191,255,1),g.DimGray=new g(105,105,105,1),g.DodgerBlue=new g(30,144,255,1),g.Firebrick=new g(178,34,34,1),g.FloralWhite=new g(255,250,240,1),g.ForestGreen=new g(34,139,34,1),g.Fuchsia=new g(255,0,255,1),g.Gainsboro=new g(220,220,220,1),g.GhostWhite=new g(248,248,255,1),g.Gold=new g(255,215,0,1),g.Goldenrod=new g(218,165,32,1),g.Gray=new g(128,128,128,1),g.Green=new g(0,128,0,1),g.GreenYellow=new g(173,255,47,1),g.Honeydew=new g(240,255,240,1),g.HotPink=new g(255,105,180,1),g.IndianRed=new g(205,92,92,1),g.Indigo=new g(75,0,130,1),g.Ivory=new g(255,255,240,1),g.Khaki=new g(240,230,140,1),g.Lavender=new g(230,230,250,1),g.LavenderBlush=new g(255,240,245,1),g.LawnGreen=new g(124,252,0,1),g.LemonChiffon=new g(255,250,205,1),g.LightBlue=new g(173,216,230,1),g.LightCoral=new g(240,128,128,1),g.LightCyan=new g(224,255,255,1),g.LightGoldenrodYellow=new g(250,250,210,1),g.LightGray=new g(211,211,211,1),g.LightGreen=new g(144,238,144,1),g.LightPink=new g(255,182,193,1),g.LightSalmon=new g(255,160,122,1),g.LightSeaGreen=new g(32,178,170,1),g.LightSkyBlue=new g(135,206,250,1),g.LightSlateGray=new g(119,136,153,1),g.LightSteelBlue=new g(176,196,222,1),g.LightYellow=new g(255,255,224,1),g.Lime=new g(0,255,0,1),g.LimeGreen=new g(50,205,50,1),g.Linen=new g(250,240,230,1),g.Magenta=new g(255,0,255,1),g.Maroon=new g(128,0,0,1),g.MediumAquamarine=new g(102,205,170,1),g.MediumBlue=new g(0,0,205,1),g.MediumOrchid=new g(186,85,211,1),g.MediumPurple=new g(147,112,219,1),g.MediumSeaGreen=new g(60,179,113,1),g.MediumSlateBlue=new g(123,104,238,1),g.MediumSpringGreen=new g(0,250,154,1),g.MediumTurquoise=new g(72,209,204,1),g.MediumVioletRed=new g(199,21,133,1),g.MidnightBlue=new g(25,25,112,1),g.MintCream=new g(245,255,250,1),g.MistyRose=new g(255,228,225,1),g.Moccasin=new g(255,228,181,1),g.NavajoWhite=new g(255,222,173,1),g.Navy=new g(0,0,128,1),g.OldLace=new g(253,245,230,1),g.Olive=new g(128,128,0,1),g.OliveDrab=new g(107,142,35,1),g.Orange=new g(255,165,0,1),g.OrangeRed=new g(255,69,0,1),g.Orchid=new g(218,112,214,1),g.PaleGoldenrod=new g(238,232,170,1),g.PaleGreen=new g(152,251,152,1),g.PaleTurquoise=new g(175,238,238,1),g.PaleVioletRed=new g(219,112,147,1),g.PapayaWhip=new g(255,239,213,1),g.PeachPuff=new g(255,218,185,1),g.Peru=new g(205,133,63,1),g.Pink=new g(255,192,203,1),g.Plum=new g(221,160,221,1),g.PowderBlue=new g(176,224,230,1),g.Purple=new g(128,0,128,1),g.Red=new g(255,0,0,1),g.RosyBrown=new g(188,143,143,1),g.RoyalBlue=new g(65,105,225,1),g.SaddleBrown=new g(139,69,19,1),g.Salmon=new g(250,128,114,1),g.SandyBrown=new g(244,164,96,1),g.SeaGreen=new g(46,139,87,1),g.SeaShell=new g(255,245,238,1),g.Sienna=new g(160,82,45,1),g.Silver=new g(192,192,192,1),g.SkyBlue=new g(135,206,235,1),g.SlateBlue=new g(106,90,205,1),g.SlateGray=new g(112,128,144,1),g.Snow=new g(255,250,250,1),g.SpringGreen=new g(0,255,127,1),g.SteelBlue=new g(70,130,180,1),g.Tan=new g(210,180,140,1),g.Teal=new g(0,128,128,1),g.Thistle=new g(216,191,216,1),g.Tomato=new g(255,99,71,1),g.TransparentBlack=new g(0,0,0,0),g.TransparentWhite=new g(255,255,255,0),g.Turquoise=new g(64,224,208,1),g.Violet=new g(238,130,238,1),g.Wheat=new g(245,222,179,1),g.White=new g(255,255,255,1),g.WhiteSmoke=new g(245,245,245,1),g.Yellow=new g(255,255,0,1),g.YellowGreen=new g(154,205,50,1)},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this._width=b,this._height=c}return e(a,[{key:"set",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._width=a,this._height=b,this}},{key:"add",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._width+=a,this._height+=b,this}},{key:"subtract",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._width-=a,this._height-=b,this}},{key:"scale",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._width*=a,this._height*=b,this}},{key:"divide",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._width/=a,this._height/=b,this}},{key:"copy",value:function(a){return this._width=a.width,this._height=a.height,this}},{key:"clone",value:function(){return new a(this._width,this._height)}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.width,c=a.height;return!(void 0!==b&&this.width!==b||void 0!==c&&this.height!==c)}},{key:"destroy",value:function(){this._width=null,this._height=null}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]),a}();b.default=f,f.Empty=new f(0,0),f.Temp=new f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(0),h=c(1),i=c(3),j=d(i),k=c(8),l=d(k),m=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.scaleMode,f=void 0===d?j.default.SCALE_MODE:d,h=c.wrapMode,i=void 0===h?j.default.WRAP_MODE:h,k=c.premultiplyAlpha,m=void 0===k?j.default.PREMULTIPLY_ALPHA:k,n=c.generateMipMap,o=void 0===n?j.default.GENERATE_MIPMAP:n;e(this,a),this._source=null,this._size=new l.default(-1,-1),this._context=null,this._texture=null,this._scaleMode=null,this._wrapMode=null,this._premultiplyAlpha=null,this._generateMipMap=null,this._flipY=!1,this._flags=g.TEXTURE_FLAGS.NONE,this.setScaleMode(f),this.setWrapMode(i),this.premultiplyAlpha=m,this.generateMipMap=o,b&&this.setSource(b)}return f(a,[{key:"connect",value:function(a){return this._context||(this._context=a,this._texture=a.createTexture()),this}},{key:"disconnect",value:function(){return this.unbindTexture(),this._context&&(this._context.deleteTexture(this._texture),this._context=null,this._texture=null),this}},{key:"bindTexture",value:function(a){if(!this._context)throw new Error("Texture has to be connected first!");var b=this._context;return void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this._texture),this.update(),this}},{key:"unbindTexture",value:function(){if(this._context){var a=this._context
;a.bindTexture(a.TEXTURE_2D,null)}return this}},{key:"setScaleMode",value:function(a){return this._scaleMode!==a&&(this._scaleMode=a,this._flags=(0,h.addFlag)(g.TEXTURE_FLAGS.SCALE_MODE,this._flags)),this}},{key:"setWrapMode",value:function(a){return this._wrapMode!==a&&(this._wrapMode=a,this._flags=(0,h.addFlag)(g.TEXTURE_FLAGS.WRAP_MODE,this._flags)),this}},{key:"setSource",value:function(a){return this._source!==a&&(this._source=a,this.updateSource()),this}},{key:"updateSource",value:function(){return this._flags=(0,h.addFlag)(g.TEXTURE_FLAGS.SOURCE,this._flags),this.setSize((0,h.getMediaWidth)(this._source),(0,h.getMediaHeight)(this._source)),this}},{key:"setSize",value:function(a,b){return this._size.equals({width:a,height:b})||(this._size.set(a,b),this._flags=(0,h.addFlag)(g.TEXTURE_FLAGS.SIZE,this._flags)),this}},{key:"update",value:function(){if(this._flags&&this._context){var a=this._context;if((0,h.hasFlag)(g.TEXTURE_FLAGS.SCALE_MODE,this._flags)){var b=this._scaleMode===g.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b),this._flags=(0,h.removeFlag)(g.TEXTURE_FLAGS.SCALE_MODE,this._flags)}if((0,h.hasFlag)(g.TEXTURE_FLAGS.WRAP_MODE,this._flags)){var c=this._wrapMode===g.WRAP_MODES.CLAMP_TO_EDGE&&a.CLAMP_TO_EDGE,d=this._wrapMode===g.WRAP_MODES.REPEAT&&a.REPEAT,e=c||d||a.MIRRORED_REPEAT;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e),this._flags=(0,h.removeFlag)(g.TEXTURE_FLAGS.WRAP_MODE,this._flags)}(0,h.hasFlag)(g.TEXTURE_FLAGS.PREMULTIPLY_ALPHA,this._flags)&&(a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._flags=(0,h.removeFlag)(g.TEXTURE_FLAGS.PREMULTIPLY_ALPHA,this._flags)),(0,h.hasFlag)(g.TEXTURE_FLAGS.SOURCE,this._flags)&&this._source&&((0,h.hasFlag)(g.TEXTURE_FLAGS.SIZE,this._flags)?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this._source):a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this._source),this._generateMipMap&&a.generateMipmap(a.TEXTURE_2D),this._flags=(0,h.removeFlag)(g.TEXTURE_FLAGS.SOURCE|g.TEXTURE_FLAGS.SIZE,this._flags))}return this}},{key:"destroy",value:function(){this.disconnect(),this._size.destroy(),this._size=null,this._source=null,this._scaleMode=null,this._wrapMode=null,this._premultiplyAlpha=null,this._generateMipMap=null,this._flags=null,this._context=null,this._texture=null,this._flipY=null}},{key:"source",get:function(){return this._source},set:function(a){this.setSource(a)}},{key:"size",get:function(){return this._size},set:function(a){this.setSize(a.width,a.height)}},{key:"width",get:function(){return this._size.width},set:function(a){this.setSize(a,this.height)}},{key:"height",get:function(){return this._size.height},set:function(a){this.setSize(this.width,a)}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(a){this.setScaleMode(a)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(a){this.setWrapMode(a)}},{key:"premultiplyAlpha",get:function(){return this._premultiplyAlpha},set:function(a){this._premultiplyAlpha!==a&&(this._premultiplyAlpha=a,this._flags=(0,h.addFlag)(g.TEXTURE_FLAGS.PREMULTIPLY_ALPHA,this._flags))}},{key:"generateMipMap",get:function(){return this._generateMipMap},set:function(a){this._generateMipMap=a}},{key:"flipY",get:function(){return this._flipY},set:function(a){this._flipY=a}},{key:"powerOfTwo",get:function(){return(0,h.powerOfTwo)(this.width)&&(0,h.powerOfTwo)(this.height)}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;d(this,a),this._min=b,this._max=c}return e(a,[{key:"set",value:function(a,b){return this.min=a,this.max=b,this}},{key:"copy",value:function(a){return this.set(a.min,a.max)}},{key:"clone",value:function(){return new a(this.min,this.max)}},{key:"contains",value:function(a){return a.min>this._min&&a.max<this._max}},{key:"includes",value:function(a){return a<=this._max&&a>=this._min}},{key:"overlaps",value:function(a){return!(this._min>a.max||a.min>this._max)}},{key:"getOverlap",value:function(a){return this.overlaps(a)?Math.min(this._max,a.max)-Math.max(this._min,a.min):0}},{key:"destroy",value:function(){this._min=null,this._max=null}},{key:"min",get:function(){return this._min},set:function(a){this._min=a}},{key:"max",get:function(){return this._y},set:function(a){this._max=a}}]),a}();b.default=f,f.Empty=new f(0,0),f.Temp=new f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g._channelBuffer=a,g._channels=new Float32Array(a,4*c,d),g}return g(b,a),h(b,[{key:"resetChannels",value:function(){this._channels.fill(0)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.resetChannels(),this._channelBuffer=null,this._channels=null}},{key:"channelBuffer",get:function(){return this._channelBuffer}},{key:"channels",get:function(){return this._channels}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=c(2),i=(d(h),function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,k=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;e(this,a),this.a=b,this.b=c,this.x=d,this.c=f,this.d=g,this.y=h,this.e=i,this.f=j,this.z=k,this._array=null,this._updateId=0}return f(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.a,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.b,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.x,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.c,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.d,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.y,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.e,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.f,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:this.z;return this.a=a,this.b=b,this.x=c,this.c=d,this.d=e,this.y=f,this.e=g,this.f=h,this.z=i,this._updateId++,this}},{key:"copy",value:function(a){return this.a=a.a,this.b=a.b,this.x=a.x,this.c=a.c,this.d=a.d,this.y=a.y,this.e=a.e,this.f=a.f,this.z=a.z,this}},{key:"clone",value:function(){return new a(this.a,this.b,this.x,this.c,this.d,this.y,this.e,this.f,this.z)}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.a,c=a.b,d=a.x,e=a.c,f=a.d,g=a.y,h=a.e,i=a.f,j=a.z;return!(void 0!==b&&this.a!==b||void 0!==c&&this.b!==c||void 0!==d&&this.x!==d||void 0!==e&&this.c!==e||void 0!==f&&this.d!==f||void 0!==g&&this.y!==g||void 0!==h&&this.e!==h||void 0!==i&&this.f!==i||void 0!==j&&this.z!==j)}},{key:"combine",value:function(a){return this.set(this.a*a.a+this.c*a.b+this.e*a.x,this.b*a.a+this.d*a.b+this.f*a.x,this.x*a.a+this.y*a.b+this.z*a.x,this.a*a.c+this.c*a.d+this.e*a.y,this.b*a.c+this.d*a.d+this.f*a.y,this.x*a.c+this.y*a.d+this.z*a.y,this.a*a.e+this.c*a.f+this.e*a.z,this.b*a.e+this.d*a.f+this.f*a.z,this.x*a.e+this.y*a.f+this.z*a.z)}},{key:"getInverse",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,c=this.a*(this.z*this.d-this.y*this.f)-this.b*(this.z*this.c-this.y*this.e)+this.x*(this.f*this.c-this.d*this.e);return 0===c?b.copy(a.Identity):b.set((this.z*this.d-this.y*this.f)/c,(this.z*this.c-this.y*this.e)/-c,(this.f*this.c-this.d*this.e)/c,(this.z*this.b-this.x*this.f)/-c,(this.z*this.a-this.x*this.e)/c,(this.f*this.a-this.b*this.e)/-c,(this.y*this.b-this.x*this.d)/c,(this.y*this.a-this.x*this.c)/-c,(this.d*this.a-this.b*this.c)/c)}},{key:"translate",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return this.combine(a.Temp.set(1,0,b,0,1,c,0,0,1))}},{key:"rotate",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,e=(0,g.degreesToRadians)(b),f=Math.cos(e),h=Math.sin(e);return this.combine(a.Temp.set(f,-h,c*(1-f)+d*h,h,f,d*(1-f)-c*h,0,0,1))}},{key:"scale",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;return this.combine(a.Temp.set(b,0,d*(1-b),0,c,e*(1-c),0,0,1))}},{key:"toArray",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._array||(this._array=new Float32Array(9));return a?(b[0]=this.a,b[1]=this.b,b[2]=this.x,b[3]=this.c,b[4]=this.d,b[5]=this.y,b[6]=this.e,b[7]=this.f,b[8]=this.z):(b[0]=this.a,b[1]=this.c,b[2]=this.e,b[3]=this.b,b[4]=this.d,b[5]=this.f,b[6]=this.x,b[7]=this.y,b[8]=this.z),b}},{key:"destroy",value:function(){this._array&&(this._array=null),this.a=null,this.b=null,this.x=null,this.c=null,this.d=null,this.y=null,this.e=null,this.f=null,this.z=null}}]),a}());b.default=i,i.Identity=new i(1,0,0,0,1,0,0,0,1),i.Temp=new i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(18),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"process",value:function(a){return a.arrayBuffer()}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"storageType",get:function(){return"arrayBuffer"}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(13),k=d(j),l=c(39),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.type,e=c.createMediaElement,f=c.decodeAudioBuffer,g=c.mimeType,h=c.loadEvent;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,null).then(function(a){return new m.default(d,a,{mimeType:g,loadEvent:h})}).then(function(a){return e?a.createMediaElement().then(function(b){return a}):a}).then(function(a){return f?a.decodeAudioBuffer().then(function(b){return a}):a})}},{key:"storageType",get:function(){return"mediaSource"}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(2),i=d(h),j=c(10),k=d(j),l=c(20),m=(d(l),c(0)),n=c(1),o=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.shapeA,d=b.shapeB,e=b.distance,g=void 0===e?0:e,h=b.separation,j=void 0===h?i.default.Empty:h,k=b.shapeAInB,l=void 0!==k&&k,m=b.shapeBInA,n=void 0!==m&&m;f(this,a),this._shapeA=c,this._shapeB=d,this._distance=g,this._separation=j.clone(),this._shapeAInB=l,this._shapeBInA=n}return g(a,[{key:"destroy",value:function(){this._shapeA=null,this._shapeB=null,this._distance=null,this._separation=null,this._shapeAInB=null,this._shapeBInA=null}},{key:"shapeA",get:function(){return this._shapeA},set:function(a){this._shapeA=a}},{key:"shapeB",get:function(){return this._shapeB},set:function(a){this._shapeB=a}},{key:"distance",get:function(){return this._distance},set:function(a){this._distance=a}},{key:"separation",get:function(){return this._separation},set:function(a){this._separation.copy(a)}},{key:"shapeAInB",get:function(){return this._shapeAInB},set:function(a){this._shapeAInB=a}},{key:"shapeBInA",get:function(){return this._shapeBInA},set:function(a){this._shapeBInA=a}}],[{key:"intersectionSAT",value:function(a,b){for(var c=a.getNormals(),d=b.getNormals(),e=c.length,f=d.length,g=new k.default,h=new k.default,i=0;i<e;i++){var j=c[i];if(a.project(j,g),b.project(j,h),!g.overlaps(h))return!1}for(var l=0;l<f;l++){var m=d[l];if(a.project(m,g),b.project(m,h),!g.overlaps(h))return!1}return!0}},{key:"collisionSAT",value:function(b,c){for(var d,f=b.getNormals(),g=c.getNormals(),h=f.length,j=g.length,l=new k.default,m=new k.default,n=new i.default,o=!1,p=!1,q=!0,r=!0,s=1/0,t=void 0,u=0;u<h;u++){var v=f[u];if(b.project(v,l),c.project(v,m),!l.overlaps(m))return null;t=l.getOverlap(m),o=m.contains(l),p=l.contains(m),!o&&q&&(q=!1),!p&&r&&(r=!1),(o||p)&&(t+=Math.min(Math.abs(l.min-m.min),Math.abs(l.max-m.max))),t<s&&(s=t,n.copy(v))}for(var w=0;w<j;w++){var x=g[w];if(b.project(x,l),c.project(x,m),!l.overlaps(m))return null;t=l.getOverlap(m),o=m.contains(l),p=l.contains(m),!o&&q&&(q=!1),!p&&r&&(r=!1),(o||p)&&(t+=Math.min(Math.abs(l.min-m.min),Math.abs(l.max-m.max))),t<s&&(s=t,n.copy(x))}return new a((d={shapeA:b},e(d,"shapeA",b),e(d,"distance",s),e(d,"separation",n),e(d,"shapeAInB",q),e(d,"shapeBInA",r),d))}},{key:"intersectionRectRect",value:function(a,b){return!(b.left>a.right||b.top>a.bottom)&&!(a.left>b.right||a.top>b.bottom)}},{key:"intersectionCircleCircle",value:function(a,b){return a.position.distanceTo(b.x,b.y)<=a.radius+b.radius}},{key:"intersectionCircleRect",value:function(a,b){var c=b.width/2,d=b.height/2,e=a.radius,f=Math.abs(a.x-b.x),g=Math.abs(a.y-b.y);return!(f>c+e)&&(!(g>d+e)&&(f<=c||(g<=d||a.position.distanceTo(b.x-c,b.y-d)<=e)))}},{key:"intersectionPolyCircle",value:function(a,b){for(var c=a.points,d=b.x-a.x,e=b.y-a.y,f=new i.default,g=new i.default,h=new i.default,j=new i.default,k=c.length,l=0;l<k;l++){var o=c[l],p=c[(l+1)%k],q=(0,n.getVornoiRegion)(h.set(p.x-o.x,p.y-o.y),f.set(d-o.x,e-o.y));if(q===m.VORONOI.LEFT){var r=c[0===l?k-1:l-1];if(j.set(o.x-r.x,o.y-r.y),g.set(d-r.x,e-r.y),(0,n.getVornoiRegion)(j,g)===m.VORONOI.RIGHT&&f.len>b.radius)return!1}else if(q===m.VORONOI.RIGHT){var s=c[(l+2)%k];if(j.set(s.x-p.x,s.y-p.y),g.set(d-p.x,e-p.y),(0,n.getVornoiRegion)(j,g)===m.VORONOI.LEFT&&g.len>b.radius)return!1}else{var t=h.perp().normalize(),u=f.dot(t.x,t.y);if(u>0&&Math.abs(u)>b.radius)return!1}}return!0}},{key:"collisionRectRect",value:function(b,c){return c.left>b.right||c.top>b.bottom?null:b.left>c.right||b.top>c.bottom?null:new a({shapeA:b,shapeB:c,distance:0,separation:i.default.Empty,shapeAInB:c.containsRect(b),shapeBInA:b.containsRect(c)})}},{key:"collisionCircleCircle",value:function(b,c){var d=b.position.distanceTo(c.x,c.y),e=b.radius+c.radius;return d>e?null:new a({shapeA:b,shapeB:c,distance:d,separation:new i.default(c.x-b.x,c.y-b.y).normalize().scale(e-d),shapeAInB:b.radius<=c.radius&&d<=c.radius-b.radius,shapeBInA:c.radius<=b.radius&&d<=b.radius-c.radius})}},{key:"collisionCircleRect",value:function(b,c){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=c.width/2,f=c.height/2,g=b.position.distanceTo(c.x-e,c.y-f),h=b.radius<=Math.min(e,f)&&g<=Math.min(e,f)-b.radius,j=Math.max(e,f)<=b.radius&&g<=b.radius-Math.max(e,f);return g<=b.radius?new a({shapeA:d?c:b,shapeB:d?b:c,distance:g,separation:i.default.Empty,shapeAInB:d?j:h,shapeBInA:d?h:j}):null}},{key:"collisionPolyCircle",value:function(b,c){for(var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=b.points,f=c.x-b.x,g=c.y-b.y,h=c.radius,j=new i.default,k=new i.default,l=new i.default,o=new i.default,p=e.length,q=new i.default,r=!0,s=!0,t=0,u=0;u<p;u++){var v=e[u],w=e[(u+1)%p],x=(0,n.getVornoiRegion)(l.set(w.x-v.x,w.y-v.y),j.set(f-v.x,g-v.y));if(j.len>h&&(r=!1),x===m.VORONOI.LEFT){var y=e[0===u?p-1:u-1];if(o.set(v.x-y.x,v.y-y.y),k.set(f-y.x,g-y.y),(0,n.getVornoiRegion)(o,k)===m.VORONOI.RIGHT){var z=j.len;if(z>h)return null;Math.abs(h-z)<Math.abs(t)&&(t=h-z,q.copy(j).normalize()),s=!1}}else if(x===m.VORONOI.RIGHT){var A=e[(u+2)%p];if(o.set(A.x-w.x,A.y-w.y),k.set(f-w.x,g-w.y),(0,n.getVornoiRegion)(o,k)===m.VORONOI.LEFT){var B=k.len;if(B>h)return null;Math.abs(h-B)<Math.abs(t)&&(t=h-B,q.copy(k).normalize()),s=!1}}else{var C=l.perp().normalize(),D=j.dot(C.x,C.y);if(D>0&&Math.abs(D)>h)return null;(D>=0||h-D<2*h)&&(s=!1),Math.abs(h-D)<Math.abs(t)&&(t=h-D,q.copy(C))}}return new a({shapeA:d?c:b,shapeB:d?b:c,distance:0,separation:q.scale(t),shapeAInB:d?s:r,shapeBInA:d?r:s})}}]),a}();b.default=o},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.TIME.MILLISECONDS;d(this,a),this._milliseconds=b*c}return e(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.TIME.MILLISECONDS;return this._milliseconds=a*b,this}},{key:"setMilliseconds",value:function(a){return this.milliseconds=a,this}},{key:"setSeconds",value:function(a){return this.seconds=a,this}},{key:"setMinutes",value:function(a){return this.minutes=a,this}},{key:"setHours",value:function(a){return this.hours=a,this}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.milliseconds,c=a.seconds,d=a.minutes,e=a.hours;return!(void 0!==b&&this.milliseconds!==b||void 0!==c&&this.seconds!==c||void 0!==d&&this.minutes!==d||void 0!==e&&this.hours!==e)}},{key:"greaterThan",value:function(a){return this._milliseconds>a.milliseconds}},{key:"lessThan",value:function(a){return this._milliseconds<a.milliseconds}},{key:"clone",value:function(){return new a(this._milliseconds)}},{key:"copy",value:function(a){return this._milliseconds=a.milliseconds,this}},{key:"add",value:function(a){return this._milliseconds+=a.milliseconds,this}},{key:"subtract",value:function(a){return this._milliseconds-=a.milliseconds,this}},{key:"destroy",value:function(){this._milliseconds=null}},{key:"milliseconds",get:function(){return this._milliseconds},set:function(a){this._milliseconds=a}},{key:"seconds",get:function(){return this._milliseconds/f.TIME.SECONDS},set:function(a){this._milliseconds=a*f.TIME.SECONDS}},{key:"minutes",get:function(){return this._milliseconds/f.TIME.MINUTES},set:function(a){this._milliseconds=a*f.TIME.MINUTES}},{key:"hours",get:function(){return this._milliseconds/f.TIME.HOURS},set:function(a){this._milliseconds=a*f.TIME.HOURS}}]),a}();b.default=g,g.Empty=new g(0),g.Temp=new g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"apply",value:function(a,b){throw new Error("Method not implemented!")}},{key:"clone",value:function(){throw new Error("Method not implemented!")}},{key:"destroy",value:function(){throw new Error("Method not implemented!")}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"request",value:function(a,b){return fetch(a,b)}},{key:"process",value:function(a){return Promise.resolve(null)}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"load",value:function(a,b,c){var d=this;return this.request(a,b).then(function(a){return d.process(a)}).then(function(a){return d.create(a,c)})}},{key:"destroy",value:function(){}},{key:"storageType",get:function(){return"resource"}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(24),k=d(j),l=c(4),m=d(l),n=c(2),o=d(n),p=c(10),q=d(p),r=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._texture=null,c._textureFrame=new m.default,c._spriteData=new ArrayBuffer(48),c._vertexData=new Float32Array(c._spriteData,0,8),c._texCoordData=new Uint32Array(c._spriteData,32,4),c._updateTexCoords=!0,a&&c.setTexture(a),c}return g(b,a),h(b,[{key:"setTexture",value:function(a){return this._texture!==a&&(this._texture=a,this.updateTexture()),this}},{key:"updateTexture",value:function(){return this._texture&&(this._texture.updateSource(),this.resetTextureFrame()),this}},{key:"setTextureFrame",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=this.width,d=this.height;return this._textureFrame.copy(a),this._updateTexCoords=!0,this.localBounds.set(0,0,a.width,a.height),b?(this.width=a.width,this.height=a.height):(this.width=c,this.height=d),this}},{key:"resetTextureFrame",value:function(){return this.setTextureFrame(m.default.Temp.set(0,0,this._texture.width,this._texture.height))}},{key:"render",value:function(a){if(this.visible&&a.insideViewport(this)){var b=a.getRenderer("sprite");a.setRenderer(b),b.render(this);var c=!0,d=!1,e=void 0;try{for(var f,g=this.children[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){f.value.render(a)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}return this}},{key:"getVertices",value:function(){var a=this.vertexData;return[new o.default(a[0],a[1]),new o.default(a[2],a[3]),new o.default(a[6],a[7]),new o.default(a[4],a[5])]}},{key:"getNormals",value:function(){for(var a=this.getVertices(),b=a.length,c=[],d=0;d<b;d++){var e=a[d],f=a[(d+1)%b];c.push(f.clone().subtract(e.x,e.y).perp().normalize())}return c}},{key:"project",value:function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new q.default,c=this.getVertices(),d=c.length,e=c[0],f=e.x,g=e.y,h=a.dot(f,g),i=h,j=1;j<d;j++){var k=c[j],l=k.x,m=k.y,n=a.dot(l,m);h=Math.min(h,n),i=Math.max(i,n)}return b.set(h,i)}},{key:"contains",value:function(a,b){if(this.rotation%90==0)return this.getBounds().contains(a,b);var c=this.getVertices(),d=c[0],e=d.x,f=d.y,g=c[1],h=g.x,i=g.y,j=c[2],k=j.x,l=j.y,m=o.default.Temp,n=m.set(h-e,i-f),p=n.dot(a-e,b-f),q=n.dot(n.x,n.y),r=m.set(k-h,l-i),s=r.dot(a-h,b-i),t=r.dot(r.x,r.y);return p>0&&p<=q&&s>0&&s<=t}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._textureFrame.destroy(),this._textureFrame=null,this._texture=null,this._spriteData=null,this._vertexData=null,this._texCoordData=null,this._updateTexCoords=null}},{key:"texture",get:function(){return this._texture},set:function(a){this.setTexture(a)}},{key:"textureFrame",get:function(){return this._textureFrame},set:function(a){this.setTextureFrame(a)}},{key:"vertexData",get:function(){var a=this.getLocalBounds(),b=a.left,c=a.top,d=a.right,e=a.bottom,f=this.getGlobalTransform(),g=f.a,h=f.b,i=f.c,j=f.d,k=f.x,l=f.y;return this._vertexData[0]=b*g+c*h+k,this._vertexData[1]=b*i+c*j+l,this._vertexData[2]=d*g+c*h+k,this._vertexData[3]=d*i+c*j+l,this._vertexData[4]=b*g+e*h+k,this._vertexData[5]=b*i+e*j+l,this._vertexData[6]=d*g+e*h+k,this._vertexData[7]=d*i+e*j+l,this._vertexData}},{key:"texCoordData",get:function(){if(this._updateTexCoords){var a=this._texture,b=a.width,c=a.height,d=this._textureFrame,e=d.left,f=d.top,g=d.right,h=d.bottom,i=e/b*65535&65535,j=(f/c*65535&65535)<<16,k=g/b*65535&65535,l=(h/c*65535&65535)<<16;this._texture.flipY?(this._texCoordData[0]=l|i,this._texCoordData[1]=l|k,this._texCoordData[2]=j|i,this._texCoordData[3]=j|k):(this._texCoordData[0]=j|i,this._texCoordData[1]=j|k,this._texCoordData[2]=l|i,this._texCoordData[3]=l|k),this._updateTexCoords=!1}return this._texCoordData}},{key:"width",get:function(){return Math.abs(this.scale.x)*this._textureFrame.width},set:function(a){this.scale.x=a/this._textureFrame.width}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._textureFrame.height},set:function(a){this.scale.y=a/this._textureFrame.height}}]),b}(k.default);b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(10),h=d(g),i=c(2),j=d(i),k=c(4),l=d(k),m=c(15),n=d(m),o=c(27),p=d(o),q=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e(this,a),this._position=new j.default(b,c),this._points=d.map(function(a){return a.clone()})}return f(a,[{key:"setPosition",value:function(a,b){return this._position.set(a,b),this}},{key:"setPoints",value:function(a){for(var b=this._points,c=b.length,d=c-a.length,e=0;e<c;e++)b[e].copy(a[e]);if(d>0){var f=!0,g=!1,h=void 0;try{for(var i,j=b.splice(a.length,d)[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){i.value.destroy()}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}}else if(d<0)for(var k=c;k<a.length;k++)b.push(a[k].clone())}},{key:"set",value:function(a,b,c){return this._position.set(a,b),this.setPoints(c),this}},{key:"copy",value:function(a){return this._position.copy(a.position),this.setPoints(a.points),this}},{key:"clone",value:function(){return new a(this.x,this.y,this.points)}},{key:"equals",value:function(){
var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.x,c=a.y,d=a.points;return(void 0===b||this.x===b)&&(void 0===c||this.y===c)&&(void 0===d||this.points.length===d.length&&this.points.every(function(a,b){return a.equals(d[b])}))}},{key:"getBounds",value:function(){var a=1/0,b=1/0,c=-1/0,d=-1/0,e=!0,f=!1,g=void 0;try{for(var h,i=this._points[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;a=Math.min(j.x,a),b=Math.min(j.y,b),c=Math.max(j.x,c),d=Math.max(j.y,d)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return new l.default(this.x+a,this.y+b,c-a,d-b)}},{key:"getNormals",value:function(){for(var a=[],b=this._points.length,c=0;c<b;c++){var d=this._points[c],e=this._points[(c+1)%b];a.push(e.clone().subtract(d.x,d.y).perp().normalize())}return a}},{key:"project",value:function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.default,c=this._points,d=c.length,e=c[0],f=e.x,g=e.y,i=a.dot(f,g),j=i,k=1;k<d;k++){var l=c[k],m=l.x,n=l.y,o=a.dot(m,n);i=Math.min(i,o),j=Math.max(j,o)}return b.set(i,j)}},{key:"contains",value:function(a,b,c){for(var d=this._points,e=d.length,f=!1,g=0,h=e-1;g<e;h=g++){var i=d[g],j=d[h],k=i.x,l=i.y,m=j.x,n=j.y;c&&(k=i.x*c.a+i.y*c.b+c.x,l=i.x*c.c+i.y*c.d+c.y,m=j.x*c.a+j.y*c.b+c.x,n=j.x*c.c+j.y*c.d+c.y),(l<=b&&b<n||n<=b&&b<l)&&a<(m-k)/(n-l)*(b-l)+k&&(f=!f)}return f}},{key:"intersets",value:function(b){return b instanceof a?n.default.intersectionSAT(this,b):b instanceof l.default?n.default.intersectionSAT(this,b):b instanceof p.default&&n.default.intersectionPolyCircle(this,b)}},{key:"getCollision",value:function(b){return b instanceof a?n.default.collisionSAT(this,b):b instanceof l.default?n.default.collisionSAT(this,b):b instanceof p.default?n.default.collisionPolyCircle(this,b):null}},{key:"destroy",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._points[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.destroy()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._position.destroy(),this._position=null,this._points.length=0,this._points=null}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a}},{key:"points",get:function(){return this._points},set:function(a){this.setPoints(a)}}]),a}();b.default=q,q.Empty=new q(0,0,[]),q.Temp=new q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(13),k=d(j),l=c(1),m=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.mimeType,e=void 0===d?(0,l.determineMimeType)(a):d;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,null).then(function(a){return new Blob([a],{type:e})})}},{key:"storageType",get:function(){return"blob"}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(21),k=d(j),l=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._objectURLs=new Set,a}return g(b,a),h(b,[{key:"create",value:function(a){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=d.mimeType;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{mimeType:e}).then(function(a){return new Promise(function(b,d){var e=new Image,f=URL.createObjectURL(a);c._objectURLs.add(f),e.addEventListener("load",function(){return b(e)}),e.addEventListener("error",function(){return d(Error("Error loading image source."))}),e.addEventListener("abort",function(){return d(Error("Image loading was canceled."))}),e.src=f})})}},{key:"destroy",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._objectURLs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;URL.revokeObjectURL(f)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._objectURLs.clear(),this._objectURLs=null}},{key:"objectURLs",get:function(){return this._objectURLs}},{key:"storageType",get:function(){return"image"}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(1),k=c(6),l=d(k),m=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._mediaSource=a,d._mediaElement=a.mediaElement,d._duration=0,d._volume=1,d._speed=1,d._loop=!1,d._muted=!1,void 0!==c&&d.applyOptions(c),d}return g(b,a),h(b,[{key:"play",value:function(a){return this.paused&&(this.applyOptions(a),this._mediaElement.play(),this.trigger("start")),this}},{key:"pause",value:function(){return this.playing&&(this._mediaElement.pause(),this.trigger("stop")),this}},{key:"stop",value:function(){return this.pause(),this.currentTime=0,this}},{key:"toggle",value:function(a){return this.paused?this.play(a):this.pause()}},{key:"applyOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.volume,c=a.loop,d=a.speed,e=a.time,f=a.muted;return void 0!==b&&(this.volume=b),void 0!==c&&(this.loop=c),void 0!==d&&(this.speed=d),void 0!==e&&(this.currentTime=e),void 0!==f&&(this.muted=f),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.stop(),this._mediaSource=null,this._mediaElement=null,this._duration=null,this._volume=null,this._speed=null,this._loop=null,this._muted=null}},{key:"mediaSource",get:function(){return this._mediaSource}},{key:"mediaElement",get:function(){return this._mediaElement}},{key:"duration",get:function(){return this._duration}},{key:"progress",get:function(){var a=this.currentTime,b=this.duration;return a%b/b}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,j.clamp)(a,0,2);this.volume!==b&&(this._mediaElement.volume=this._volume=b)}},{key:"loop",get:function(){return this._loop},set:function(a){var b=!!a;this.loop!==b&&(this._mediaElement.loop=this._loop=b)}},{key:"speed",get:function(){return this._speed},set:function(a){var b=Math.max(0,a);this.speed!==b&&(this._mediaElement.playbackRate=this._speed=b)}},{key:"currentTime",get:function(){return this._mediaElement.currentTime},set:function(a){this._mediaElement.currentTime=Math.max(0,a)}},{key:"muted",get:function(){return this._muted},set:function(a){var b=!!a;this.muted!==b&&(this._mediaElement.muted=this._muted=b)}},{key:"paused",get:function(){return this._mediaElement.paused},set:function(a){a?this.pause():this.play()}},{key:"playing",get:function(){return!this.paused},set:function(a){a?this.play():this.pause()}},{key:"analyserTarget",get:function(){return null}}]),b}(l.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(25),k=d(j),l=c(1),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._children=[],a}return g(b,a),h(b,[{key:"addChild",value:function(a){return this.addChildAt(a,this._children.length)}},{key:"addChildAt",value:function(a,b){if(b<0||b>this._children.length)throw new Error("The index "+b+" is out of bounds "+this._children.length);return a===this?this:(a.parent&&a.parent.removeChild(a),a.parent=this,this._children.splice(b,0,a),this)}},{key:"swapChildren",value:function(a,b){return a!==b&&(this._children[this.getChildIndex(a)]=b,this._children[this.getChildIndex(b)]=a),this}},{key:"getChildIndex",value:function(a){var b=this._children.indexOf(a);if(-1===b)throw new Error("Drawable is not a child of the container.");return b}},{key:"setChildIndex",value:function(a,b){if(b<0||b>=this._children.length)throw new Error("The index "+b+" is out of bounds "+this._children.length);return(0,l.removeItems)(this._children,this.getChildIndex(a),1),this._children.splice(b,0,a),this}},{key:"getChildAt",value:function(a){if(a<0||a>=this._children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this._children[a]}},{key:"removeChild",value:function(a){var b=this._children.indexOf(a);return-1!==b&&this.removeChildAt(b),this}},{key:"removeChildAt",value:function(a){return(0,l.removeItems)(this._children,a,1),this}},{key:"removeChildren",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._children.length,c=b-a;if(c<0||c>b)throw new Error("Values are outside the acceptable range.");return(0,l.removeItems)(this._children,a,c),this}},{key:"render",value:function(a){if(this.visible){var b=!0,c=!1,d=void 0;try{for(var e,f=this._children[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){e.value.render(a)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}return this}},{key:"updateBounds",value:function(){this._bounds.reset().addRect(this.getLocalBounds(),this.getGlobalTransform());var a=!0,b=!1,c=void 0;try{for(var d,e=this._children[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.visible&&this._bounds.addRect(f.getBounds())}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._children.length=0,this._children=null}},{key:"children",get:function(){return this._children}},{key:"width",get:function(){return Math.abs(this.scale.x)*this.bounds.width},set:function(a){this.scale.x=a/this.bounds.width}},{key:"height",get:function(){return Math.abs(this.scale.y)*this.bounds.height},set:function(a){this.scale.y=a/this.bounds.height}},{key:"left",get:function(){return this.x-this.width*this.origin.x}},{key:"top",get:function(){return this.y-this.height*this.origin.y}},{key:"right",get:function(){return this.x+this.width-this.origin.x}},{key:"bottom",get:function(){return this.y+this.height-this.origin.y}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(74),k=d(j),l=c(7),m=d(l),n=c(0),o=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._visible=!0,a._tint=m.default.White.clone(),a._blendMode=n.BLEND_MODES.NORMAL,a}return g(b,a),h(b,[{key:"setTint",value:function(a){return this._tint.copy(a),this}},{key:"setBlendMode",value:function(a){return this._blendMode=a,this}},{key:"render",value:function(a){throw new Error("Method not implemented!")}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._tint.destroy(),this._tint=null,this._visible=null,this._blendMode=null}},{key:"visible",get:function(){return this._visible},set:function(a){this._visible=a}},{key:"tint",get:function(){return this._tint},set:function(a){this.setTint(a)}},{key:"blendMode",get:function(){return this._blendMode},set:function(a){this.setBlendMode(a)}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d,g));return h._callback=a,h._scope=c||h,h}return g(b,a),h(b,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._x,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._y;return this._x===a&&this._y===b||(this._x=a,this._y=b,this._callback.call(this._scope)),this}},{key:"add",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x+a,this._y+b)}},{key:"subtract",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x-a,this._y-b)}},{key:"scale",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x*a,this._y*b)}},{key:"divide",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._x/a,this._y/b)}},{key:"normalize",value:function(){return this.divide(this.magnitude)}},{key:"copy",value:function(a){return this.set(a.x,a.y)}},{key:"clone",value:function(){return new b(this._callback,this._scope,this._x,this._y)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._callback=null,this._scope=null}},{key:"x",get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this._callback.call(this._scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this._callback.call(this._scope))}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=d(g),i=c(4),j=d(i),k=c(20),l=d(k),m=c(15),n=d(m),o=c(10),p=d(o),q=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e(this,a),this._position=new h.default(b,c),this._radius=d}return f(a,[{key:"setPosition",value:function(a,b){return this._position.set(a,b),this}},{key:"setRadius",value:function(a){return this._radius=a,this}},{key:"set",value:function(a,b,c){return this._position.set(a,b),this._radius=c,this}},{key:"copy",value:function(a){return this._position.copy(a.position),this._radius=a.radius,this}},{key:"clone",value:function(){return new a(this.x,this.y,this.radius)}},{key:"equals",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.x,c=a.y,d=a.radius;return!(void 0!==b&&this.x!==b||void 0!==c&&this.y!==c||void 0!==d&&this.radius!==d)}},{key:"getBounds",value:function(){return new j.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{key:"getNormals",value:function(){return[]}},{key:"project",value:function(a){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new p.default).set(0,0)}},{key:"contains",value:function(a,b,c){var d=this._position;return c&&(d=d.transform(c,h.default.Temp)),d.distanceTo(a,b)<=this._radius}},{key:"intersets",value:function(b){return b instanceof a?n.default.intersectionCircleCircle(this,b):b instanceof j.default?n.default.intersectionCircleRect(this,b):b instanceof l.default&&n.default.intersectionPolyCircle(b,this)}},{key:"getCollision",value:function(b){return b instanceof a?n.default.collisionCircleCircle(this,b):b instanceof j.default?n.default.collisionCircleRect(this,b):b instanceof l.default?n.default.collisionPolyCircle(b,this,!0):null}},{key:"destroy",value:function(){this._position.destroy(),this._position=null,this._radius=null}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a}},{key:"radius",get:function(){return this._radius},set:function(a){this._radius=a}}]),a}();b.default=q,q.Empty=new q(0,0,0),q.Temp=new q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(4),h=d(g),i=c(12),j=(d(i),function(){function a(){e(this,a),this._minX=1/0,this._minY=1/0,this._maxX=-1/0,this._maxY=-1/0,this._rect=new h.default,this._dirty=!0}return f(a,[{key:"addCoords",value:function(a,b){return this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,b),this._maxX=Math.max(this._maxX,a),this._maxY=Math.max(this._maxY,b),this._dirty=!0,this}},{key:"addRect",value:function(a,b){return b&&(a=a.transform(b,h.default.Temp)),this.addCoords(a.left,a.top).addCoords(a.right,a.bottom)}},{key:"getRect",value:function(){return this._dirty&&(this._rect.set(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY),this._dirty=!1),this._rect}},{key:"reset",value:function(){return this._minX=1/0,this._minY=1/0,this._maxX=-1/0,this._maxY=-1/0,this._dirty=!0,this}},{key:"destroy",value:function(){this._rect.destroy(),this._rect=null,this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._dirty=null}},{key:"minX",get:function(){return this._minX}},{key:"minY",get:function(){return this._minY}},{key:"maxX",get:function(){return this._maxX}},{key:"maxY",get:function(){return this._maxY}}]),a}());b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(0),h=c(16),i=d(h),j=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,a),this._startTime=0,this._timeBuffer=0,this._running=!1,this._time=new i.default,b&&this.start()}return f(a,[{key:"start",value:function(){return this._running||(this._startTime=Date.now(),this._running=!0),this}},{key:"stop",value:function(){return this._running&&(this._timeBuffer+=Date.now()-this._startTime,this._running=!1),this}},{key:"reset",value:function(){return this._timeBuffer=0,this._running=!1,this}},{key:"restart",value:function(){return this.reset(),this.start(),this}},{key:"destroy",value:function(){this._startTime=null,this._timeBuffer=null,this._running=null,this._time.destroy(),this._time=null}},{key:"running",get:function(){return this._running}},{key:"time",get:function(){return this._time}},{key:"elapsedTime",get:function(){return this._time.setMilliseconds(this.elapsedMilliseconds)}},{key:"elapsedMilliseconds",get:function(){return this._running?this._timeBuffer+(Date.now()-this._startTime):this._timeBuffer}},{key:"elapsedSeconds",get:function(){return this.elapsedMilliseconds/g.TIME.SECONDS}},{key:"elapsedMinutes",get:function(){return this.elapsedMilliseconds/g.TIME.MINUTES}},{key:"elapsedHours",get:function(){return this.elapsedMilliseconds/g.TIME.HOURS}}]),a}();b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(8),h=d(g),i=c(53),j=d(i),k=c(4),l=d(k),m=c(2),n=d(m),o=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,a),this._size=new h.default(b,c),this._root=d,this._context=null,this._framebuffer=null,this._viewport=new l.default,this._defaultView=new j.default(b/2,c/2,b,c),this._view=this._defaultView}return f(a,[{key:"connect",value:function(a){return this._context||(this._context=a,this._framebuffer=this._root?null:a.createFramebuffer()),this}},{key:"disconnect",value:function(){return this.unbindFramebuffer(),this._context&&(this._context.deleteFramebuffer(this._framebuffer),this._context=null,this._framebuffer=null),this}},{key:"bindFramebuffer",value:function(){if(!this._context)throw new Error("Texture has to be connected first!");var a=this._context;return a.bindFramebuffer(a.FRAMEBUFFER,this._framebuffer),this.updateViewport(),this}},{key:"unbindFramebuffer",value:function(){if(this._context){var a=this._context;a.bindFramebuffer(a.FRAMEBUFFER,null)}return this}},{key:"setView",value:function(a){return this._view=a||this._defaultView,this.updateViewport(),this}},{key:"resize",value:function(a,b){return this._size.equals({width:a,height:b})||(this._size.set(a,b),this.updateViewport()),this}},{key:"getViewport",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._view,b=a.viewport;return this._viewport.set(Math.round(b.x*this.width),Math.round(b.y*this.height),Math.round(b.width*this.width),Math.round(b.height*this.height))}},{key:"updateViewport",value:function(){if(this._context){var a=this._context,b=this.getViewport();a.viewport(b.x,b.y,b.width,b.height)}return this}},{key:"mapPixelToCoords",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._view,c=this.getViewport(b);return new n.default(2*(a.x-c.left)/c.width-1,1-2*(a.y-c.top)/c.height).transform(b.getInverseTransform())}},{key:"mapCoordsToPixel",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._view,c=this.getViewport(b),d=a.transform(b.getTransform(),new n.default);return d.set((d.x+1)/2*c.width+c.left|0,(1-d.y)/2*c.height+c.top|0)}},{key:"destroy",value:function(){this.disconnect(),this._defaultView.destroy(),this._defaultView=null,this._viewport.destroy(),this._viewport=null,this._size.destroy(),this._size=null,this._root=null,this._view=null}},{key:"view",get:function(){return this._view},set:function(a){this.setView(a)}},{key:"size",get:function(){return this._size},set:function(a){this.resize(a.width,a.height)}},{key:"width",get:function(){return this._size.width},set:function(a){this.resize(a,this.height)}},{key:"height",get:function(){return this._size.height},set:function(a){this.resize(this.width,a)}}]),a}();b.default=o},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"connect",value:function(a){}},{key:"disconnect",value:function(){}},{key:"bind",value:function(){}},{key:"unbind",value:function(){}},{key:"render",value:function(a){}},{key:"flush",value:function(){}},{key:"destroy",value:function(){this._renderManager=null,this._context=null}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(57),i=d(h),j=c(58),k=d(j),l=c(0),m=function(){function a(){f(this,a),this._vertexSource=null,this._fragmentSource=null,this._uniforms=new Map,this._attributes=new Map,this._uniformLocations=new Map,this._attributeLocations=new Map,this._context=null,this._vertexShader=null,this._fragmentShader=null,this._program=null}return g(a,[{key:"connect",value:function(a){return this._context||(this._context=a,this._vertexShader=this.createShader(a.VERTEX_SHADER,this._vertexSource),this._fragmentShader=this.createShader(a.FRAGMENT_SHADER,this._fragmentSource),this._program=this.createProgram(this._vertexShader,this._fragmentShader)),this}},{key:"disconnect",value:function(){if(this.unbindProgram(),this._context){var a=this._context;a.deleteShader(this._vertexShader),a.deleteShader(this._fragmentShader),a.deleteProgram(this._program),this._vertexShader=null,this._fragmentShader=null,this._program=null,this._context=null}return this}},{key:"bindProgram",value:function(){if(!this._context)throw new Error("Texture has to be connected first!");var a=[].concat(e(this._attributes.values())).reduce(function(a,b){return a+b.byteSize},0),b=0;this._context.useProgram(this._program);var c=!0,d=!1,f=void 0;try{for(var g,h=this._attributes.values()[Symbol.iterator]();!(c=(g=h.next()).done);c=!0){var i=g.value;i.bind(this,a,b),b+=i.byteSize}}catch(a){d=!0,f=a
}finally{try{!c&&h.return&&h.return()}finally{if(d)throw f}}var j=!0,k=!1,l=void 0;try{for(var m,n=this._uniforms.values()[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){m.value.bind(this)}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}return this}},{key:"unbindProgram",value:function(){if(this._context){this._context.useProgram(null);var a=!0,b=!1,c=void 0;try{for(var d,e=this._attributes.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.unbind()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}var f=!0,g=!1,h=void 0;try{for(var i,j=this._uniforms.values()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){i.value.unbind()}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}}return this}},{key:"setVertexSource",value:function(a){return this._vertexSource=Array.isArray(a)?a.join("\n"):a,this}},{key:"setFragmentSource",value:function(a){return this._fragmentSource=Array.isArray(a)?a.join("\n"):a,this}},{key:"setAttribute",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._attributes.has(a))throw new Error('Attribute "'+a+'" has already been defined.');return this._attributes.set(a,new i.default(a,b,c,d,e)),this}},{key:"getAttribute",value:function(a){if(!this._attributes.has(a))throw new Error('Could not find Attribute "'+a+'".');return this._attributes.get(a)}},{key:"setUniform",value:function(a,b,c){if(this._uniforms.has(a))throw new Error('Uniform "'+a+'" has already been defined.');return this._uniforms.set(a,new k.default(a,b,c)),this}},{key:"getUniform",value:function(a){if(!this._uniforms.has(a))throw new Error('Could not find Uniform "'+a+'".');return this._uniforms.get(a)}},{key:"createShader",value:function(a,b){var c=this._context,d=c.createShader(a);return c.shaderSource(d,b),c.compileShader(d),c.getShaderParameter(d,c.COMPILE_STATUS)?d:(console.log(c.getShaderInfoLog(d)),null)}},{key:"createProgram",value:function(a,b){var c=this._context,d=c.createProgram();return c.attachShader(d,a),c.attachShader(d,b),c.linkProgram(d),c.getProgramParameter(d,c.LINK_STATUS)?d:(c.detachShader(d,a),c.detachShader(d,b),c.deleteProgram(d),console.error("gl.VALIDATE_STATUS",c.getProgramParameter(d,c.VALIDATE_STATUS)),console.error("gl.getError()",c.getError()),c.getProgramInfoLog(d)&&console.warn("gl.getProgramInfoLog()",c.getProgramInfoLog(d)),null)}},{key:"getUniformLocation",value:function(a){if(!this._uniformLocations.has(a)){var b=this._context.getUniformLocation(this._program,a);if(!b)throw new Error('Uniform "'+this._name+'" is not available.');this._uniformLocations.set(a,b)}return this._uniformLocations.get(a)}},{key:"getAttributeLocation",value:function(a){if(!this._attributeLocations.has(a)){var b=this._context.getAttribLocation(this._program,a);if(-1===b)throw new Error('Attribute "'+this._name+'" is not available.');this._attributeLocations.set(a,b)}return this._attributeLocations.get(a)}},{key:"setUniformValue",value:function(a,b,c){var d=this._context,e=this.getUniformLocation(a);switch(c){case l.UNIFORM_TYPE.INT:d.uniform1i(e,b);break;case l.UNIFORM_TYPE.FLOAT:d.uniform1f(e,b);break;case l.UNIFORM_TYPE.FLOAT_VEC2:d.uniform2fv(e,b);break;case l.UNIFORM_TYPE.FLOAT_VEC3:d.uniform3fv(e,b);break;case l.UNIFORM_TYPE.FLOAT_VEC4:d.uniform4fv(e,b);break;case l.UNIFORM_TYPE.INT_VEC2:d.uniform2iv(e,b);break;case l.UNIFORM_TYPE.INT_VEC3:d.uniform3iv(e,b);break;case l.UNIFORM_TYPE.INT_VEC4:d.uniform4iv(e,b);break;case l.UNIFORM_TYPE.BOOL:d.uniform1i(e,b);break;case l.UNIFORM_TYPE.BOOL_VEC2:d.uniform2iv(e,b);break;case l.UNIFORM_TYPE.BOOL_VEC3:d.uniform3iv(e,b);break;case l.UNIFORM_TYPE.BOOL_VEC4:d.uniform4iv(e,b);break;case l.UNIFORM_TYPE.FLOAT_MAT2:d.uniformMatrix2fv(e,!1,b);break;case l.UNIFORM_TYPE.FLOAT_MAT3:d.uniformMatrix3fv(e,!1,b);break;case l.UNIFORM_TYPE.FLOAT_MAT4:d.uniformMatrix4fv(e,!1,b);break;case l.UNIFORM_TYPE.SAMPLER_2D:d.uniform1i(e,b);break;default:throw new Error('Unknown uniform type "'+c+'".')}return this}},{key:"setVertexPointer",value:function(a,b,c,d,e,f){var g=this._context,h=this.getAttributeLocation(a);return g.vertexAttribPointer(h,b,c,d,e,f),this}},{key:"toggleVertexArray",value:function(a,b){var c=this._context,d=this.getAttributeLocation(a);return b?c.enableVertexAttribArray(d):c.disableVertexAttribArray(d),this}},{key:"destroy",value:function(){this.disconnect();var a=!0,b=!1,c=void 0;try{for(var d,e=this._attributes.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.destroy()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}var f=!0,g=!1,h=void 0;try{for(var i,j=this._uniforms.values()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){i.value.destroy()}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}this._attributes.clear(),this._attributes=null,this._uniforms.clear(),this._uniforms=null,this._uniformLocations.clear(),this._uniformLocations=null,this._attributeLocations.clear(),this._attributeLocations=null,this._vertexSource=null,this._fragmentSource=null,this._context=null}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},l=c(6),m=d(l),n=c(35),o=d(n),p=c(13),q=d(p),r=c(21),s=d(r),t=c(36),u=d(t),v=c(22),w=d(v),x=c(37),y=d(x),z=c(38),A=d(z),B=c(44),C=d(B),D=c(46),E=d(D),F=c(47),G=d(F),H=c(14),I=d(H),J=c(48),K=d(J),L=c(3),M=d(L),N=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=a.resourcePath,d=void 0===c?"":c,e=a.database,h=void 0===e?null:e;f(this,b);var i=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return i._resourcePath=d,i._database=h,i._factories=new Map,i._queue=new Set,i._resources=new o.default,i._method=M.default.REQUEST_METHOD,i._mode=M.default.REQUEST_MODE,i._cache=M.default.REQUEST_CACHE,i._addFactories(),i}return h(b,a),j(b,[{key:"addFactory",value:function(a,b){return this._factories.set(a,b),this._resources.addType(a),this}},{key:"getFactory",value:function(a){if(!this._factories.has(a))throw new Error('No resource factory for type "'+a+'".');return this._factories.get(a)}},{key:"add",value:function(a,b,c){var d=!0,e=!1,f=void 0;try{for(var g,h=Object.entries(b)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var j=g.value,k=i(j,2),l=k[0],m=k[1];this.addItem(a,l,m,c)}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return this}},{key:"addItem",value:function(a,b,c,d){if(!this._factories.has(a))throw new Error('No resource factory for type "'+a+'".');return this._queue.add({type:a,name:b,path:c,options:d}),this}},{key:"load",value:function(a){var b=this,c=[].concat(e(this._queue)),d=0;return a&&this.once("complete",a,this),this._queue.clear(),this.trigger("start",c.length,d,c),c.map(function(a){return b.loadItem(a)}).reduce(function(a,e){return a.then(function(){return e}).then(function(a){return b.trigger("progress",c.length,++d,c,a)})},Promise.resolve()).then(function(){return b.trigger("complete",c.length,d,c,b._resources)})}},{key:"loadItem",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.type,d=b.name,e=b.path,f=b.options;if(this._resources.has(c,d))return Promise.resolve(this._resources.get(c,d));var g=this.getFactory(c),h=this._resourcePath+e,i={method:this._method,mode:this._mode,cache:this._cache};return this._database?this._database.loadData(g.storageType,d).then(function(b){return b.data||g.request(h,i).then(function(a){return g.process(a)}).then(function(b){return a._database.saveData(g.storageType,d,b).then(function(a){return a.data})})}).then(function(a){return g.create(a,f)}).then(function(b){return a._resources.set(c,d,b),b}):g.load(h,i,f).then(function(b){return a._resources.set(c,d,b),b})}},{key:"clear",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.events,c=void 0===b||b,d=a.queue,e=void 0===d||d,f=a.resources,g=void 0===f||f;return c&&this.off(),e&&this._queue.clear(),g&&this._resources.clear(),this}},{key:"destroy",value:function(){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this);var a=!0,c=!1,d=void 0;try{for(var e,f=this._factories.values()[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}this._database&&(this._database.destroy(),this._database=null),this._factories.clear(),this._factories=null,this._queue.clear(),this._queue=null,this._resources.destroy(),this._resources=null,this._resourcePath=null,this._method=null,this._mode=null,this._cache=null}},{key:"_addFactories",value:function(){this.addFactory("arrayBuffer",new q.default),this.addFactory("mediaSource",new I.default),this.addFactory("blob",new s.default),this.addFactory("font",new u.default),this.addFactory("music",new A.default),this.addFactory("sound",new C.default),this.addFactory("video",new K.default),this.addFactory("image",new w.default),this.addFactory("texture",new G.default),this.addFactory("string",new E.default),this.addFactory("json",new y.default)}},{key:"factories",get:function(){return this._factories}},{key:"queue",get:function(){return this._queue}},{key:"resources",get:function(){return this._resources}},{key:"resourcePath",get:function(){return this._resourcePath},set:function(a){this._resourcePath=a}},{key:"database",get:function(){return this._database},set:function(a){this._database=a}},{key:"method",get:function(){return this._method},set:function(a){this._method=a}},{key:"mode",get:function(){return this._mode},set:function(a){this._mode=a}},{key:"cache",get:function(){return this._cache},set:function(a){this._cache=a}}]),b}(m.default);b.default=N},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=Math.pow(2,32)-1,g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();d(this,a),this._state=new Uint32Array(624),this._iteration=0,this._seed=null,this._value=null,this.seed=b,this._twist()}return e(a,[{key:"reset",value:function(){this._state[0]=this._seed;for(var a=1;a<624;a++){var b=this._state[a-1]^this._state[a-1]>>>30;this._state[a]=(1812433253*((4294901760&b)>>>16)<<16)+1812433253*(65535&b)+a,this._state[a]|=0}return this._iteration=0,this}},{key:"next",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._iteration>=624&&this._twist(),this._value=this._state[this._iteration++],this._value^=this._value>>>11,this._value^=this._value<<7&2636928640,this._value^=this._value<<15&4022730752,this._value^=this._value>>>18,this._value=(this._value>>>0)/f*(b-a)+a,this._value}},{key:"destroy",value:function(){this._state=null,this._iteration=null,this._seed=null,this._value=null}},{key:"_twist",value:function(){for(var a=this._state,b=0;b<227;b++){var c=2147483648&a[b]|2147483647&a[b+1];a[b]=a[b+397]^c>>>1^2567483615*(1&c)}for(var d=227;d<623;d++){var c=2147483648&a[d]|2147483647&a[d+1];a[d]=a[d-227]^c>>>1^2567483615*(1&c)}var c=2147483648&a[623]|2147483647&a[0];a[623]=a[396]^c>>>1^2567483615*(1&c),this._iteration=0,this._value=null}},{key:"seed",get:function(){return this._value},set:function(a){return this._seed=a,this.reset(),this}},{key:"value",get:function(){return this._value}},{key:"iteration",get:function(){return this._iteration}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._resources=new Map,this._types=new Set}return e(a,[{key:"addType",value:function(a){return this._types.has(a)||(this._resources.set(a,new Map),this._types.add(a)),this}},{key:"getResources",value:function(a){if(!this._types.has(a))throw new Error('Unknown type "'+a+'".');return this._resources.get(a)}},{key:"has",value:function(a,b){return this.getResources(a).has(b)}},{key:"get",value:function(a,b){var c=this.getResources(a);if(!c.has(b))throw new Error('Missing resource "'+b+'" with type "'+a+'".');return c.get(b)}},{key:"set",value:function(a,b,c){return this.getResources(a).set(b,c),this}},{key:"remove",value:function(a,b){return this.getResources(a).delete(b),this}},{key:"clear",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._resources.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.clear()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this}},{key:"destroy",value:function(){this.clear(),this._resources.clear(),this._resources=null,this._types.clear(),this._types=null}},{key:"resources",get:function(){return this._resources}},{key:"types",get:function(){return this._types}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(13),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.family,e=c.destriptors,f=c.addToDocument,g=void 0===f||f;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,null).then(function(a){return new Promise(function(b,c){var f=new FontFace(d,a,e);f.load().then(function(){g&&document.fonts.add(f),b(f)}).catch(function(){return c(f)})})})}},{key:"storageType",get:function(){return"font"}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(18),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"process",value:function(a){return a.json()}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"storageType",get:function(){return"json"}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(14),k=d(j),l=c(40),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.type,e=void 0===d?"audio":d,f=c.createMediaElement,g=void 0===f||f,h=c.decodeAudioBuffer,j=void 0!==h&&h,k=c.mimeType,l=c.loadEvent,n=c.volume,o=c.loop,p=c.speed,q=c.time,r=c.muted;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{type:e,createMediaElement:g,decodeAudioBuffer:j,mimeType:k,loadEvent:l}).then(function(a){return new m.default(a,{volume:n,loop:o,speed:p,time:q,muted:r})})}},{key:"storageType",get:function(){return"sound"}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},h=c(1),i=c(5),j=d(i),k=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=d.mimeType,g=void 0===f?(0,h.determineMimeType)(c):f,i=d.loadEvent,j=void 0===i?"canplaythrough":i;e(this,a),this._type=b,this._arrayBuffer=c,this._mimeType=g,this._blob=new Blob([c],{type:g}),this._blobURL=URL.createObjectURL(this._blob),this._loadEvent=j,this._mediaElement=null,this._audioBuffer=null}return f(a,[{key:"createMediaElement",value:function(){var a=this;return this._mediaElement?Promise.resolve(this._mediaElement):new Promise(function(b,c){var d=document.createElement(a._type);d.addEventListener(a._loadEvent,function(){return b(a._mediaElement=d)}),d.addEventListener("error",function(){return c(Error("Error loading audio source."))}),d.addEventListener("abort",function(){return c(Error("Audio loading was canceled."))}),d.src=a._blobURL})}},{key:"decodeAudioBuffer",value:function(){var a=this;return!this._audioBuffer&&j.default.webAudio?(0,h.decodeAudioBuffer)(this._arrayBuffer).then(function(b){a._audioBuffer=b}):Promise.resolve(this._audioBuffer)}},{key:"destroy",value:function(){g(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this),URL.revokeObjectURL(this._blobURL),this._type=null,this._arrayBuffer=null,this._mimeType=null,this._blob=null,this._blobURL=null,this._loadEvent=null,this._mediaElement=null,this._audioBuffer=null}},{key:"type",get:function(){return this._type}},{key:"arrayBuffer",get:function(){return this._arrayBuffer}},{key:"mimeType",get:function(){return this._mimeType}},{key:"blob",get:function(){return this._blob}},{key:"blobURL",get:function(){return this._blobURL}},{key:"loadEvent",get:function(){return this._loadEvent}},{key:"mediaElement",get:function(){return this._mediaElement}},{key:"audioBuffer",get:function(){return this._audioBuffer}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(1),k=c(5),l=d(k),m=c(23),n=d(m),o=c(3),p=d(o),q=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.volume,g=void 0===d?p.default.VOLUME_MUSIC:d,h=c.loop,i=void 0===h?p.default.MEDIA_LOOP:h,k=c.speed,m=void 0===k?p.default.MEDIA_SPEED:k,n=c.time,o=void 0===n?p.default.MEDIA_TIME:n,q=c.muted,r=void 0===q?p.default.MEDIA_MUTED:q;e(this,b);var s=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{volume:g,loop:i,speed:m,time:o,muted:r})),t=s.mediaElement;if(!t)throw new Error("MediaElement is missing in MediaSource");return s._duration=t.duration,s._volume=t.volume,s._speed=t.playbackRate,s._loop=t.loop,s._muted=t.muted,l.default.webAudio&&(s._gainNode=j.audioContext.createGain(),s._gainNode.gain.value=s.volume,s._gainNode.connect(j.audioContext.destination),s._sourceNode=j.audioContext.createMediaElementSource(s.mediaElement),s._sourceNode.connect(s._gainNode)),s}return g(b,a),h(b,[{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),l.default.webAudio&&(this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null)}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,j.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._gainNode&&(this._gainNode.gain.value=b))}},{key:"analyserTarget",get:function(){return this._gainNode}}]),b}(n.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(0),i=c(42),j=d(i),k=c(43),l=d(k),m=function(a){function b(){e(this,b);var a={invert:!0};return f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,[new l.default(0,h.GAMEPAD.FaceBottom),new l.default(1,h.GAMEPAD.FaceLeft),new l.default(2,h.GAMEPAD.FaceRight),new l.default(3,h.GAMEPAD.FaceTop),new l.default(4,h.GAMEPAD.ShoulderLeftBottom),new l.default(5,h.GAMEPAD.ShoulderRightBottom),new l.default(6,h.GAMEPAD.ShoulderLeftTop),new l.default(7,h.GAMEPAD.ShoulderRightTop),new l.default(8,h.GAMEPAD.Select),new l.default(9,h.GAMEPAD.Start),new l.default(10,h.GAMEPAD.LeftStick),new l.default(11,h.GAMEPAD.RightStick),new l.default(12,h.GAMEPAD.DPadUp),new l.default(13,h.GAMEPAD.DPadDown),new l.default(14,h.GAMEPAD.DPadLeft),new l.default(15,h.GAMEPAD.DPadRight),new l.default(16,h.GAMEPAD.Home)],[new l.default(0,h.GAMEPAD.LeftStickLeft,a),new l.default(0,h.GAMEPAD.LeftStickRight),new l.default(1,h.GAMEPAD.LeftStickUp,a),new l.default(1,h.GAMEPAD.LeftStickDown),new l.default(2,h.GAMEPAD.RightStickLeft,a),new l.default(2,h.GAMEPAD.RightStickRight),new l.default(3,h.GAMEPAD.RightStickUp,a),new l.default(3,h.GAMEPAD.RightStickDown)]))}return g(b,a),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._buttons=new Set(b),this._axes=new Set(c)}return e(a,[{key:"setButtons",value:function(a){this._buttons.clear();var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._buttons.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"setAxes",value:function(a){this._axes.clear();var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._axes.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"destroy",value:function(){this._buttons.clear(),this._buttons=null,this._axes.clear(),this._axes=null}},{key:"buttons",get:function(){return this._buttons},set:function(a){this.setButtons(a)}},{key:"axes",get:function(){return this._axes},set:function(a){this.setAxes(a)}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=e.invert,h=void 0!==g&&g,i=e.normalize,j=void 0!==i&&i,k=e.threshold,l=void 0===k?.2:k;d(this,a),this._index=b,this._channel=c,this._key=c%f.INPUT_CHANNELS_HANDLER,this._invert=h,this._normalize=j,this._threshold=l}return e(a,[{key:"transformValue",value:function(a){var b=a;return this._invert&&(b*=-1),this._normalize&&(b=(b+1)/2),b>this._threshold?b:0}},{key:"index",get:function(){return this._index},set:function(a){this._index=a}},{key:"channel",get:function(){return this._channel},set:function(a){this._channel=a,this._key=this._channel%f.INPUT_CHANNELS_HANDLER}},{key:"key",get:function(){return this._key},set:function(a){this._key=a%f.INPUT_CHANNELS_HANDLER,this._channel=f.INPUT_OFFSET_GAMEPAD+this._key}},{key:"invert",get:function(){return this._invert},set:function(a){this._invert=a}},{key:"normalize",get:function(){return this._normalize},set:function(a){this._normalize=a}},{key:"threshold",get:function(){return this._threshold},set:function(a){this._threshold=a}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(14),k=d(j),l=c(45),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.type,e=void 0===d?"audio":d,f=c.createMediaElement,g=void 0!==f&&f,h=c.decodeAudioBuffer,j=void 0===h||h,k=c.mimeType,l=c.loadEvent,n=c.volume,o=c.loop,p=c.speed,q=c.time,r=c.muted
;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{type:e,createMediaElement:g,decodeAudioBuffer:j,mimeType:k,loadEvent:l}).then(function(a){return new m.default(a,{volume:n,loop:o,speed:p,time:q,muted:r})})}},{key:"storageType",get:function(){return"sound"}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(1),k=c(5),l=d(k),m=c(23),n=d(m),o=c(3),p=d(o),q=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.volume,g=void 0===d?p.default.VOLUME_SOUND:d,h=c.loop,i=void 0===h?p.default.MEDIA_LOOP:h,k=c.speed,m=void 0===k?p.default.MEDIA_SPEED:k,n=c.time,o=void 0===n?p.default.MEDIA_TIME:n,q=c.muted,r=void 0===q?p.default.MEDIA_MUTED:q;e(this,b);var s=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{volume:g,loop:i,speed:m,time:o,muted:r})),t=s.audioBuffer;if(!t)throw new Error("AudioBuffer is missing in MediaSource");return s._audioBuffer=t,s._duration=t.duration,s._paused=!0,s._startTime=0,s._currentTime=0,l.default.webAudio&&(s._sourceNode=null,s._gainNode=j.audioContext.createGain(),s._gainNode.gain.value=s.volume,s._gainNode.connect(j.audioContext.destination)),s}return g(b,a),h(b,[{key:"play",value:function(a){return this._paused&&(this.applyOptions(a),this._sourceNode=this.createSourceNode(),this._startTime=j.audioContext.currentTime,this._paused=!1,this.trigger("start")),this}},{key:"createSourceNode",value:function(){var a=j.audioContext.createBufferSource();return a.buffer=this.mediaSource.audioBuffer,a.loop=this.loop,a.playbackRate.value=this.speed,a.connect(this._gainNode),a.start(0,this._currentTime),a}},{key:"pause",value:function(){if(!this._paused){var a=this.duration,b=this.currentTime;this._currentTime=b<=a?b:(b-a)*(b/a|0),this._sourceNode.stop(0),this._sourceNode.disconnect(),this._sourceNode=null,this._paused=!0,this.trigger("stop")}return this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),l.default.webAudio&&(this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null),this._audioBuffer=null,this._paused=null,this._startTime=null,this._currentTime=null}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,j.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._gainNode&&(this._gainNode.gain.value=this.muted?0:b))}},{key:"loop",set:function(a){var b=!!a;this._loop!==b&&(this._loop=b,this._sourceNode&&(this._sourceNode.loop=b))}},{key:"speed",set:function(a){var b=Math.max(0,a);this._speed!==b&&(this._speed=b,this._sourceNode&&(this._sourceNode.playbackRate.value=b))}},{key:"currentTime",get:function(){return this._startTime&&j.audioContext?this._currentTime+j.audioContext.currentTime-this._startTime:0},set:function(a){this.pause(),this._currentTime=Math.max(0,a),this.play()}},{key:"muted",set:function(a){var b=!!a;this._muted!==b&&(this._muted=b,this._gainNode&&(this._gainNode.gain.value=b?0:this.volume))}},{key:"paused",get:function(){return!(!this._paused||this._loop)&&this.currentTime>=this.duration}},{key:"playing",get:function(){return!this._paused}},{key:"analyserTarget",get:function(){return this._gainNode||null}}]),b}(n.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(18),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"process",value:function(a){return a.text()}},{key:"create",value:function(a,b){return Promise.resolve(a)}},{key:"storageType",get:function(){return"string"}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(22),k=d(j),l=c(9),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.mimeType,e=c.scaleMode,f=c.wrapMode,g=c.premultiplyAlpha,h=c.generateMipMap;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{mimeType:d}).then(function(a){return new m.default(a,{scaleMode:e,wrapMode:f,premultiplyAlpha:g,generateMipMap:h})})}},{key:"storageType",get:function(){return"image"}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(49),k=d(j),l=c(14),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.type,e=void 0===d?"video":d,f=c.createMediaElement,g=void 0===f||f,h=c.decodeAudioBuffer,j=void 0!==h&&h,l=c.mimeType,m=c.loadEvent,n=c.volume,o=c.loop,p=c.speed,q=c.time,r=c.muted,s=c.scaleMode,t=c.wrapMode,u=c.premultiplyAlpha,v=c.generateMipMap;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,{type:e,createMediaElement:g,decodeAudioBuffer:j,mimeType:l,loadEvent:m}).then(function(a){return new k.default(a,{volume:n,loop:o,speed:p,time:q,muted:r,scaleMode:s,wrapMode:t,premultiplyAlpha:u,generateMipMap:v})})}},{key:"storageType",get:function(){return"video"}}]),b}(m.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(1),k=c(19),l=d(k),m=c(9),n=d(m),o=c(5),p=d(o),q=c(3),r=d(q),s=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.volume,g=void 0===d?r.default.VOLUME_VIDEO:d,h=c.loop,i=void 0===h?r.default.MEDIA_LOOP:h,k=c.speed,l=void 0===k?r.default.MEDIA_SPEED:k,m=c.time,o=void 0===m?r.default.MEDIA_TIME:m,p=c.muted,q=void 0===p?r.default.MEDIA_MUTED:p,s=c.scaleMode,t=c.wrapMode,u=c.premultiplyAlpha,v=c.generateMipMap;e(this,b);var w=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new n.default(a.mediaElement,{scaleMode:s,wrapMode:t,premultiplyAlpha:u,generateMipMap:v}))),x=a.mediaElement;return w._mediaSource=a,w._mediaElement=x,w._duration=x?x.duration:0,w._volume=x?x.volume:1,w._speed=x?x.playbackRate:1,w._loop=!!x&&x.loop,w._muted=!!x&&x.muted,w._gainNode=j.audioContext.createGain(),w._gainNode.gain.value=w.volume,w._gainNode.connect(j.audioContext.destination),w._sourceNode=j.audioContext.createMediaElementSource(w._mediaElement),w._sourceNode.connect(w._gainNode),w.applyOptions({volume:g,loop:i,speed:l,time:o,muted:q}),w}return g(b,a),h(b,[{key:"play",value:function(a){return this.paused&&(this.applyOptions(a),this._mediaElement.play(),this.trigger("start")),this}},{key:"pause",value:function(){return this.playing&&(this._mediaElement.pause(),this.trigger("stop")),this}},{key:"stop",value:function(){return this.pause(),this.currentTime=0,this}},{key:"toggle",value:function(a){return this.paused?this.play(a):this.pause()}},{key:"applyOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.volume,c=a.loop,d=a.speed,e=a.time,f=a.muted;return void 0!==b&&(this.volume=b),void 0!==c&&(this.loop=c),void 0!==d&&(this.speed=d),void 0!==e&&(this.currentTime=e),void 0!==f&&(this.muted=f),this}},{key:"render",value:function(a){return this.visible&&(this.texture.updateSource(),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"render",this).call(this,a)),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.stop(),p.default.webAudio&&(this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null),this._mediaSource=null,this._mediaElement=null,this._duration=null,this._volume=null,this._speed=null,this._loop=null,this._muted=null}},{key:"mediaSource",get:function(){return this._mediaSource}},{key:"mediaElement",get:function(){return this._mediaElement}},{key:"duration",get:function(){return this._duration}},{key:"progress",get:function(){var a=this.currentTime,b=this.duration;return a%b/b}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,j.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._gainNode&&(this._gainNode.gain.value=this.muted?0:b))}},{key:"loop",get:function(){return this._loop},set:function(a){var b=!!a;this._loop!==b&&(this._mediaElement.loop=this._loop=b)}},{key:"speed",get:function(){return this._speed},set:function(a){var b=Math.max(0,a);this._speed!==b&&(this._mediaElement.playbackRate=this._speed=b)}},{key:"currentTime",get:function(){return this._mediaElement.currentTime},set:function(a){this._mediaElement.currentTime=Math.max(0,a)}},{key:"muted",get:function(){return this._muted},set:function(a){var b=!!a;this._muted!==b&&(this._muted=b,this._gainNode&&(this._gainNode.gain.value=b?0:this.volume))}},{key:"paused",get:function(){return this._mediaElement.paused},set:function(a){a?this.pause():this.play()}},{key:"playing",get:function(){return!this.paused},set:function(a){a?this.play():this.pause()}},{key:"analyserTarget",get:function(){return this._gainNode||null}}]),b}(l.default);b.default=s},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=c(26),m=d(l),n=c(12),o=d(n),p=c(1),q=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._transform=new o.default,a._position=new m.default(a._setDirty,a),a._scale=new m.default(a._setDirty,a,1,1),a._origin=new m.default(a._setDirty,a),a._rotation=0,a._sin=0,a._cos=1,a._updateTransform=!0,a}return g(b,a),h(b,[{key:"getTransform",value:function(){return this._updateTransform&&(this.updateTransform(),this._updateTransform=!1),this._transform}},{key:"updateTransform",value:function(){var a=this._transform,b=this._scale,c=this._origin,d=this._position;return a.a=b.x*this._cos,a.b=b.y*this._sin,a.c=b.x*-this._sin,a.d=b.y*this._cos,a.x=c.x*-a.a-c.y*a.b+d.x,a.y=c.x*-a.c-c.y*a.d+d.y,this}},{key:"setPosition",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._position.set(a,b),this}},{key:"setScale",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._scale.set(a,b),this}},{key:"setOrigin",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this._origin.set(a,b),this}},{key:"setRotation",value:function(a){var b=a%360,c=b<0?b+360:b,d=(0,p.degreesToRadians)(c);return this._rotation=c,this._cos=Math.cos(d),this._sin=Math.sin(d),this._setDirty(),this}},{key:"move",value:function(a,b){return this.setPosition(this.x+a,this.y+b)}},{key:"rotate",value:function(a){return this.setRotation(this._rotation+a)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._transform.destroy(),this._transform=null,this._position.destroy(),this._position=null,this._scale.destroy(),this._scale=null,this._origin.destroy(),this._origin=null,this._rotation=null,this._sin=null,this._cos=null,this._updateTransform=null}},{key:"_setDirty",value:function(){this._updateTransform=!0}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale.copy(a)}},{key:"origin",get:function(){return this._origin},set:function(a){this._origin.copy(a)}},{key:"rotation",get:function(){return this._rotation},set:function(a){this.setRotation(a)}}]),b}(k.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l={NONE:0,LOADING:1,RUNNING:2},m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._app=a,c._loader=a.loader,c._status=l.NONE,c._scene=null,c}return g(b,a),h(b,[{key:"setScene",value:function(a){return a!==this._scene&&(this._unloadScene(),this._scene=a,this._loadScene()),this}},{key:"update",value:function(a){return this.sceneRunning&&(this._scene.update(a),this._scene.draw(this._app.renderManager)),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._unloadScene(),this._scene=null,this._status=null,this._loader=null,this._app=null}},{key:"_loadScene",value:function(){var a=this;this._scene&&(this._status=l.LOADING,this._scene.app=this._app,this._scene.load(this._loader),this.trigger("scene:load"),this._loader.load().then(function(){a._status=l.RUNNING,a._scene.init(a._loader.resources),a.trigger("scene:init")}))}},{key:"_unloadScene",value:function(){this._scene&&(this.sceneRunning&&(this._scene.unload(),this.trigger("scene:unload")),this._scene.destroy(),this._scene=null,this._status=l.NONE,this._loader.clear(),this.trigger("scene:destroy"))}},{key:"scene",get:function(){return this._scene},set:function(a){this.setScene(a)}},{key:"sceneLoading",get:function(){return this._status===l.LOADING}},{key:"sceneRunning",get:function(){return this._status===l.RUNNING}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(0),h=c(5),i=d(h),j=c(3),k=d(j),l=c(30),m=d(l),n=c(55),o=d(n),p=c(61),q=d(p),r=c(7),s=d(r),t=c(1),u=c(9),v=d(u),w=function(){function a(b){if(e(this,a),!i.default.webGL)throw new Error("This browser or hardware does not support WebGL.");var c=b.config,d=c.width,f=c.height,h=c.clearColor;if(this._canvas=b.canvas,this._context=this._createContext(),!this._context)throw new Error("This browser or hardware does not support WebGL.");this._contextLost=this._context.isContextLost(),this._contextLost&&this._restoreContext(),this._renderers=new Map,this._renderTarget=null,this._renderer=null,this._buffer=null,this._shader=null,this._blendMode=null,this._textureUnit=0,this._texture=null,this._clearColor=h&&h.clone()||new s.default,this._clearAlpha=this._clearColor.a<1,this._rootRenderTarget=new m.default(d,f,!0),this._cursor=this._canvas.style.cursor,this._setupContext(),this._addEvents(),this.addRenderer("sprite",new o.default),this.addRenderer("particle",new q.default),this.setRenderTarget(this._rootRenderTarget),this.setBlendMode(g.BLEND_MODES.NORMAL),this.resize(d,f)}return f(a,[{key:"setRenderTarget",value:function(a){var b=a||this._rootRenderTarget;return this._renderTarget!==b&&(this._renderTarget&&(this._renderTarget.unbindFramebuffer(),this._renderTarget=null),b&&(b.connect(this._context),b.bindFramebuffer()),this._renderTarget=b),this}},{key:"setRenderer",value:function(a){var b=a||null;return this._renderer!==b&&(this._renderer&&(this._renderer.unbind(),this._renderer=null),b&&(b.connect(this),b.bind()),this._renderer=b),this}},{key:"setBuffer",value:function(a){var b=a||null;return this._buffer!==b&&(this._buffer&&(this._buffer.unbindBuffers(),this._buffer=null),b&&(b.connect(this._context),b.bindBuffers()),this._buffer=b),this}},{key:"setShader",value:function(a){var b=a||null;return this._shader!==b&&(this._shader&&(this._shader.unbindProgram(),this._shader=null),b&&(b.connect(this._context),b.bindProgram()),this._shader=b),this}},{key:"setTexture",value:function(a,b){var c=a||null;return void 0!==b&&this.setTextureUnit(b),this._texture!==c&&(this._texture&&(this._texture.unbindTexture(),this._texture=null),c&&(c.connect(this._context),c.bindTexture()),this._texture=c),this}},{key:"setBlendMode",value:function(a){if(a!==this._blendMode){var b=this._context;switch(this._blendMode=a,a){case g.BLEND_MODES.ADD:b.blendFunc(b.ONE,b.ONE);break;case g.BLEND_MODES.SUBTRACT:b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_COLOR);break;case g.BLEND_MODES.MULTIPLY:b.blendFunc(b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA);break;case g.BLEND_MODES.SCREEN:b.blendFunc(b.ONE,b.ONE_MINUS_SRC_COLOR);break;default:b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)}}return this}},{key:"setTextureUnit",value:function(a){var b=0|a;if(this._textureUnit!==b){var c=this._context;this._textureUnit=b,c.activeTexture(c.TEXTURE0+b)}return this}},{key:"setClearColor",value:function(a){if(!this._clearColor.equals(a)){var b=this._context,c=a.a<1;this._clearColor.copy(a),b.clearColor(a.r/255,a.g/255,a.b/255,a.a),this._clearAlpha!==c&&(this._clearAlpha=c,b.colorMask(!0,!0,!0,c))}return this}},{key:"setCursor",value:function(a){return a!==this._cursor&&(a instanceof v.default&&(a=a.source),a instanceof HTMLImageElement&&(a="url("+(0,t.imageToBase64)(a)+")"),this._canvas.style.cursor=this._cursor=a),this}},{key:"addRenderer",value:function(a,b){if(this._renderers.has(a))throw new Error('Renderer "'+a+'" was already added.');return this._renderers.set(a,b),this}},{key:"getRenderer",value:function(a){if(!this._renderers.has(a))throw new Error('Could not find renderer "'+a+'".');return this._renderers.get(a)}},{key:"clear",value:function(a){var b=this._context;return a&&this.setClearColor(a),b.clear(b.COLOR_BUFFER_BIT),this}},{key:"resize",value:function(a,b){return this._canvas.width=a,this._canvas.height=b,this._rootRenderTarget.resize(a,b),this}},{key:"draw",value:function(a){return this._contextLost||a.render(this),this}},{key:"display",value:function(){return this._renderer&&!this._contextLost&&this._renderer.flush(),this}},{key:"drawElements",value:function(a){var b=this._context;return b.drawElements(b.TRIANGLES,a,b.UNSIGNED_SHORT,0),this}},{key:"insideViewport",value:function(a){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._renderTarget.view).getBounds().intersets(a.getBounds())}},{key:"destroy",value:function(){this._removeEvents(),this.setRenderTarget(null),this.setRenderer(null),this.setShader(null),this.setBuffer(null),this.setTexture(null);var a=!0,b=!1,c=void 0;try{for(var d,e=this._renderers.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.destroy()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._renderers.clear(),this._renderers=null,this._clearColor.destroy(),this._clearColor=null,this._rootRenderTarget.destroy(),this._rootRenderTarget=null,this._canvas=null,this._context=null,this._contextLost=null,this._renderTarget=null,this._renderer=null,this._buffer=null,this._shader=null,this._blendMode=null,this._texture=null,this._textureUnit=null,this._clearAlpha=null,this._cursor=null}},{key:"_createContext",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.default.CONTEXT_OPTIONS;try{return this._canvas.getContext("webgl2",a)||this._canvas.getContext("webgl",a)}catch(a){return null}}},{key:"_restoreContext",value:function(){var a=this._context;a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext()}},{key:"_setupContext",value:function(){var a=this._context,b=this._clearColor,c=b.r,d=b.g,e=b.b,f=b.a;a.enable(a.BLEND),a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.blendEquation(a.FUNC_ADD),a.clearColor(c/255,d/255,e/255,f),a.colorMask(!0,!0,!0,this._clearAlpha)}},{key:"_addEvents",value:function(){this._onContextLostHandler=this._onContextLost.bind(this),this._onContextRestoredHandler=this._onContextRestored.bind(this),this._canvas.addEventListener("webglcontextlost",this._onContextLostHandler,!1),this._canvas.addEventListener("webglcontextrestored",this._onContextRestoredHandler,!1)}},{key:"_removeEvents",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLostHandler,!1),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestoredHandler,!1),this._onContextLostHandler=null,this._onContextRestoredHandler=null}},{key:"_onContextLost",value:function(){this._contextLost=!0,this._restoreContext()}},{key:"_onContextRestored",value:function(){this._contextLost=!1}},{key:"context",get:function(){return this._context}},{key:"renderTarget",get:function(){return this._renderTarget}},{key:"texture",get:function(){return this._texture}},{key:"renderer",get:function(){return this._renderer},set:function(a){this.setRenderer(a)}},{key:"buffer",get:function(){return this._buffer},set:function(a){this.setBuffer(a)}},{key:"shader",get:function(){return this._shader},set:function(a){this.setShader(a)}},{key:"blendMode",get:function(){return this._blendMode},set:function(a){this.setBlendMode(a)}},{key:"textureUnit",get:function(){return this._textureUnit},set:function(a){this.setTextureUnit(a)}},{key:"clearColor",get:function(){return this._clearColor},set:function(a){this.setClearColor(a)}},{key:"cursor",get:function(){return this._cursor},set:function(a){this.setCursor(a)}}]),a}();b.default=w},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(26),h=d(g),i=c(4),j=d(i),k=c(12),l=d(k),m=c(1),n=c(54),o=d(n),p=c(28),q=d(p),r=function(){function a(b,c,d,f){e(this,a),this._center=new h.default(this._setDirty,this,b,c),this._size=new o.default(this._setDirty,this,d,f),this._rotation=0,this._sin=0,this._cos=1,this._viewport=new j.default(0,0,1,1),this._transform=new l.default,this._inverseTransform=new l.default,this._bounds=new q.default,this._updateTransform=!0,this._updateInverseTransform=!0,this._updateBounds=!0,this._updateId=0}return f(a,[{key:"setCenter",value:function(a,b){return this._center.set(a,b),this}},{key:"resize",value:function(a,b){return this._size.set(a,b),this}},{key:"setRotation",value:function(a){var b=a%360,c=b<0?b+360:b,d=(0,m.degreesToRadians)(c);return this._rotation=c<0?c+360:c,this._cos=Math.cos(d),this._sin=Math.sin(d),this._setDirty(),this}},{key:"move",value:function(a,b){return this.setCenter(this._center.x+a,this._center.y+b),this}},{key:"zoom",value:function(a){return this.resize(this._size.width*a,this._size.height*a),this}},{key:"rotate",value:function(a){return this.setRotation(this._rotation+a),this}},{key:"reset",value:function(a,b,c,d){return this._size.set(c,d),this._center.set(a,b),this._viewport.set(0,0,1,1),this._rotation=0,this._sin=0,this._cos=1,this._setDirty(),this}},{key:"getTransform",value:function(){return this._updateTransform&&(this.updateTransform(),this._updateTransform=!1),this._transform}},{key:"updateTransform",value:function(){var a=this._transform,b=this._center.x,c=this._center.y,d=this._sin,e=this._cos,f=2/this._size.width,g=-2/this._size.height,h=-f*b,i=-g*c,j=-b*e-c*d+b,k=b*d-c*e+c;return a.a=f*e,a.b=f*d,a.x=f*j+h,a.c=-g*d,a.d=g*e,a.y=g*k+i,this}},{key:"getInverseTransform",value:function(){return this._updateInverseTransform&&(this.getTransform().getInverse(this._inverseTransform),this._updateInverseTransform=!1),this._inverseTransform}},{key:"getBounds",value:function(){return this._updateBounds&&(this.updateBounds(),this._updateBounds=!1),this._bounds.getRect()}},{key:"updateBounds",value:function(){var a=this.width/2,b=this.height/2;return this._bounds.reset().addCoords(this._center.x-a,this._center.y-b).addCoords(this._center.x+a,this._center.y+b),this}},{key:"copy",value:function(a){return this.center=a.center,this.size=a.size,this.rotation=a.rotation,this.viewport=a.viewport,this}},{key:"destroy",value:function(){this._center.destroy(),this._center=null,this._size.destroy(),this._size=null,this._viewport.destroy(),this._viewport=null,this._transform.destroy(),this._transform=null,this._inverseTransform.destroy(),this._inverseTransform=null,this._bounds.destroy(),this._bounds=null,this._rotation=null,this._cos=null,this._sin=null,this._updateTransform=null,this._updateInverseTransform=null,
this._updateBounds=null,this._updateId=null}},{key:"_setDirty",value:function(){this._updateTransform=!0,this._updateInverseTransform=!0,this._updateBounds=!0,this._updateId++}},{key:"center",get:function(){return this._center},set:function(a){this._center.copy(a)}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"width",get:function(){return this._size.width},set:function(a){this._size.width=a}},{key:"height",get:function(){return this._size.height},set:function(a){this._size.height=a}},{key:"rotation",get:function(){return this._rotation},set:function(a){this.setRotation(a)}},{key:"viewport",get:function(){return this._viewport},set:function(a){this._viewport.copy(a),this._setDirty()}},{key:"updateId",get:function(){return this._updateId}}]),a}();b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(8),k=d(j),l=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d,g));return h._callback=a,h._scope=c||h,h}return g(b,a),h(b,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._width,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._height;return this._width===a&&this._height===b||(this._width=a,this._height=b,this._callback.call(this._scope)),this}},{key:"add",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._width+a,this._height+b)}},{key:"subtract",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._width-a,this._height-b)}},{key:"scale",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._width*a,this._height*b)}},{key:"divide",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return this.set(this._width/a,this._height/b)}},{key:"copy",value:function(a){return this.set(a.width,a.height)}},{key:"clone",value:function(){return new b(this._callback,this._scope,this._width,this._height)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._callback=null,this._scope=null}},{key:"width",get:function(){return this._width},set:function(a){this._width!==a&&(this._width=a,this._callback.call(this._scope))}},{key:"height",get:function(){return this._height},set:function(a){this._height!==a&&(this._height=a,this._callback.call(this._scope))}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(31),j=d(i),k=c(56),l=d(k),m=c(3),n=d(m),o=c(60),p=d(o),q=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._batchSize=n.default.BATCH_SIZE_SPRITES,a._batchIndex=0,a._attributeCount=16,a._vertexData=new ArrayBuffer(a._batchSize*a._attributeCount*4),a._indexData=new Uint16Array(6*a._batchSize),a._float32View=new Float32Array(a._vertexData),a._uint32View=new Uint32Array(a._vertexData),a._buffer=new p.default(a._vertexData,a._indexData),a._shader=new l.default,a._renderManager=null,a._context=null,a._currentTexture=null,a._currentBlendMode=null,a._currentView=null,a._viewId=-1,a._fillIndexData(a._indexData),a}return g(b,a),h(b,[{key:"connect",value:function(a){if(!this._context){var b=a.context;this._context=b,this._renderManager=a,this._buffer.connect(b),this._shader.connect(b)}return this}},{key:"disconnect",value:function(){return this._context&&(this.unbind(),this._shader.disconnect(),this._buffer.disconnect(),this._renderManager=null,this._context=null),this}},{key:"bind",value:function(){if(!this._context)throw new Error("Renderer has to be connected first!");return this._renderManager.setBuffer(this._buffer),this._renderManager.setShader(this._shader),this}},{key:"unbind",value:function(){return this._context&&(this.flush(),this._renderManager.setShader(null),this._renderManager.setBuffer(null),this._currentTexture=null,this._currentBlendMode=null,this._currentView=null,this._viewId=-1),this}},{key:"render",value:function(a){var b=a.texture,c=a.blendMode,d=a.tint,e=a.vertexData,f=a.texCoordData,g=this._batchIndex>=this._batchSize,h=b!==this._currentTexture,i=c!==this._currentBlendMode,j=g||h||i,k=j?0:this._batchIndex*this._attributeCount,l=this._float32View,m=this._uint32View;return j&&(this.flush(),h&&(this._currentTexture=b,this._renderManager.setTexture(b)),i&&(this._currentBlendMode=c,this._renderManager.setBlendMode(c))),b.update(),l[k+0]=e[0],l[k+1]=e[1],l[k+4]=e[2],l[k+5]=e[3],l[k+8]=e[4],l[k+9]=e[5],l[k+12]=e[6],l[k+13]=e[7],m[k+2]=f[0],m[k+6]=f[1],m[k+10]=f[2],m[k+14]=f[3],m[k+3]=m[k+7]=m[k+11]=m[k+15]=d.getRGBA(),this._batchIndex++,this}},{key:"flush",value:function(){if(this._batchIndex>0){var a=this._renderManager.renderTarget.view,b=a.updateId;this._currentView===a&&this._viewId===b||(this._currentView=a,this._viewId=b,this._shader.setProjection(a.getTransform())),this._buffer.uploadVertexData(this._float32View.subarray(0,this._batchIndex*this._attributeCount)),this._renderManager.drawElements(6*this._batchIndex),this._batchIndex=0}return this}},{key:"destroy",value:function(){this.disconnect(),this._buffer.destroy(),this._buffer=null,this._shader.destroy(),this._shader=null,this._uint32View=null,this._float32View=null,this._viewId=null,this._batchSize=null,this._batchIndex=null,this._attributeCount=null,this._currentTexture=null,this._currentBlendMode=null,this._currentView=null,this._renderManager=null,this._context=null}},{key:"_fillIndexData",value:function(a){for(var b=a.length,c=0,d=0;c<b;c+=6,d+=4)a[c]=d,a[c+1]=d+1,a[c+2]=d+3,a[c+3]=d,a[c+4]=d+2,a[c+5]=d+3;return this}}]),b}(j.default);b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(0),j=c(32),k=d(j),l=(c(59),function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setVertexSource("#version 300 es\r\nprecision lowp float;\r\n\r\nuniform mat3 u_projection;\r\n\r\nlayout(location = 0) in vec2 a_position;\r\nlayout(location = 1) in vec2 a_texcoord;\r\nlayout(location = 2) in vec4 a_color;\r\n\r\nout vec2 v_texcoord;\r\nout vec4 v_color;\r\n\r\nvoid main(void) {\r\n    v_texcoord = a_texcoord;\r\n    v_color = vec4(a_color.rgb * a_color.a, a_color.a);\r\n\r\n    gl_Position = vec4((u_projection * vec3(a_position, 1.0)).xy, 0.0, 1.0);\r\n}\r\n"),a.setFragmentSource("#version 300 es\r\nprecision lowp float;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nin vec2 v_texcoord;\r\nin vec4 v_color;\r\n\r\nlayout(location = 0) out vec4 o_fragColor;\r\n\r\nvoid main(void) {\r\n    o_fragColor = texture(u_texture, v_texcoord) * v_color;\r\n}\r\n"),a.setAttribute("a_position",i.ATTRIBUTE_TYPE.FLOAT,2,!1),a.setAttribute("a_texcoord",i.ATTRIBUTE_TYPE.UNSIGNED_SHORT,2,!0),a.setAttribute("a_color",i.ATTRIBUTE_TYPE.UNSIGNED_BYTE,4,!0),a.setUniform("u_projection",i.UNIFORM_TYPE.FLOAT_MAT3),a.setUniform("u_texture",i.UNIFORM_TYPE.SAMPLER_2D,0),a}return g(b,a),h(b,[{key:"setProjection",value:function(a){this.getUniform("u_projection").setValue(a.toArray(!1))}}]),b}(k.default));b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b,c,e){var f=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];d(this,a),this._shader=null,this._name=b,this._type=c,this._size=e,this._normalized=f,this._enabled=g,this._bound=!1}return e(a,[{key:"setEnabled",value:function(a){return this._enabled!==a&&(this._enabled=a,this.upload()),this}},{key:"bind",value:function(a,b,c){return this._shader||(this._shader=a),this._bound||(this._bound=!0,this._shader.setVertexPointer(this._name,this._size,this._type,this._normalized,b,c),this.upload()),this}},{key:"unbind",value:function(){return this._bound=!1,this}},{key:"upload",value:function(){return this._bound&&this._shader.toggleVertexArray(this._name,this._enabled),this}},{key:"destroy",value:function(){this._shader=null,this._name=null,this._type=null,this._size=null,this._normalized=null,this._enabled=null,this._bound=null}},{key:"name",get:function(){return this._name}},{key:"size",get:function(){return this._size}},{key:"type",get:function(){return this._type}},{key:"normalized",get:function(){return this._normalized}},{key:"enabled",get:function(){return this._enabled}},{key:"byteSize",get:function(){return this.bytesType*this._size}},{key:"bytesType",get:function(){switch(this._type){case f.ATTRIBUTE_TYPE.BYTE:case f.ATTRIBUTE_TYPE.UNSIGNED_BYTE:return 1;case f.ATTRIBUTE_TYPE.SHORT:case f.ATTRIBUTE_TYPE.UNSIGNED_SHORT:return 2;case f.ATTRIBUTE_TYPE.INT:case f.ATTRIBUTE_TYPE.UNSIGNED_INT:case f.ATTRIBUTE_TYPE.FLOAT:return 4}return 0}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(12),h=(d(g),function(){function a(b,c,d){e(this,a),this._shader=null,this._name=b,this._type=c,this._value=null,this._dirty=!1,this._bound=!1,void 0!==d&&this.setValue(d)}return f(a,[{key:"setValue",value:function(a){return this._value=a,this._dirty=!0,this.upload(),this}},{key:"bind",value:function(a){return this._shader||(this._shader=a),this._bound||(this._bound=!0,this.upload()),this}},{key:"unbind",value:function(){return this._bound=!1,this}},{key:"upload",value:function(){return this._bound&&this._dirty&&(this._shader.setUniformValue(this._name,this._value,this._type),this._dirty=!1),this}},{key:"destroy",value:function(){this._shader=null,this._name=null,this._type=null,this._value=null,this._dirty=null,this._bound=null}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"value",get:function(){return this._value}}]),a}());b.default=h},function(a,b,c){(function(a){function c(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};b.resolve=function(){for(var b="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(b=g+"/"+b,e="/"===g.charAt(0))}return b=c(d(b.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+b||"."},b.normalize=function(a){var e=b.isAbsolute(a),f="/"===g(a,-1);return a=c(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},b.isAbsolute=function(a){return"/"===a.charAt(0)},b.join=function(){var a=Array.prototype.slice.call(arguments,0);return b.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},b.relative=function(a,c){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=b.resolve(a).substr(1),c=b.resolve(c).substr(1);for(var e=d(a.split("/")),f=d(c.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},b.sep="/",b.delimiter=":",b.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},b.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},b.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(b,c(77))},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=new ArrayBuffer(0),g=new Uint8Array(f),h=function(){function a(b,c){d(this,a),this._context=null,this._vertexBuffer=null,this._indexBuffer=null,this._vertexData=b||f,this._indexData=c||g}return e(a,[{key:"connect",value:function(a){return this._context||(this._context=a,this._vertexBuffer=a.createBuffer(),this._indexBuffer=a.createBuffer()),this}},{key:"disconnect",value:function(){return this.unbindBuffers(),this._context&&(this._context.deleteBuffer(this._vertexBuffer),this._context.deleteBuffer(this._indexBuffer),this._vertexBuffer=null,this._indexBuffer=null,this._context=null),this}},{key:"bindBuffers",value:function(){if(!this._context)throw new Error("Buffer has to be connected first!");var a=this._context;return a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._indexBuffer),a.bufferData(a.ARRAY_BUFFER,this._vertexData,a.DYNAMIC_DRAW),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this._indexData,a.STATIC_DRAW),this}},{key:"unbindBuffers",value:function(){if(this._context){var a=this._context;a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}return this}},{key:"uploadVertexData",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._context;return this._vertexData.byteLength>=a.byteLength?c.bufferSubData(c.ARRAY_BUFFER,b,a):c.bufferData(c.ARRAY_BUFFER,a,c.DYNAMIC_DRAW),this._vertexData=a,this}},{key:"uploadIndexData",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._context;return this._indexData.byteLength>=a.byteLength?c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,b,a):c.bufferData(c.ELEMENT_ARRAY_BUFFER,a,c.STATIC_DRAW),this._indexData=a,this}},{key:"destroy",value:function(){this.disconnect(),this._vertexData=null,this._indexData=null}}]),a}();b.default=h},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(31),j=d(i),k=c(62),l=d(k),m=c(1),n=c(3),o=d(n),p=c(60),q=d(p),r=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._batchSize=o.default.BATCH_SIZE_PARTICLES,a._batchIndex=0,a._attributeCount=40,a._vertexData=new ArrayBuffer(a._batchSize*a._attributeCount*4),a._indexData=new Uint16Array(6*a._batchSize),a._float32View=new Float32Array(a._vertexData),a._uint32View=new Uint32Array(a._vertexData),a._buffer=new q.default(a._vertexData,a._indexData),a._shader=new l.default,a._renderManager=null,a._context=null,a._currentTexture=null,a._currentBlendMode=null,a._currentView=null,a._viewId=-1,a._fillIndexData(a._indexData),a}return g(b,a),h(b,[{key:"connect",value:function(a){if(!this._context){var b=a.context;this._context=b,this._renderManager=a,this._buffer.connect(b),this._shader.connect(b)}return this}},{key:"disconnect",value:function(){return this._context&&(this.unbind(),this._shader.disconnect(),this._buffer.disconnect(),this._renderManager=null,this._context=null),this}},{key:"bind",value:function(){if(!this._context)throw new Error("Renderer has to be connected first!");return this._renderManager.setBuffer(this._buffer),this._renderManager.setShader(this._shader),this}},{key:"unbind",value:function(){return this._context&&(this.flush(),this._renderManager.setShader(null),this._renderManager.setBuffer(null),this._currentTexture=null,this._currentBlendMode=null,this._currentView=null,this._viewId=-1),this}},{key:"render",value:function(a){var b=a.texture,c=a.textureFrame,d=a.textureCoords,e=a.particles,f=a.blendMode,g=b!==this._currentTexture,h=f!==this._currentBlendMode,i=this._float32View,j=this._uint32View;(g||h)&&(this.flush(),g&&(this._currentTexture=b,this._renderManager.setTexture(b)),h&&(this._currentBlendMode=f,this._renderManager.setBlendMode(f))),b.update();var k=!0,l=!1,n=void 0;try{for(var o,p=e[Symbol.iterator]();!(k=(o=p.next()).done);k=!0){var q=o.value;this._batchIndex>=this._batchSize&&this.flush();var r=q.position,s=q.scale,t=q.rotation,u=q.tint,v=this._batchIndex*this._attributeCount;i[v+0]=i[v+11]=c.x,i[v+1]=i[v+20]=c.y,i[v+2]=i[v+22]=d.x,i[v+3]=i[v+13]=d.y,i[v+10]=i[v+30]=c.width,i[v+21]=i[v+31]=c.height,i[v+12]=i[v+32]=d.width,i[v+23]=i[v+33]=d.height,i[v+4]=i[v+14]=i[v+24]=i[v+34]=r.x,i[v+5]=i[v+15]=i[v+25]=i[v+35]=r.y,i[v+6]=i[v+16]=i[v+26]=i[v+36]=s.x,i[v+7]=i[v+17]=i[v+27]=i[v+37]=s.y,i[v+8]=i[v+18]=i[v+28]=i[v+38]=(0,m.degreesToRadians)(t),j[v+9]=j[v+19]=j[v+29]=j[v+39]=u.getRGBA(),this._batchIndex++}}catch(a){l=!0,n=a}finally{try{!k&&p.return&&p.return()}finally{if(l)throw n}}return this}},{key:"flush",value:function(){if(this._batchIndex>0){var a=this._renderManager.renderTarget.view,b=a.updateId;this._currentView===a&&this._viewId===b||(this._currentView=a,this._viewId=b,this._shader.setProjection(a.getTransform())),this._buffer.uploadVertexData(this._float32View.subarray(0,this._batchIndex*this._attributeCount)),this._renderManager.drawElements(6*this._batchIndex),this._batchIndex=0}return this}},{key:"destroy",value:function(){this.disconnect(),this._buffer.destroy(),this._buffer=null,this._shader.destroy(),this._shader=null,this._uint32View=null,this._float32View=null,this._viewId=null,this._batchSize=null,this._batchIndex=null,this._attributeCount=null,this._currentTexture=null,this._currentBlendMode=null,this._currentView=null,this._context=null,this._renderManager=null}},{key:"_fillIndexData",value:function(a){for(var b=a.length,c=0,d=0;c<b;c+=6,d+=4)a[c]=d,a[c+1]=d+1,a[c+2]=d+3,a[c+3]=d,a[c+4]=d+2,a[c+5]=d+3;return this}}]),b}(j.default);b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(0),j=c(32),k=d(j),l=(c(59),function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setVertexSource("#version 300 es\r\nprecision lowp float;\r\n\r\nuniform mat3 u_projection;\r\n\r\nlayout(location = 0) in vec2 a_position;\r\nlayout(location = 1) in vec2 a_texcoord;\r\nlayout(location = 2) in vec2 a_translation;\r\nlayout(location = 3) in vec2 a_scale;\r\nlayout(location = 4) in float a_rotation;\r\nlayout(location = 5) in vec4 a_color;\r\n\r\nout vec2 v_texcoord;\r\nout vec4 v_color;\r\n\r\nvoid main(void) {\r\n    v_texcoord = a_texcoord;\r\n    v_color = vec4(a_color.rgb * a_color.a, a_color.a);\r\n\r\n    vec2 pos = vec2(\r\n        (a_position.x * cos(a_rotation)) - (a_position.y * sin(a_rotation)),\r\n        (a_position.x * sin(a_rotation)) + (a_position.y * cos(a_rotation))\r\n    );\r\n\r\n    gl_Position = vec4((u_projection * vec3((pos * a_scale) + a_translation, 1.0)).xy, 0.0, 1.0);\r\n}\r\n"),a.setFragmentSource("#version 300 es\r\nprecision lowp float;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nin vec2 v_texcoord;\r\nin vec4 v_color;\r\n\r\nlayout(location = 0) out vec4 o_fragColor;\r\n\r\nvoid main(void) {\r\n    o_fragColor = texture(u_texture, v_texcoord) * v_color;\r\n}\r\n"),a.setAttribute("a_position",i.ATTRIBUTE_TYPE.FLOAT,2,!1),a.setAttribute("a_texcoord",i.ATTRIBUTE_TYPE.FLOAT,2,!1),a.setAttribute("a_translation",i.ATTRIBUTE_TYPE.FLOAT,2,!1),a.setAttribute("a_scale",i.ATTRIBUTE_TYPE.FLOAT,2,!1),a.setAttribute("a_rotation",i.ATTRIBUTE_TYPE.FLOAT,1,!1),a.setAttribute("a_color",i.ATTRIBUTE_TYPE.UNSIGNED_BYTE,4,!0),a.setUniform("u_projection",i.UNIFORM_TYPE.FLOAT_MAT3),a.setUniform("u_texture",i.UNIFORM_TYPE.SAMPLER_2D,0),a}return g(b,a),h(b,[{key:"setProjection",value:function(a){this.getUniform("u_projection").setValue(a.toArray(!1))}}]),b}(k.default));b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(11),l=d(k),m=c(64),n=d(m),o=c(65),p=d(o),q=c(67),r=d(q),s=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new ArrayBuffer(4*j.INPUT_CHANNELS_GLOBAL),0,j.INPUT_CHANNELS_GLOBAL));return c._app=a,c._inputs=new Set,c._keyboard=new n.default(a,c.channelBuffer),c._pointerManager=new r.default(a,c.channelBuffer),c._gamepadManager=new p.default(a,c.channelBuffer),c}return g(b,a),h(b,[{key:"add",value:function(a){if(Array.isArray(a)){var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}else this._inputs.add(a)}},{key:"remove",value:function(a){if(Array.isArray(a)){var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this.remove(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}else this._inputs.delete(a)}},{key:"clear",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var a=!0,b=!1,c=void 0;try{for(var d,e=this._inputs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0)d.value.destroy()}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}this._inputs.clear()}},{key:"update",value:function(){this._gamepadManager.update();var a=!0,b=!1,c=void 0;try{for(var d,e=this._inputs[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.update(this.channels)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._keyboard.update(),this._pointerManager.update()}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._inputs.clear(),this._inputs=null,this._keyboard.destroy(),this._keyboard=null,this._pointerManager.destroy(),this._pointerManager=null,this._gamepadManager.destroy(),this._gamepadManager=null,this._app=null}}]),b}(l.default);b.default=s},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(1),l=c(11),m=d(l),n={NONE:0,KEY_DOWN:1,KEY_UP:2},o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,j.INPUT_OFFSET_KEYBOARD,j.INPUT_CHANNELS_DEVICE));return d._app=a,d._channelsPressed=new Set,d._channelsReleased=new Set,d._flags=n.NONE,d._addEventListeners(),d}return g(b,a),h(b,[{key:"update",value:function(){this._flags&&((0,k.hasFlag)(n.KEY_DOWN,this._flags)&&(this.trigger("keyboard:down",this._channelsPressed,this),this._channelsPressed.clear(),this._flags=(0,k.removeFlag)(n.KEY_DOWN,this._flags)),(0,k.hasFlag)(n.KEY_UP,this._flags)&&(this.trigger("keyboard:up",this._channelsReleased,this),this._channelsReleased.clear(),this._flags=(0,k.removeFlag)(n.KEY_UP,this._flags)))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._removeEventListeners(),this._channelsPressed.clear(),this._channelsPressed=null,this._channelsReleased.clear(),this._channelsReleased=null,this._flags=null,this._app=null}},{key:"_addEventListeners",value:function(){this._onKeyDownHandler=this._onKeyDown.bind(this),this._onKeyUpHandler=this._onKeyUp.bind(this),window.addEventListener("keydown",this._onKeyDownHandler,!0),window.addEventListener("keyup",this._onKeyUpHandler,!0)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("keydown",this._onKeyDownHandler,!0),window.removeEventListener("keyup",this._onKeyUpHandler,!0),this._onKeyDownHandler=null,this._onKeyUpHandler=null}},{key:"_onKeyDown",value:function(a){this.channels[a.keyCode]=1,this._channelsPressed.add(b.getChannelCode(a.keyCode)),this._flags=(0,k.addFlag)(n.KEY_DOWN,this._flags)}},{key:"_onKeyUp",value:function(a){this.channels[a.keyCode]=0,this._channelsReleased.add(b.getChannelCode(a.keyCode)),this._flags=(0,k.addFlag)(n.KEY_UP,this._flags)}}],[{key:"getChannelCode",value:function(a){return j.INPUT_OFFSET_KEYBOARD+a%j.INPUT_CHANNELS_DEVICE}},{key:"getKeyCode",value:function(a){return a%j.INPUT_CHANNELS_DEVICE}}]),b}(m.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){
if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(66),l=d(k),m=c(11),n=d(m),o=window.navigator,p=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,j.INPUT_OFFSET_GAMEPAD,j.INPUT_CHANNELS_DEVICE));return d._app=a,d._gamepads=new Map,d}return g(b,a),h(b,[{key:"update",value:function(){for(var a=this._app,b=this._gamepads,c=o.getGamepads(),d=c.length,e=0;e<d;e++)if(!!c[e]!==b.has(e)){if(c[e]){var f=new l.default(c[e],this.channelBuffer);b.set(e,f),a.trigger("gamepad:add",f,b)}else{var g=b.get(e);b.delete(e),a.trigger("gamepad:remove",g,b),g.destroy()}a.trigger("gamepad:change",b)}var h=!0,i=!1,j=void 0;try{for(var k,m=b.values()[Symbol.iterator]();!(h=(k=m.next()).done);h=!0){k.value.update()}}catch(a){i=!0,j=a}finally{try{!h&&m.return&&m.return()}finally{if(i)throw j}}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this);var a=!0,c=!1,d=void 0;try{for(var e,f=this._gamepads.values()[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}this._gamepads.clear(),this._gamepads=null,this._app=null}},{key:"gamepads",get:function(){return this._gamepads}}]),b}(n.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(3),l=d(k),m=c(11),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,j.INPUT_OFFSET_GAMEPAD+a.index*j.INPUT_CHANNELS_HANDLER,j.INPUT_CHANNELS_HANDLER));return d._gamepad=a,d._mapping=l.default.GAMEPAD_MAPPING,d}return g(b,a),h(b,[{key:"update",value:function(){var a=this.channels,b=this._mapping.buttons,c=this._mapping.axes,d=this._gamepad.buttons,e=this._gamepad.axes,f=!0,g=!1,h=void 0;try{for(var i,j=b[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;k.index in d&&(a[k.key]=k.transformValue(d[k.index].value))}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}var l=!0,m=!1,n=void 0;try{for(var o,p=c[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;q.index in e&&(a[q.key]=q.transformValue(e[q.index]))}}catch(a){m=!0,n=a}finally{try{!l&&p.return&&p.return()}finally{if(m)throw n}}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._mapping.destroy(),this._mapping=null,this._gamepad=null}},{key:"gamepad",get:function(){return this._gamepad}},{key:"mapping",get:function(){return this._mapping},set:function(a){this._mapping=a}},{key:"id",get:function(){return this._gamepad.id}},{key:"index",get:function(){return this._gamepad.index}},{key:"connected",get:function(){return this._gamepad.connected}}]),b}(n.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(5),l=d(k),m=c(11),n=d(m),o=c(68),p=d(o),q=c(2),r=d(q),s=c(1),t={NONE:0,ENTER:1,LEAVE:2,MOVE:4,DOWN:8,UP:16,CANCEL:32,SCROLL:64},u=!l.default.eventOptions||{capture:!0,passive:!0},v=!l.default.eventOptions||{capture:!0,passive:!1},w=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,j.INPUT_OFFSET_POINTER,j.INPUT_CHANNELS_DEVICE));return d._app=a,d._pointers=new Map,d._pointersEntered=new Set,d._pointersLeft=new Set,d._pointersMoved=new Set,d._pointersDown=new Set,d._pointersUp=new Set,d._pointersCancelled=new Set,d._scrollDelta=new r.default(0,0),d._flags=t.NONE,d._addEventListeners(),d}return g(b,a),h(b,[{key:"update",value:function(){if(this._flags){if((0,s.hasFlag)(t.ENTER,this._flags)&&(this._triggerPointerEvents("enter",this._pointersEntered),this._pointersEntered.clear(),this._flags=(0,s.removeFlag)(t.ENTER,this._flags)),(0,s.hasFlag)(t.LEAVE,this._flags)&&(this._triggerPointerEvents("leave",this._pointersLeft),this._pointersLeft.clear(),this._flags=(0,s.removeFlag)(t.LEAVE,this._flags)),(0,s.hasFlag)(t.MOVE,this._flags)&&(this._triggerPointerEvents("move",this._pointersMoved),this._pointersMoved.clear(),this._flags=(0,s.removeFlag)(t.MOVE,this._flags)),(0,s.hasFlag)(t.DOWN,this._flags)&&(this._triggerPointerEvents("down",this._pointersDown,{touchEvent:"start"}),this._pointersDown.clear(),this._flags=(0,s.removeFlag)(t.DOWN,this._flags)),(0,s.hasFlag)(t.UP,this._flags)){var a=!0,b=!1,c=void 0;try{for(var d,e=this._pointersUp[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=f.downPosition,h=g.x,i=g.y;this._triggerPointerEvent("up",f,{touchEvent:"end"}),h>0&&i>0&&f.position.distanceTo(h,i)<10?this._triggerPointerEvent("tap",f,{mouseEvent:"click"}):this._triggerPointerEvent("tapoutside",f,{mouseEvent:"clickoutside"}),f.downPosition.set(-1,-1)}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}this._pointersUp.clear(),this._flags=(0,s.removeFlag)(t.UP,this._flags)}(0,s.hasFlag)(t.CANCEL,this._flags)&&(this._triggerPointerEvents("cancel",this._pointersCancelled),this._pointersCancelled.clear(),this._flags=(0,s.removeFlag)(t.CANCEL,this._flags)),(0,s.hasFlag)(t.SCROLL,this._flags)&&(this._app.trigger("mouse:scroll",this._scrollDelta,this._pointers),this._scrollDelta.set(0,0),this._flags=(0,s.removeFlag)(t.SCROLL,this._flags))}var j=!0,k=!1,l=void 0;try{for(var m,n=this._pointers.values()[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){m.value.update()}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._removeEventListeners();var a=!0,c=!1,d=void 0;try{for(var e,f=this._pointers.values()[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}this._pointers.clear(),this._pointers=null,this._pointersEntered.clear(),this._pointersEntered=null,this._pointersLeft.clear(),this._pointersLeft=null,this._pointersDown.clear(),this._pointersDown=null,this._pointersUp.clear(),this._pointersUp=null,this._pointersCancelled.clear(),this._pointersCancelled=null,this._scrollDelta.destroy(),this._scrollDelta=null,this._flags=null,this._app=null}},{key:"_addEventListeners",value:function(){var a=this._app.canvas;this._onEnterHandler=this._onEnter.bind(this),this._onLeaveHandler=this._onLeave.bind(this),this._onMoveHandler=this._onMove.bind(this),this._onDownHandler=this._onDown.bind(this),this._onUpHandler=this._onUp.bind(this),this._onCancelHandler=this._onCancel.bind(this),this._onScrollHandler=this._onScroll.bind(this),a.addEventListener("pointerover",this._onEnterHandler,u),a.addEventListener("pointerleave",this._onLeaveHandler,u),a.addEventListener("pointercancel",this._onCancelHandler,u),a.addEventListener("pointermove",this._onMoveHandler,u),a.addEventListener("pointerdown",this._onDownHandler,v),a.addEventListener("pointerup",this._onUpHandler,v),a.addEventListener("wheel",this._onScrollHandler,v),a.addEventListener("contextmenu",s.stopEvent,v),a.addEventListener("selectstart",s.stopEvent,v)}},{key:"_removeEventListeners",value:function(){var a=this._app.canvas;a.removeEventListener("pointerover",this._onEnterHandler,u),a.removeEventListener("pointerleave",this._onLeaveHandler,u),a.removeEventListener("pointercancel",this._onCancelHandler,u),a.removeEventListener("pointermove",this._onMoveHandler,u),a.removeEventListener("pointerdown",this._onDownHandler,v),a.removeEventListener("pointerup",this._onUpHandler,v),a.removeEventListener("wheel",this._onScrollHandler,v),a.removeEventListener("contextmenu",s.stopEvent,v),a.removeEventListener("selectstart",s.stopEvent,v),this._onEnterHandler=null,this._onLeaveHandler=null,this._onMoveHandler=null,this._onDownHandler=null,this._onUpHandler=null,this._onCancelHandler=null}},{key:"_onEnter",value:function(a){var b=new p.default(a,this.channelBuffer);this._pointers.set(b.id,b),this._pointersEntered.add(b),this._flags=(0,s.addFlag)(t.ENTER,this._flags)}},{key:"_onLeave",value:function(a){var b=this._updatePointer(a);this._pointers.delete(b.id),this._pointersLeft.add(b),this._flags=(0,s.addFlag)(t.LEAVE,this._flags)}},{key:"_onDown",value:function(a){var b=this._updatePointer(a);b.downPosition.set(b.x,b.y),this._pointersDown.add(b),this._flags=(0,s.addFlag)(t.DOWN,this._flags),a.preventDefault()}},{key:"_onUp",value:function(a){this._pointersUp.add(this._updatePointer(a)),this._flags=(0,s.addFlag)(t.UP,this._flags),a.preventDefault()}},{key:"_onCancel",value:function(a){this._pointersCancelled.add(this._updatePointer(a)),this._flags=(0,s.addFlag)(t.CANCEL,this._flags)}},{key:"_onMove",value:function(a){this._pointersMoved.add(this._updatePointer(a)),this._flags=(0,s.addFlag)(t.MOVE,this._flags)}},{key:"_onScroll",value:function(a){this._scrollDelta.add(a.deltaX,a.deltaY),this._flags=(0,s.addFlag)(t.SCROLL,this._flags)}},{key:"_updatePointer",value:function(a){if(!this._pointers.has(a.pointerId))throw new Error('Could not find Pointer with id "'+a.pointerId+'".');return this._pointers.get(a.pointerId).setEventData(a)}},{key:"_triggerPointerEvents",value:function(a,b,c){var d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;this._triggerPointerEvent(a,i,c)}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}},{key:"_triggerPointerEvent",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=c.pointerEvent,e=c.mouseEvent,f=c.touchEvent,g=c.penEvent;this._app.trigger("pointer:"+(d||a),b,this._pointers),"mouse"===b.type?this._app.trigger("mouse:"+(e||a),b,this._pointers):"touch"===b.type?this._app.trigger("touch:"+(f||a),b,this._pointers):"pen"===b.type&&this._app.trigger("pen:"+(g||a),b,this._pointers)}},{key:"pointers",get:function(){return this._pointers}},{key:"scrollDelta",get:function(){return this._scrollDelta}}]),b}(n.default);b.default=w},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(11),l=d(k),m=c(2),n=d(m),o=c(8),p=d(o),q=c(1),r={NONE:0,POSITION:1,SIZE:2,TILT:4,BUTTONS:8,PRESSURE:16,ROTATION:32},s=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,j.INPUT_OFFSET_POINTER,j.INPUT_CHANNELS_HANDLER)),g=a.target.getBoundingClientRect();return d._id=a.pointerId,d._type=a.pointerType,d._position=new n.default(a.clientX-g.left,a.clientY-g.top),d._downPosition=new n.default(-1,-1),d._size=new p.default(a.width,a.height),d._tilt=new n.default(a.tiltX,a.tiltY),d._buttons=a.buttons,d._pressure=a.pressure,d._rotation=a.twist,d._flags=r.NONE,d}return g(b,a),h(b,[{key:"setEventData",value:function(a){var b=a.target.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;return this._position.x===c&&this._position.y===d||(this._position.set(c,d),this._flags=(0,q.addFlag)(r.POSITION,this._flags)),this._size.width===a.width&&this._size.height===a.height||(this._size.set(a.width,a.height),this._flags=(0,q.addFlag)(r.SIZE,this._flags)),this._tilt.x===a.tiltX&&this._tilt.y===a.tiltY||(this._tilt.set(a.tiltX,a.tiltY),this._flags=(0,q.addFlag)(r.TILT,this._flags)),this._buttons!==a.buttons&&(this._buttons=a.buttons,this._flags=(0,q.addFlag)(r.BUTTONS,this._flags)),this._pressure!==a.pressure&&(this._pressure=a.pressure,this._flags=(0,q.addFlag)(r.PRESSURE,this._flags)),this._rotation!==a.twist&&(this._rotation=a.twist,this._flags=(0,q.addFlag)(r.ROTATION,this._flags)),this}},{key:"update",value:function(){return this._flags?((0,q.hasFlag)(r.POSITION,this._flags)&&(this.trigger("move",this._position,this),this._flags=(0,q.removeFlag)(r.POSITION,this._flags)),(0,q.hasFlag)(r.SIZE,this._flags)&&(this.trigger("resize",this._size,this),this._flags=(0,q.removeFlag)(r.SIZE,this._flags)),(0,q.hasFlag)(r.TILT,this._flags)&&(this.trigger("tilt",this._tilt,this),this._flags=(0,q.removeFlag)(r.TILT,this._flags)),(0,q.hasFlag)(r.ROTATION,this._flags)&&(this.trigger("rotate",this._rotation,this),this._flags=(0,q.removeFlag)(r.ROTATION,this._flags)),(0,q.hasFlag)(r.BUTTONS,this._flags)&&(this.trigger("buttonsChanged",this._buttons,this),this._flags=(0,q.removeFlag)(r.BUTTONS,this._flags)),(0,q.hasFlag)(r.PRESSURE,this._flags)&&(this.trigger("pressureChanged",this._pressure,this),this._flags=(0,q.removeFlag)(r.PRESSURE,this._flags)),this):this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._position.destroy(),this._position=null,this._downPosition.destroy(),this._downPosition=null,this._size.destroy(),this._size=null,this._tilt.destroy(),this._tilt=null,this._id=null,this._type=null,this._buttons=null,this._pressure=null,this._rotation=null,this._flags=null}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"position",get:function(){return this._position}},{key:"downPosition",get:function(){return this._downPosition}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"size",get:function(){return this._size}},{key:"width",get:function(){return this._size.width}},{key:"height",get:function(){return this._size.height}},{key:"tilt",get:function(){return this._tilt}},{key:"buttons",get:function(){return this._buttons}},{key:"pressure",get:function(){return this._pressure}},{key:"rotation",get:function(){return this._rotation}}]),b}(l.default);b.default=s},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.align,e=void 0===c?"left":c,f=b.fill,g=void 0===f?"black":f,h=b.stroke,i=void 0===h?"black":h,j=b.strokeThickness,k=void 0===j?0:j,l=b.fontSize,m=void 0===l?20:l,n=b.fontWeight,o=void 0===n?"bold":n,p=b.fontFamily,q=void 0===p?"Arial":p,r=b.wordWrap,s=void 0!==r&&r,t=b.wordWrapWidth,u=void 0===t?100:t,v=b.baseline,w=void 0===v?"alphabetic":v,x=b.lineJoin,y=void 0===x?"miter":x,z=b.miterLimit,A=void 0===z?10:z,B=b.padding,C=void 0===B?0:B;d(this,a),this._align=e,this._fill=g,this._stroke=i,this._strokeThickness=k,this._fontSize=m,this._fontWeight=o,this._fontFamily=q,this._wordWrap=s,this._wordWrapWidth=u,this._baseline=w,this._lineJoin=y,this._miterLimit=A,this._padding=C,this._dirty=!0}return e(a,[{key:"apply",value:function(a){return a.font=this.font,a.fillStyle=this.fill,a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.textBaseline=this.baseline,a.lineJoin=this.lineJoin,a.miterLimit=this.miterLimit,this}},{key:"copy",value:function(a){return a!==this&&(this.align=a.align,this.fill=a.fill,this.stroke=a.stroke,this.strokeThickness=a.strokeThickness,this.fontSize=a.fontSize,this.fontWeight=a.fontWeight,this.fontFamily=a.fontFamily,this.wordWrap=a.wordWrap,this.wordWrapWidth=a.wordWrapWidth,this.baseline=a.baseline,this.lineJoin=a.lineJoin,this.miterLimit=a.miterLimit,this.padding=a.padding,this.dirty=a.dirty),this}},{key:"clone",value:function(){return(new a).copy(this)}},{key:"destroy",value:function(){this._align=null,this._fill=null,this._stroke=null,this._strokeThickness=null,this._fontSize=null,this._fontWeight=null,this._fontFamily=null,this._wordWrap=null,this._wordWrapWidth=null,this._baseline=null,this._lineJoin=null,this._miterLimit=null,this._padding=null,this._dirty=null}},{key:"align",get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this._dirty=!0)}},{key:"fill",get:function(){return this._fill},set:function(a){this._fill!==a&&(this._fill=a,this._dirty=!0)}},{key:"stroke",get:function(){return this._stroke},set:function(a){this._stroke!==a&&(this._stroke=a,this._dirty=!0)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this._dirty=!0)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this._dirty=!0)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this._dirty=!0)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(a){this._fontFamily!==a&&(this._fontFamily=a,this._dirty=!0)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this._dirty=!0)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this._dirty=!0)}},{key:"baseline",get:function(){return this._baseline},set:function(a){this._baseline!==a&&(this._baseline=a,this._dirty=!0)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this._dirty=!0)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this._dirty=!0)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this._dirty=!0)}},{key:"dirty",get:function(){return this._dirty},set:function(a){this._dirty=a}},{key:"font",get:function(){return this._fontWeight+" "+this._fontSize+"px "+this._fontFamily}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(0),h=c(2),i=d(h),j=c(7),k=d(j),l=c(16),m=d(l),n=function(){function a(b){e(this,a),this._totalLifetime=new m.default(0,g.TIME.SECONDS),this._elapsedLifetime=new m.default(0,g.TIME.SECONDS),this._position=new i.default(0,0),this._velocity=new i.default(0,0),this._scale=new i.default(1,1),this._rotation=0,this._rotationSpeed=0,this._tint=new k.default,void 0!==b&&this.copy(b)}return f(a,[{key:"update",value:function(a){var b=a.seconds;return this._elapsedLifetime.add(a),this._position.add(b*this._velocity.x,b*this._velocity.y),this._rotation+=b*this._rotationSpeed,this}},{key:"copy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.totalLifetime,c=a.elapsedLifetime,d=a.position,e=a.velocity,f=a.scale,g=a.rotation,h=a.rotationSpeed,i=a.tint;return this._totalLifetime.copy(b),this._elapsedLifetime.copy(c),this._position.copy(d),this._velocity.copy(e),this._scale.copy(f),this._rotation=g,this._rotationSpeed=h,this._tint.copy(i),this}},{key:"clone",value:function(){return new a({totalLifetime:this.totalLifetime,elapsedLifetime:this.elapsedLifetime,position:this.position,velocity:this.velocity,scale:this.scale,rotation:this.rotation,rotationSpeed:this.rotationSpeed,tint:this.tint})}},{key:"destroy",value:function(){this._totalLifetime.destroy(),this._totalLifetime=null,this._elapsedLifetime.destroy(),this._elapsedLifetime=null,this._position.destroy(),this._position=null,this._velocity.destroy(),this._velocity=null,this._scale.destroy(),this._scale=null,this._tint.destroy(),this._tint=null,this._rotation=null,this._rotationSpeed=null}},{key:"totalLifetime",get:function(){return this._totalLifetime},set:function(a){this._totalLifetime.copy(a)}},{key:"elapsedLifetime",get:function(){return this._elapsedLifetime},set:function(a){this._elapsedLifetime.copy(a)}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"velocity",get:function(){return this._velocity},set:function(a){this._velocity.copy(a)}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale.copy(a)}},{key:"rotation",get:function(){return this._rotation},set:function(a){var b=a%360;this._rotation=b<0?b+360:b}},{key:"rotationSpeed",get:function(){return this._rotationSpeed},set:function(a){this._rotationSpeed=a}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint.copy(a)}},{key:"remainingLifetime",get:function(){return m.default.Temp.set(this._totalLifetime.milliseconds-this._elapsedLifetime.milliseconds)}},{key:"elapsedRatio",get:function(){return this._elapsedLifetime.milliseconds/this._totalLifetime.milliseconds}},{key:"remainingRatio",get:function(){return this.remainingLifetime.milliseconds/this._totalLifetime.milliseconds}},{key:"expired",get:function(){return this._elapsedLifetime.greaterThan(this._totalLifetime)}}]),a}();b.default=n},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}Object.defineProperty(b,"__esModule",{value:!0}),b.settings=b.utils=b.support=void 0;var e=c(0);Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}})});var f=c(72);Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}})});var g=c(75);Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return g[a]}})});var h=c(81);Object.keys(h).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return h[a]}})});var i=c(86);Object.keys(i).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return i[a]}})});var j=c(92);Object.keys(j).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return j[a]}})});var k=c(94);Object.keys(k).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return k[a]}})});var l=c(95);Object.keys(l).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return l[a]}})});var m=c(5),n=d(m),o=c(1),p=d(o),q=c(3),r=d(q);b.support=n,b.utils=p,b.settings=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(73);Object.defineProperty(b,"Database",{enumerable:!0,get:function(){return d(e).default}});var f=c(33);Object.defineProperty(b,"ResourceLoader",{enumerable:!0,get:function(){return d(f).default}});var g=c(35);Object.defineProperty(b,"ResourceContainer",{enumerable:!0,get:function(){return d(g).default}});var h=c(18);Object.defineProperty(b,"ResourceFactory",{enumerable:!0,get:function(){return d(h).default}});var i=c(21);Object.defineProperty(b,"BlobFactory",{enumerable:!0,get:function(){return d(i).default}});var j=c(36);Object.defineProperty(b,"FontFactory",{enumerable:!0,get:function(){return d(j).default}});var k=c(13);Object.defineProperty(b,"ArrayBufferFactory",{enumerable:!0,get:function(){return d(k).default}});var l=c(14);Object.defineProperty(b,"MediaSourceFactory",{enumerable:!0,get:function(){return d(l).default}});var m=c(38);Object.defineProperty(b,"MusicFactory",{enumerable:!0,get:function(){return d(m).default}});var n=c(44);Object.defineProperty(b,"SoundFactory",{enumerable:!0,get:function(){return d(n).default}});var o=c(48);Object.defineProperty(b,"VideoFactory",{enumerable:!0,get:function(){return d(o).default}});var p=c(22);Object.defineProperty(b,"ImageFactory",{enumerable:!0,get:function(){return d(p).default}});var q=c(47);Object.defineProperty(b,"TextureFactory",{enumerable:!0,get:function(){return d(q).default}});var r=c(37);Object.defineProperty(b,"JSONFactory",{enumerable:!0,get:function(){return d(r).default}});var s=c(46);Object.defineProperty(b,"StringFactory",{enumerable:!0,get:function(){return d(s).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(0),i=c(5),j=d(i),k=function(){function a(b,c){if(f(this,a),!j.default.indexedDB)throw new Error("This browser does not support indexedDB!");this._name=b,this._version=c,this._database=null,this._connect=null,this._onCloseHandler=this._closeConnection.bind(this)}return g(a,[{key:"open",value:function(){var a=this;return this._connect||(this._connect=new Promise(function(b,c){var d=indexedDB.open(a._name,a._version);d.addEventListener("upgradeneeded",function(a){var b=a.target.result,d=a.target.transaction,f=[].concat(e(d.objectStoreNames));b.addEventListener("error",function(a){return c(a)}),b.addEventListener("abort",function(a){return c(a)});var g=!0,i=!1,j=void 0;try{for(var k,l=f[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){var m=k.value;h.DATABASE_TYPES.includes(m)||b.deleteObjectStore(m)}}catch(a){i=!0,j=a}finally{try{!g&&l.return&&l.return()}finally{if(i)throw j}}var n=!0,o=!1,p=void 0;try{for(var q,r=h.DATABASE_TYPES[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value;f.includes(s)||b.createObjectStore(s,{keyPath:"name"})}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}}),d.addEventListener("success",function(c){a._database=c.target.result,a._database.addEventListener("close",a._onCloseHandler),a._database.addEventListener("versionchange",a._onCloseHandler),b(a._database)}),d.addEventListener("error",function(a){return c(a)}),d.addEventListener("blocked",function(a){return c(a)})}))}},{key:"close",value:function(){return this._closeConnection(),Promise.resolve()}},{key:"getObjectStore",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return h.DATABASE_TYPES.includes(a)?this.open().then(function(c){return c.transaction([a],b).objectStore(a)}):Promise.reject(Error('Could not find ObjectStore named "'+a+'".'))}},{key:"clear",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return"*"===b?h.DATABASE_TYPES.reduce(function(b,c){return b.then(function(){return a.clear(c)})},Promise.resolve()):this.getObjectStore(b,"readwrite").then(function(a){return new Promise(function(b,c){var d=a.clear();d.addEventListener("success",function(a){return b(a)}),d.addEventListener("error",function(a){return c(a)})})})}},{key:"deleteDatabase",value:function(){var a=this;return this.close().then(function(){return new Promise(function(b,c){var d=indexedDB.deleteDatabase(a._name);d.addEventListener("success",function(a){return b(a)}),d.addEventListener("error",function(a){return c(a)})})})}},{key:"loadData",value:function(a,b){return this.getObjectStore(a).then(function(c){return new Promise(function(d,e){var f=c.get(b);f.addEventListener("success",function(c){var e=c.target.result,f=e&&e.data||null;d({type:a,name:b,data:f})}),f.addEventListener("error",function(a){return e(a)})})})}},{key:"saveData",value:function(a,b,c){return this.getObjectStore(a,"readwrite").then(function(d){return new Promise(function(e,f){var g=d.put({name:b,data:c});g.addEventListener("success",function(){
return e({type:a,name:b,data:c})}),g.addEventListener("error",function(a){return f(a)})})})}},{key:"removeData",value:function(a,b){return this.getObjectStore(a,"readwrite").then(function(c){return new Promise(function(d,e){var f=c.delete(b);f.addEventListener("success",function(){return d({type:a,name:b,data:null})}),f.addEventListener("error",function(a){return e(a)})})})}},{key:"destroy",value:function(){this._closeConnection(),this._name=null,this._version=null,this._onCloseHandler=null}},{key:"_closeConnection",value:function(){this._database&&(this._database.removeEventListener("close",this._onCloseHandler),this._database.removeEventListener("versionchange",this._onCloseHandler),this._database.close(),this._database=null),this._connect=null}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"open",get:function(){return null!==this._database}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(50),k=d(j),l=c(12),m=d(l),n=c(4),o=d(n),p=c(28),q=d(p),r=c(15),s=d(r),t=c(10),u=d(t),v=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._parent=null,a._globalTransform=new m.default,a._localBounds=new o.default,a._bounds=new q.default,a}return g(b,a),h(b,[{key:"getLocalBounds",value:function(){return this._localBounds}},{key:"getBounds",value:function(){return this.updateParentTransforms(),this.updateBounds(),this._bounds.getRect()}},{key:"updateBounds",value:function(){return this._bounds.reset().addRect(this.getLocalBounds(),this.getGlobalTransform()),this}},{key:"updateParentTransforms",value:function(){return this._parent&&this._parent.updateParentTransforms(),this._updateTransform&&(this.updateTransform(),this._updateTransform=!1),this}},{key:"getGlobalTransform",value:function(){return this._globalTransform.copy(this.getTransform()),this._parent&&this._globalTransform.combine(this._parent.getGlobalTransform()),this._globalTransform}},{key:"getNormals",value:function(){return this.getBounds().getNormals()}},{key:"project",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u.default;return this.getBounds().project(a,b)}},{key:"contains",value:function(a,b){return this.getBounds().contains(a,b)}},{key:"intersects",value:function(a){return this.rotation%90==0&&a.rotation%90==0?s.default.intersectionRectRect(this.getBounds(),a.getBounds()):s.default.intersectionSAT(this,a)}},{key:"getCollision",value:function(a){return this.rotation%90==0&&a.rotation%90==0?s.default.collisionRectRect(this.getBounds(),a.getBounds()):s.default.collisionSAT(this,a)}},{key:"setOrigin",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var c=this.getBounds();a*=c.width,b*=c.height}return this.origin.set(a,b),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._globalTransform.destroy(),this._globalTransform=null,this._localBounds.destroy(),this._localBounds=null,this._bounds.destroy(),this._bounds=null,this._parent=null}},{key:"scene",get:function(){return this._scene},set:function(a){this._scene=a}},{key:"parent",get:function(){return this._parent},set:function(a){this._parent=a}},{key:"globalTransform",get:function(){return this.getGlobalTransform()}},{key:"localBounds",get:function(){return this.getLocalBounds()}},{key:"bounds",get:function(){return this.getBounds()}}]),b}(k.default);b.default=v},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(6);Object.defineProperty(b,"EventEmitter",{enumerable:!0,get:function(){return d(e).default}});var f=c(76);Object.defineProperty(b,"Application",{enumerable:!0,get:function(){return d(f).default}});var g=c(78);Object.defineProperty(b,"Quadtree",{enumerable:!0,get:function(){return d(g).default}});var h=c(79);Object.defineProperty(b,"Scene",{enumerable:!0,get:function(){return d(h).default}});var i=c(51);Object.defineProperty(b,"SceneManager",{enumerable:!0,get:function(){return d(i).default}});var j=c(7);Object.defineProperty(b,"Color",{enumerable:!0,get:function(){return d(j).default}});var k=c(16);Object.defineProperty(b,"Time",{enumerable:!0,get:function(){return d(k).default}});var l=c(29);Object.defineProperty(b,"Clock",{enumerable:!0,get:function(){return d(l).default}});var m=c(80);Object.defineProperty(b,"Timer",{enumerable:!0,get:function(){return d(m).default}});var n=c(28);Object.defineProperty(b,"Bounds",{enumerable:!0,get:function(){return d(n).default}});var o=c(15);Object.defineProperty(b,"Collision",{enumerable:!0,get:function(){return d(o).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=c(29),m=d(l),n=c(51),o=d(n),p=c(52),q=d(p),r=c(63),s=d(r),t=c(33),u=d(t),v=c(3),w=d(v),x=c(9),y=(d(x),c(1),function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),d=Object.assign({},w.default.APP_OPTIONS,a);return c._config=d,c._canvas=d.canvas instanceof HTMLCanvasElement?d.canvas:document.createElement("canvas"),c._canvasParent=d.canvasParent instanceof HTMLElement?d.canvasParent:null,c._loader=new u.default({resourcePath:d.resourcePath,database:d.database}),c._renderManager=new q.default(c),c._inputManager=new s.default(c),c._sceneManager=new o.default(c),c._updateHandler=c.update.bind(c),c._updateId=0,c._delta=new m.default(!1),c._running=!1,c._canvasParent&&c._canvasParent.appendChild(c._canvas),c}return g(b,a),h(b,[{key:"start",value:function(a){return this._running||(this._running=!0,this._sceneManager.setScene(a),this._updateId=requestAnimationFrame(this._updateHandler),this._delta.restart(),this.trigger("start",this)),this}},{key:"update",value:function(){return this._running&&(this._inputManager.update(),this._sceneManager.update(this._delta.elapsedTime),this.trigger("update",this),this._updateId=requestAnimationFrame(this._updateHandler),this._delta.restart()),this}},{key:"stop",value:function(){return this._running&&(cancelAnimationFrame(this._updateId),this._sceneManager.setScene(null),this._delta.stop(),this._running=!1,this.trigger("stop",this)),this}},{key:"resize",value:function(a,b){return this._renderManager.resize(a,b),this.trigger("resize",a,b,this),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.stop(),this._canvasParent&&this._canvasParent.removeChild(this._canvas),this._loader.destroy(),this._loader=null,this._inputManager.destroy(),this._inputManager=null,this._renderManager.destroy(),this._renderManager=null,this._sceneManager.destroy(),this._sceneManager=null,this._delta.destroy(),this._delta=null,this._config=null,this._canvas=null,this._canvasParent=null,this._updateHandler=null,this._updateId=null,this._running=null}},{key:"canvas",get:function(){return this._canvas}},{key:"config",get:function(){return this._config}},{key:"loader",get:function(){return this._loader}},{key:"renderManager",get:function(){return this._renderManager}},{key:"inputManager",get:function(){return this._inputManager}},{key:"sceneManager",get:function(){return this._sceneManager}},{key:"running",get:function(){return this._running}},{key:"FPS",get:function(){return 1e3/this._delta.elapsedTime.milliseconds}}]),b}(k.default));b.default=y},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(a){return[]},m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(4),i=d(h),j=c(3),k=d(j),l=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Empty,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,a),this._bounds=b.clone(),this._level=c,this._nodes=new Map,this._children=new Set}return g(a,[{key:"clear",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._nodes.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.clear()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this._nodes.clear(),this._children.clear(),this}},{key:"insert",value:function(a){var b=this._children,c=this._getNode(a);if(c)return c.insert(a),this;if(b.add(a),b.size>k.default.QUAD_TREE_MAX_OBJECTS&&this._level<k.default.QUAD_TREE_MAX_LEVEL){this._split();var d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=this._getNode(i);j&&(b.delete(i),j.insert(i))}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}return this}},{key:"getRelatedChildren",value:function(a){var b=this._getNode(a);return b?[].concat(e(b.getRelatedChildren(a)),e(this._children)):[].concat(e(this._children))}},{key:"destroy",value:function(){this._bounds.destroy(),this._bounds=null,this._nodes.clear(),this._nodes=null,this._children.clear(),this._children=null,this._level=null}},{key:"_split",value:function(){if(this._nodes.size){var b=i.default.Temp,c=this._level+1,d=this._bounds,e=d.width/2|0,f=d.height/2|0,g=d.left,h=d.top,j=g+e,k=h+f;this._nodes.set(0,new a(b.set(g,h,e,f),c)).set(1,new a(b.set(j,h,e,f),c)).set(2,new a(b.set(g,k,e,f),c)).set(3,new a(b.set(j,k,e,f),c))}}},{key:"_getNode",value:function(a){var b=a.getBounds(),c=!0,d=!1,e=void 0;try{for(var f,g=this._nodes.values()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(b.containsRect(h.getBounds()))return h}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return null}},{key:"bounds",get:function(){return this._bounds}},{key:"level",get:function(){return this._level}},{key:"nodes",get:function(){return this._nodes}},{key:"children",get:function(){return this._children}}]),a}();b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(6),k=d(j),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._app=null,a&&Object.assign(c,a),c}return g(b,a),h(b,[{key:"load",value:function(a){}},{key:"init",value:function(a){}},{key:"update",value:function(a){}},{key:"draw",value:function(a){}},{key:"unload",value:function(){}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._app=null}},{key:"app",get:function(){return this._app},set:function(a){this._app=a}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(0),j=c(29),k=d(j),l=c(16),m=(d(l),function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.TIME.MILLISECONDS;e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,!1));return g._limit=c,a&&g.restart(c,d),g}return g(b,a),h(b,[{key:"reset",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._limit,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.TIME.MILLISECONDS;return this._limit=a*b,this._timeBuffer=0,this._running=!1,this}},{key:"restart",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._limit,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.TIME.MILLISECONDS;return this.reset(a,b),this.start(),this}},{key:"running",get:function(){return this._running&&!this.expired}},{key:"expired",get:function(){return this.elapsedMilliseconds>=this._limit}},{key:"remainingMilliseconds",get:function(){return Math.max(0,this._limit-this.elapsedMilliseconds)}},{key:"remainingSeconds",get:function(){return this.remainingMilliseconds/i.TIME.SECONDS}},{key:"remainingMinutes",get:function(){return this.remainingMilliseconds/i.TIME.MINUTES}},{key:"remainingHours",get:function(){return this.remainingMilliseconds/i.TIME.HOURS}}]),b}(k.default));b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(52);Object.defineProperty(b,"RenderManager",{enumerable:!0,get:function(){return d(e).default}});var f=c(30);Object.defineProperty(b,"RenderTarget",{enumerable:!0,get:function(){return d(f).default}});var g=c(82);Object.defineProperty(b,"RenderTexture",{enumerable:!0,get:function(){return d(g).default}});var h=c(9);Object.defineProperty(b,"Texture",{enumerable:!0,get:function(){return d(h).default}});var i=c(53);Object.defineProperty(b,"View",{enumerable:!0,get:function(){return d(i).default}});var j=c(31);Object.defineProperty(b,"Renderer",{enumerable:!0,get:function(){return d(j).default}});var k=c(25);Object.defineProperty(b,"Drawable",{enumerable:!0,get:function(){return d(k).default}});var l=c(83);Object.defineProperty(b,"Drawing",{enumerable:!0,get:function(){return d(l).default}});var m=c(24);Object.defineProperty(b,"Container",{enumerable:!0,get:function(){return d(m).default}});var n=c(84);Object.defineProperty(b,"Text",{enumerable:!0,get:function(){return d(n).default}});var o=c(69);Object.defineProperty(b,"TextStyle",{enumerable:!0,get:function(){return d(o).default}});var p=c(32);Object.defineProperty(b,"Shader",{enumerable:!0,get:function(){return d(p).default}});var q=c(57);Object.defineProperty(b,"ShaderAttribute",{enumerable:!0,get:function(){return d(q).default}});var r=c(58);Object.defineProperty(b,"ShaderUniform",{enumerable:!0,get:function(){return d(r).default}});var s=c(19);Object.defineProperty(b,"Sprite",{enumerable:!0,get:function(){return d(s).default}});var t=c(85);Object.defineProperty(b,"Spritesheet",{enumerable:!0,get:function(){return d(t).default}});var u=c(55);Object.defineProperty(b,"SpriteRenderer",{enumerable:!0,get:function(){return d(u).default}});var v=c(56);Object.defineProperty(b,"SpriteShader",{enumerable:!0,get:function(){return d(v).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(3),l=d(k),m=c(1),n=c(30),o=d(n),p=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=d.scaleMode,h=void 0===g?l.default.SCALE_MODE:g,i=d.wrapMode,k=void 0===i?l.default.WRAP_MODE:i,m=d.premultiplyAlpha,n=void 0===m?l.default.PREMULTIPLY_ALPHA:m,o=d.generateMipMap,p=void 0===o?l.default.GENERATE_MIPMAP:o;e(this,b);var q=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,!1));return q._source=null,q._texture=null,q._scaleMode=null,q._wrapMode=null,q._premultiplyAlpha=null,q._generateMipMap=null,q._flipY=!0,q._flags=j.TEXTURE_FLAGS.SOURCE|j.TEXTURE_FLAGS.SIZE,q.setScaleMode(h),q.setWrapMode(k),q.premultiplyAlpha=n,q.generateMipMap=p,q}return g(b,a),h(b,[{key:"connect",value:function(a){return this._context||(this._context=a,this._texture=a.createTexture(),this._framebuffer=a.createFramebuffer(),this.bindTexture(),this.bindFramebuffer(),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._texture,0),this.unbindTexture(),this.unbindFramebuffer()),this}},{key:"disconnect",value:function(){return this.unbindFramebuffer(),this.unbindTexture(),this._context&&(this._context.deleteFramebuffer(this._framebuffer),this._context.deleteTexture(this._texture),this._context=null,this._texture=null,this._framebuffer=null),this}},{key:"bindTexture",value:function(a){if(!this._context)throw new Error("Texture has to be connected first!");var b=this._context;return void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this._texture),this.update(),this}},{key:"unbindTexture",value:function(){if(this._context){var a=this._context;a.bindTexture(a.TEXTURE_2D,null)}return this}},{key:"setScaleMode",value:function(a){return this._scaleMode!==a&&(this._scaleMode=a,this._flags=(0,m.addFlag)(j.TEXTURE_FLAGS.SCALE_MODE,this._flags)),this}},{key:"setWrapMode",value:function(a){return this._wrapMode!==a&&(this._wrapMode=a,this._flags=(0,m.addFlag)(j.TEXTURE_FLAGS.WRAP_MODE,this._flags)),this}},{key:"setPremultiplyAlpha",value:function(a){return this._premultiplyAlpha!==a&&(this._premultiplyAlpha=a,this._flags=(0,m.addFlag)(j.TEXTURE_FLAGS.PREMULTIPLY_ALPHA,this._flags)),this}},{key:"setSource",value:function(a){return this._source!==a&&(this._source=a,this.updateSource()),this}},{key:"updateSource",value:function(){return this}},{key:"setSize",value:function(a,b){return this._size.equals({width:a,height:b})||(this._size.set(a,b),this._defaultView.resize(a,b),this.updateViewport(),this._flags=(0,m.addFlag)(j.TEXTURE_FLAGS.SIZE,this._flags)),this}},{key:"update",value:function(){if(this._flags&&this._context){var a=this._context;if((0,m.hasFlag)(j.TEXTURE_FLAGS.SCALE_MODE,this._flags)){var b=this._scaleMode===j.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b),this._flags=(0,m.removeFlag)(j.TEXTURE_FLAGS.SCALE_MODE,this._flags)}if((0,m.hasFlag)(j.TEXTURE_FLAGS.WRAP_MODE,this._flags)){var c=this._wrapMode===j.WRAP_MODES.CLAMP_TO_EDGE&&a.CLAMP_TO_EDGE,d=this._wrapMode===j.WRAP_MODES.REPEAT&&a.REPEAT,e=c||d||a.MIRRORED_REPEAT;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e),this._flags=(0,m.removeFlag)(j.TEXTURE_FLAGS.WRAP_MODE,this._flags)}(0,m.hasFlag)(j.TEXTURE_FLAGS.PREMULTIPLY_ALPHA,this._flags)&&(a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._flags=(0,m.removeFlag)(j.TEXTURE_FLAGS.PREMULTIPLY_ALPHA,this._flags)),(0,m.hasFlag)(j.TEXTURE_FLAGS.SOURCE,this._flags)&&((0,m.hasFlag)(j.TEXTURE_FLAGS.SIZE,this._flags)||!this._source?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this._source):a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,this._source),this._generateMipMap&&a.generateMipmap(a.TEXTURE_2D),this._flags=(0,m.removeFlag)(j.TEXTURE_FLAGS.SOURCE|j.TEXTURE_FLAGS.SIZE,this._flags))}return this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._source=null,this._texture=null,this._scaleMode=null,this._wrapMode=null,this._premultiplyAlpha=null,this._flags=null,this._flipY=null}},{key:"source",get:function(){return this._source},set:function(a){this.setSource(a)}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(a){this.setScaleMode(a)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(a){this.setWrapMode(a)}},{key:"premultiplyAlpha",get:function(){return this._premultiplyAlpha},set:function(a){this.setPremultiplyAlpha(a)}},{key:"generateMipMap",get:function(){return this._generateMipMap},set:function(a){this._generateMipMap=a}},{key:"flipY",get:function(){return this._flipY},set:function(a){this._flipY=a}},{key:"powerOfTwo",get:function(){return(0,m.powerOfTwo)(this.width)&&(0,m.powerOfTwo)(this.height)}}]),b}(o.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(24),k=d(j),l=c(7),m=d(l),n=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._lineWidth=0,a._lineColor=m.default.Black.clone(),a._fillColor=m.default.Black.clone(),a}return g(b,a),h(b,[{key:"closePath",value:function(){return this}},{key:"moveTo",value:function(a,b){return this}},{key:"lineTo",value:function(a,b){return this}},{key:"bezierCurveTo",value:function(a,b,c,d,e,f){return this}},{key:"quadraticCurveTo",value:function(a,b,c,d){return this}},{key:"arc",value:function(a,b,c,d,e){arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this}},{key:"arcTo",value:function(a,b,c,d,e){return this}},{key:"ellipse",value:function(a,b,c,d,e,f,g){arguments.length>7&&void 0!==arguments[7]&&arguments[7];return this}},{key:"rect",value:function(a,b,c,d){return this}},{key:"drawRect",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.x,a.y,a.width,a.height;return this}},{key:"drawCirlce",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.x,a.y,a.radius;return this}},{key:"drawPolygon",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.x,a.y,a.points;return this}},{key:"setLineStyle",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.width,c=a.color;return void 0!==b&&(this.lineWidth=b),void 0!==c&&(this.lineColor=c),this}},{key:"render",value:function(a){if(this.visible&&a.insideViewport(this)){var b=a.getRenderer("primitive");a.setRenderer(b),b.render(this)}return this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._lineColor.destroy(),this._lineColor=null,this._fillColor.destroy(),this._fillColor=null,this._lineWidth=null}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(a){this._lineWidth=a}},{key:"lineColor",get:function(){return this._lineColor},set:function(a){this._lineColor.copy(a)}},{key:"fillColor",get:function(){return this._fillColor},set:function(a){this._fillColor.copy(a)}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(19),l=d(k),m=c(9),n=d(m),o=c(69),p=d(o),q=c(4),r=d(q),s=new Map,t=function(a){function b(a,c,d){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document.createElement("canvas");e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new n.default(g,d)));return h._text=null,h._style=null,h._canvas=g,h._context=g.getContext("2d"),h._dirty=!0,h.setText(a).setStyle(c).updateTexture(),h}return g(b,a),h(b,[{key:"setText",value:function(a){return this._text!==a&&(this._text=a,this._dirty=!0),this}},{key:"setStyle",value:function(a){return this._style=a instanceof p.default?a:new p.default(a),this._dirty=!0,this}},{key:"setCanvas",value:function(a){return this._canvas!==a&&(this._canvas=a,this._context=a.getContext("2d"),this._dirty=!0,this.setTextureFrame(r.default.Temp.set(0,0,a.width,a.height))),this}},{key:"updateTexture",value:function(){if(this._style&&(this._dirty||this._style.dirty)){
var a=this._canvas,c=this._context,d=this._style.apply(c),e=d.wordWrap?this.getWordWrappedText():this._text,f=b.determineFontHeight(c.font)+d.strokeThickness,g=e.split(j.NEWLINE),h=g.map(function(a){return c.measureText(a)}),i=h.reduce(function(a,b){return Math.max(a,b.width)},0),k=Math.ceil(i+d.strokeThickness+2*d.padding),l=Math.ceil(f*g.length+2*d.padding);k!==a.width||l!==a.height?(a.width=k,a.height=l,this.setTextureFrame(r.default.Temp.set(0,0,k,l))):c.clearRect(0,0,k,l),d.apply(c);for(var m=0;m<g.length;m++){var n=h[m],o=i-n.width,p="right"===d.align?o:o/2,q=d.padding+d.strokeThickness/2,s=n.actualBoundingBoxLeft+("left"===d.align?0:p)+q,t=n.fontBoundingBoxAscent+f*m+q;d.stroke&&d.strokeThickness&&c.strokeText(g[m],s,t),d.fill&&c.fillText(g[m],s,t)}this.texture.updateSource(),this._dirty=!1,this._style.dirty=!1}return this}},{key:"getWordWrappedText",value:function(){for(var a=this._context,b=this._style.wordWrapWidth,c=this._text.split("\n"),d=a.measureText(" ").width,e=b,f="",g=0;g<c.length;g++){var h=c[g].split(" ");g>0&&(f+="\n");for(var i=0;i<h.length;i++){var j=h[i],k=a.measureText(j).width,l=k+d;l>e?(i>0&&(f+="\n"),e=b):e-=l,f+=j+" "}}return f}},{key:"render",value:function(a){return this.visible&&(this.updateTexture(),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"render",this).call(this,a)),this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._text=null,this._style=null,this._canvas=null,this._context=null,this._dirty=null}},{key:"text",get:function(){return this._text},set:function(a){this.setText(a)}},{key:"style",get:function(){return this._style},set:function(a){this.setStyle(a)}},{key:"canvas",get:function(){return this._canvas},set:function(a){this.setCanvas(a)}}],[{key:"determineFontHeight",value:function(a){if(!s.has(a)){var b=document.body,c=document.createElement("div");c.appendChild(document.createTextNode("M")),c.setAttribute("style","font: "+a+";position:absolute;top:0;left:0"),b.appendChild(c),s.set(a,c.offsetHeight),b.removeChild(c)}return s.get(a)}}]),b}(l.default);b.default=t},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(9),k=(d(j),c(4)),l=d(k),m=c(19),n=d(m),o=c(1),p=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return g._frames=new Map,g._frameNames=[],g._currentFrame=null,g.parse(c),void 0!==d?g.setFrame(d):g.setFrame(g._frameNames[0]),g}return g(b,a),h(b,[{key:"parse",value:function(a){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.clearFrames();var b=!0,c=!1,d=void 0;try{for(var e,f=Object.keys(a)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this.addFrame(g,a[g])}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}return this}},{key:"addFrame",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.x,d=b.y,e=b.width,f=b.height;return this._frames.set(a,new l.default(c,d,e,f)),this._frameNames.push(a),this}},{key:"removeFrame",value:function(a){var b=this.getFrame(a),c=this._frameNames.indexOf(a);return this._frames.delete(a),(0,o.removeItems)(this._frameNames,c,1),b.destroy(),this}},{key:"getFrame",value:function(a){if(!this._frames.has(a))throw new Error('Spritesheet could not find frame "'+a+'".');return this._frames.get(a)}},{key:"setFrame",value:function(a){return this._currentFrame!==a&&(this._currentFrame=a,this.setTextureFrame(this.getFrame(a))),this}},{key:"clearFrames",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._frames.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){d.value.destroy()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return this._frames.clear(),this._frameNames.length=0,this}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this.clearFrames(),this._frames=null,this._frameNames=null,this._currentFrame=null}}]),b}(n.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(70);Object.defineProperty(b,"Particle",{enumerable:!0,get:function(){return d(e).default}});var f=c(87);Object.defineProperty(b,"ParticleEmitter",{enumerable:!0,get:function(){return d(f).default}});var g=c(62);Object.defineProperty(b,"ParticleShader",{enumerable:!0,get:function(){return d(g).default}});var h=c(61);Object.defineProperty(b,"ParticleRenderer",{enumerable:!0,get:function(){return d(h).default}});var i=c(17);Object.defineProperty(b,"ParticleModifier",{enumerable:!0,get:function(){return d(i).default}});var j=c(88);Object.defineProperty(b,"ForceModifier",{enumerable:!0,get:function(){return d(j).default}});var k=c(89);Object.defineProperty(b,"ScaleModifier",{enumerable:!0,get:function(){return d(k).default}});var l=c(90);Object.defineProperty(b,"TorqueModifier",{enumerable:!0,get:function(){return d(l).default}});var m=c(91);Object.defineProperty(b,"ColorModifier",{enumerable:!0,get:function(){return d(m).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(25),l=d(k),m=c(70),n=d(m),o=c(4),p=d(o),q=c(16),r=d(q),s=c(2),t=d(s),u=c(7),v=d(u),w=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.totalLifetime,g=c.elapsedLifetime,h=c.position,i=c.velocity,k=c.scale,l=c.rotation,m=c.rotationSpeed,n=c.tint;e(this,b);var o=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return o._particleTotalLifetime=d&&d.clone()||new r.default(1,j.TIME.SECONDS),o._particleElapsedLifetime=g&&g.clone()||new r.default(0,j.TIME.SECONDS),o._particlePosition=h&&h.clone()||new t.default(0,0),o._particleVelocity=i&&i.clone()||new t.default(0,0),o._particleScale=k&&k.clone()||new t.default(1,1),o._particleRotation=l||0,o._particleRotationSpeed=m||0,o._particleTint=n&&n.clone()||new v.default(255,255,255),o._particles=[],o._graveyard=[],o._modifiers=[],o._texture=null,o._textureFrame=new p.default,o._textureCoords=new p.default,o._updateTexCoords=!0,o._emissionRate=1,o._emissionDelta=0,a&&o.setTexture(a),o}return g(b,a),h(b,[{key:"setParticleOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.totalLifetime,c=a.elapsedLifetime,d=a.position,e=a.velocity,f=a.scale,g=a.rotation,h=a.rotationSpeed,i=a.tint;return void 0!==b&&(this.particleTotalLifetime=b),void 0!==c&&(this.particleElapsedLifetime=c),void 0!==d&&(this.particlePosition=d),void 0!==e&&(this.particleVelocity=e),void 0!==f&&(this.particleScale=f),void 0!==g&&(this.particleRotation=g),void 0!==h&&(this.particleRotationSpeed=h),void 0!==i&&(this.particleTint=i),this}},{key:"setTexture",value:function(a){return this._texture!==a&&(this._texture=a,this.resetTextureFrame()),this}},{key:"setTextureFrame",value:function(a){return this._textureFrame.copy(a),this._updateTexCoords=!0,this.localBounds.set(0,0,a.width,a.height),this}},{key:"resetTextureFrame",value:function(){return this.setTextureFrame(p.default.Temp.set(0,0,this._texture.width,this._texture.height))}},{key:"setEmissionRate",value:function(a){return this._emissionRate=a,this}},{key:"addModifier",value:function(a){return this._modifiers.push(a),this}},{key:"getParticleCount",value:function(a){var b=this._emissionRate*a.seconds+this._emissionDelta,c=0|b;return this._emissionDelta=b-c,c}},{key:"update",value:function(a){for(var b=this.getParticleCount(a),c=this.particleOptions,d=this._particles,e=this._graveyard,f=this._modifiers,g=0;g<b;g++){var h=e.pop()||new n.default;d.push(h.copy(c))}for(var i=d.length-1;i>=0;i--){var j=d[i].update(a);if(j.expired)e.push(d.splice(i,1)[0]);else{var k=!0,l=!1,m=void 0;try{for(var o,p=f[Symbol.iterator]();!(k=(o=p.next()).done);k=!0){o.value.apply(j,a)}}catch(a){l=!0,m=a}finally{try{!k&&p.return&&p.return()}finally{if(l)throw m}}}}return this}},{key:"render",value:function(a){if(this.visible&&a.insideViewport(this)){var b=a.getRenderer("particle");a.setRenderer(b),b.render(this)}return this}},{key:"copy",value:function(a){return this.particleOptions=a.particleOptions,this.particles=a.particles,this.texture=a.texture,this.textureFrame=a.textureFrame,this.emissionRate=a.emissionRate,this.modifiers=a.modifiers,this}},{key:"clone",value:function(){var a=new b(this.texture,this.particleOptions);return a.particles=this.particles,a.textureFrame=this.textureFrame,a.emissionRate=this.emissionRate,a.modifiers=this.modifiers,a}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this);var a=!0,c=!1,d=void 0;try{for(var e,f=this._particles[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}var g=!0,h=!1,j=void 0;try{for(var k,l=this._graveyard[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){k.value.destroy()}}catch(a){h=!0,j=a}finally{try{!g&&l.return&&l.return()}finally{if(h)throw j}}this._particleTotalLifetime.destroy(),this._particleTotalLifetime=null,this._particleElapsedLifetime.destroy(),this._particleElapsedLifetime=null,this._particlePosition.destroy(),this._particlePosition=null,this._particleVelocity.destroy(),this._particleVelocity=null,this._particleScale.destroy(),this._particleScale=null,this._particleTint.destroy(),this._particleTint=null,this._particles.length=0,this._particles=null,this._graveyard.length=0,this._graveyard=null,this._modifiers.length=0,this._modifiers=null,this._textureFrame.destroy(),this._textureFrame=null,this._textureCoords.destroy(),this._textureCoords=null,this._texture=null,this._blendMode=null,this._emissionRate=null,this._emissionDelta=null,this._updateTexCoords=null,this._particleRotation=null,this._particleRotationSpeed=null}},{key:"particleTotalLifetime",get:function(){return this._particleTotalLifetime},set:function(a){this._particleTotalLifetime.copy(a)}},{key:"particleElapsedLifetime",get:function(){return this._particleElapsedLifetime},set:function(a){this._particleElapsedLifetime.copy(a)}},{key:"particlePosition",get:function(){return this._particlePosition},set:function(a){this._particlePosition.copy(a)}},{key:"particleVelocity",get:function(){return this._particleVelocity},set:function(a){this._particleVelocity.copy(a)}},{key:"particleScale",get:function(){return this._particleScale},set:function(a){this._particleScale.copy(a)}},{key:"particleRotation",get:function(){return this._particleRotation},set:function(a){var b=a%360;this._particleRotation=b<0?b+360:b}},{key:"particleRotationSpeed",get:function(){return this._particleRotationSpeed},set:function(a){this._particleRotationSpeed=a}},{key:"particleTint",get:function(){return this._particleTint},set:function(a){this._particleTint.copy(a)}},{key:"particles",get:function(){return this._particles},set:function(a){for(var b=this._graveyard,c=this._particles,d=a,e=c.length,f=d.length,g=e-f,h=0;h<e;h++)c[h].copy(d[h]);if(g>0)for(var i=f;i<e;i++)b.push(c.pop());else if(g<0)for(var j=e;j<f;j++){var k=b.pop()||new n.default;a.push(k.copy(d[j]))}}},{key:"particleOptions",get:function(){return{totalLifetime:this.particleTotalLifetime,elapsedLifetime:this.particleElapsedLifetime,position:this.particlePosition,velocity:this.particleVelocity,scale:this.particleScale,rotation:this.particleRotation,rotationSpeed:this.particleRotationSpeed,tint:this.particleTint}},set:function(a){this.setParticleOptions(a)}},{key:"modifiers",get:function(){return this._modifiers},set:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=this._modifiers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){e.value.destroy()}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this._modifiers.length=0;var g=!0,h=!1,i=void 0;try{for(var j,k=a[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;this._modifiers.push(l.clone())}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}}},{key:"texture",get:function(){return this._texture},set:function(a){this.setTexture(a)}},{key:"textureFrame",get:function(){return this._textureFrame},set:function(a){this.setTextureFrame(a)}},{key:"textureCoords",get:function(){if(this._updateTexCoords){var a=this._textureFrame,b=this._texture;this._textureCoords.set(a.left/b.width,a.top/b.height,a.right/b.width,a.bottom/b.height),this._updateTexCoords=!1}return this._textureCoords},set:function(a){this._textureCoords.copy(a),this._updateTexCoords=!1}},{key:"emissionRate",get:function(){return this._emissionRate},set:function(a){this.setEmissionRate(a)}},{key:"width",get:function(){return Math.abs(this.scale.x)*this._textureFrame.width},set:function(a){this.scale.x=a/this._textureFrame.width}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._textureFrame.height},set:function(a){this.scale.y=a/this._textureFrame.height}}]),b}(l.default);b.default=w},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(17),j=d(i),k=c(2),l=d(k),m=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._velocity=new l.default(a,c),d}return g(b,a),h(b,[{key:"setVelocity",value:function(a){return this._velocity.copy(a),this}},{key:"apply",value:function(a,b){var c=this._velocity,d=c.x,e=c.y,f=b.seconds;return a.velocity.add(d*f,e*f),this}},{key:"clone",value:function(){return new b(this._velocity.x,this._velocity.y)}},{key:"destroy",value:function(){this._velocity.destroy(),this._velocity=null}},{key:"velocity",get:function(){return this._velocity},set:function(a){this.setVelocity(a)}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(17),j=d(i),k=c(2),l=d(k),m=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._scaleFactor=new l.default(a,c),d}return g(b,a),h(b,[{key:"setScaleFactor",value:function(a){return this._scaleFactor.copy(a),this}},{key:"apply",value:function(a,b){var c=this._scaleFactor,d=c.x,e=c.y,f=b.seconds;a.scale.add(d*f,e*f)}},{key:"clone",value:function(){return new b(this._scaleFactor.x,this._scaleFactor.y)}},{key:"destroy",value:function(){this._scaleFactor.destroy(),this._scaleFactor=null}},{key:"scaleFactor",get:function(){return this._scaleFactor},set:function(a){this.setScaleFactor(a)}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(17),j=d(i),k=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._angularAcceleration=a,c}return g(b,a),h(b,[{key:"setAngularAcceleration",value:function(a){return this._angularAcceleration=a,this}},{key:"apply",value:function(a,b){return a.rotationSpeed=a.rotationSpeed+this._angularAcceleration*b.seconds,this}},{key:"clone",value:function(){return new b(this._angularAcceleration)}},{key:"destroy",value:function(){this._angularAcceleration=null}},{key:"angularAcceleration",get:function(){return this._angularAcceleration},set:function(a){this.setAngularAcceleration(a)}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(17),j=d(i),k=c(2),l=(d(k),c(7)),m=d(l),n=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._fromColor=a&&a.clone()||new m.default,d._toColor=c&&c.clone()||new m.default,d}return g(b,a),h(b,[{key:"setFromColor",value:function(a){return this._fromColor.copy(a),this}},{key:"setToColor",value:function(a){return this._toColor.copy(a),this}},{key:"apply",value:function(a,b){var c=a.elapsedRatio,d=this._fromColor,e=d.r,f=d.g,g=d.b,h=d.a,i=this._toColor,j=i.r,k=i.g,l=i.b,m=i.a;return a.tint.set((j-e)*c+e,(k-f)*c+f,(l-g)*c+g,(m-h)*c+h),this}},{key:"clone",value:function(){return new b(this._fromColor,this._toColor)}},{key:"destroy",value:function(){this._fromColor.destroy(),this._fromColor=null,this._toColor.destroy(),this._toColor=null}},{key:"fromColor",get:function(){return this._fromColor},set:function(a){this.setFromColor(a)}},{key:"toColor",get:function(){return this._toColor},set:function(a){this.setToColor(a)}}]),b}(j.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(11);Object.defineProperty(b,"ChannelManager",{enumerable:!0,get:function(){return d(e).default}});var f=c(93);Object.defineProperty(b,"Input",{enumerable:!0,get:function(){return d(f).default}});var g=c(63);Object.defineProperty(b,"InputManager",{enumerable:!0,get:function(){return d(g).default}});var h=c(64);Object.defineProperty(b,"Keyboard",{enumerable:!0,get:function(){return d(h).default}});var i=c(43);Object.defineProperty(b,"GamepadControl",{enumerable:!0,get:function(){return d(i).default}});var j=c(42);Object.defineProperty(b,"GamepadMapping",{enumerable:!0,get:function(){return d(j).default}});var k=c(41);Object.defineProperty(b,"DefaultGamepadMapping",{enumerable:!0,get:function(){return d(k).default}});var l=c(66);Object.defineProperty(b,"Gamepad",{enumerable:!0,get:function(){return d(l).default}});var m=c(65);Object.defineProperty(b,"GamepadManager",{enumerable:!0,get:function(){return d(m).default}});var n=c(68);Object.defineProperty(b,"Pointer",{enumerable:!0,get:function(){return d(n).default}});var o=c(67);Object.defineProperty(b,"PointerManager",{enumerable:!0,get:function(){return d(o).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(0),k=c(3),l=d(k),m=c(6),n=d(m),o=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.start,g=c.stop,h=c.active,i=c.trigger,k=c.context,m=c.gamepadIndex,n=void 0===m?0:m,o=c.pointerIndex,p=void 0===o?0:o,q=c.threshold,r=void 0===q?l.default.INPUT_THRESHOLD:q;e(this,b);var s=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return s._channels=new Set("number"==typeof a?[a]:a),s._threshold=r,s._pointerIndex=p,s._pointerOffset=p*j.INPUT_CHANNELS_HANDLER,s._gamepadIndex=n,s._gamepadOffset=n*j.INPUT_CHANNELS_HANDLER,s._triggered=0,s._value=0,d&&s.on("start",d,k),g&&s.on("stop",g,k),h&&s.on("active",h,k),i&&s.on("trigger",i,k),s}return g(b,a),h(b,[{key:"update",value:function(a){this._value=0;var b=!0,c=!1,d=void 0;try{for(var e,f=this._channels[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value,h=g>=j.INPUT_OFFSET_GAMEPAD?this._gamepadOffset:g>=j.INPUT_OFFSET_POINTER&&this._pointerOffset||0;this._value=Math.max(a[g+h],this._value)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this._value?(this._triggered||(this._triggered=Date.now(),this.trigger("start",this._value)),this.trigger("active",this._value)):this._triggered&&(this.trigger("stop",this._value),Date.now()-this._triggered<this._threshold&&this.trigger("trigger",this._value),this._triggered=0)}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._channels.clear(),this._channels=null,this._threshold=null,this._pointerIndex=null,this._pointerOffset=null,this._gamepadIndex=null,this._gamepadOffset=null,this._triggered=null,this._value=null}},{key:"channels",get:function(){return this._channels},set:function(a){this._channels.clear();var b=!0,c=!1,d=void 0;try{for(var e,f=a[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._channels.add(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"threshold",get:function(){return this._threshold},set:function(a){this._threshold=a}},{key:"pointerIndex",get:function(){return this._pointerIndex},set:function(a){this._pointerIndex=a,this._pointerOffset=a*j.INPUT_CHANNELS_HANDLER}},{key:"gamepadIndex",get:function(){return this._gamepadIndex},set:function(a){this._gamepadIndex=a,this._gamepadOffset=a*j.INPUT_CHANNELS_HANDLER}},{key:"pointerOffset",get:function(){return this._pointerOffset}},{key:"gamepadOffset",get:function(){return this._gamepadOffset}},{key:"value",get:function(){return this._value}}]),b}(n.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(2);Object.defineProperty(b,"Vector",{enumerable:!0,get:function(){return d(e).default}});var f=c(26);Object.defineProperty(b,"ObservableVector",{enumerable:!0,get:function(){return d(f).default}});var g=c(12);Object.defineProperty(b,"Matrix",{enumerable:!0,get:function(){return d(g).default}});var h=c(50);Object.defineProperty(b,"Transformable",{enumerable:!0,get:function(){return d(h).default}});var i=c(10);Object.defineProperty(b,"Interval",{enumerable:!0,get:function(){return d(i).default}});var j=c(4);Object.defineProperty(b,"Rectangle",{enumerable:!0,get:function(){return d(j).default}});var k=c(27);Object.defineProperty(b,"Circle",{enumerable:!0,get:function(){return d(k).default}});var l=c(20);Object.defineProperty(b,"Polygon",{enumerable:!0,get:function(){return d(l).default}});var m=c(8);Object.defineProperty(b,"Size",{enumerable:!0,get:function(){return d(m).default}});var n=c(34);Object.defineProperty(b,"Random",{enumerable:!0,get:function(){return d(n).default}});var o=c(54);Object.defineProperty(b,"ObservableSize",{enumerable:!0,get:function(){return d(o).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(23);Object.defineProperty(b,"Media",{enumerable:!0,get:function(){return d(e).default}});var f=c(45);Object.defineProperty(b,"Sound",{enumerable:!0,get:function(){return d(f).default}});var g=c(40);Object.defineProperty(b,"Music",{enumerable:!0,get:function(){return d(g).default}});var h=c(49);Object.defineProperty(b,"Video",{enumerable:!0,get:function(){return d(h).default}});var i=c(39);Object.defineProperty(b,"MediaSource",{enumerable:!0,get:function(){return d(i).default}});var j=c(96);Object.defineProperty(b,"AudioAnalyser",{enumerable:!0,get:function(){return d(j).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(5),h=d(g),i=c(1),j=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.fftSize,f=void 0===d?2048:d,g=c.minDecibels,j=void 0===g?-100:g,k=c.maxDecibels,l=void 0===k?-30:k,m=c.smoothingTimeConstant,n=void 0===m?.8:m;if(e(this,a),!h.default.webAudio)throw new Error("Web Audio API should be enabled when using the audio analyzer.");this._analyser=i.audioContext.createAnalyser(),this._analyser.fftSize=f,this._analyser.minDecibels=j,this._analyser.maxDecibels=l,this._analyser.smoothingTimeConstant=n,this._analyserTarget=null,this._media=b,this._timeDomainData=null,this._frequencyData=null,this._preciseTimeDomainData=null,this._preciseFrequencyData=null}return f(a,[{key:"connect",value:function(){if(h.default.webAudio&&!this._analyserTarget){if(!this._media.analyserTarget)throw new Error("No AudioNode on property analyserTarget.");this._analyserTarget=this._media.analyserTarget,this._analyserTarget.connect(this._analyser)}return this}},{key:"destroy",value:function(){this._analyserTarget&&(this._analyserTarget.disconnect(),this._analyserTarget=null),this._analyser.disconnect(),this._analyser=null,this._media=null,this._timeDomainData=null,this._frequencyData=null,this._preciseTimeDomainData=null,this._preciseFrequencyData=null}},{key:"timeDomainData",get:function(){return this.connect(),this._timeDomainData||(this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)),this._analyser.getByteTimeDomainData(this._timeDomainData),this._timeDomainData}},{key:"frequencyData",get:function(){return this.connect(),this._frequencyData||(this._frequencyData=new Uint8Array(this._analyser.frequencyBinCount)),this._analyser.getByteFrequencyData(this._frequencyData),this._frequencyData}},{key:"preciseTimeDomainData",get:function(){return this.connect(),this._preciseTimeDomainData||(this._preciseTimeDomainData=new Float32Array(this._analyser.frequencyBinCount)),this._analyser.getFloatTimeDomainData(this._preciseTimeDomainData),this._preciseTimeDomainData}},{key:"preciseFrequencyData",get:function(){return this.connect(),this._preciseFrequencyData||(this._preciseFrequencyData=new Float32Array(this._analyser.frequencyBinCount)),this._analyser.getFloatFrequencyData(this._preciseFrequencyData),this._preciseFrequencyData}}]),a}();b.default=j}]);
//# sourceMappingURL=exo.min.js.map