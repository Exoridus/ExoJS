var Exo=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=63)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.removeItems=b.rgbToHex=b.hueToRgb=b.dotProduct=b.isPowerOfTwo=b.clamp=b.average=b.random=b.radiansToDegrees=b.degreesToRadians=b.supportedCodecs=b.indexedDBSupported=b.webAudioSupported=b.webGLSupported=b.RNG=b.RAD_TO_DEG=b.DEG_TO_RAD=b.TAU=b.emptyFunction=void 0;var e=c(25),f=d(e),g=(b.emptyFunction=function(){},b.TAU=2*Math.PI,b.DEG_TO_RAD=Math.PI/180),h=b.RAD_TO_DEG=180/Math.PI,i=b.RNG=new f.default;b.webGLSupported=function(){var a=document.createElement("canvas"),b="probablySupportsContext"in a?"probablySupportsContext":"supportsContext";return b in a?a[b]("webgl")||a[b]("experimental-webgl"):"WebGLRenderingContext"in window}(),b.webAudioSupported="AudioContext"in window,b.indexedDBSupported="indexedDB"in window,b.supportedCodecs=function(){var a=new Audio,b=/^no$/,c=function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f="";return d.forEach(function(b){return!(f=a.canPlayType(b))}),!!f.replace(b,"")};return new Map([["mp3",c("audio/mpeg;","audio/mp3;")],["mpeg",c("audio/mpeg;")],["opus",c('audio/ogg; codecs="opus"')],["ogg",c('audio/ogg; codecs="vorbis"')],["wav",c('audio/wav; codecs="1"')],["aac",c("audio/aac;")],["m4a",c("audio/x-m4a;","audio/m4a;","audio/aac;")],["mp4",c("audio/x-mp4;","audio/mp4;","audio/aac;")],["weba",c('audio/webm; codecs="vorbis"')],["webm",c('audio/webm; codecs="vorbis"')]])}(),b.degreesToRadians=function(a){return a*g},b.radiansToDegrees=function(a){return a*h},b.random=function(a,b){return i.next(a,b)},b.average=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return a+b},0)/b.length},b.clamp=function(a,b,c){return Math.max(b,Math.min(c,a))},b.isPowerOfTwo=function(a){return 0!==a&&0==(a&a-1)},b.dotProduct=function(a,b){return a.x*b.x+a.y*b.y},b.hueToRgb=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?6*(a+(b-a))*c:c<.5?b:c<2/3?(a+(b-a))*(2/3-c)*6:a},b.rgbToHex=function(a,b,c){return"#"+((1<<24)+(a<<16)+(b<<8)+c).toString(16).substr(1)},b.removeItems=function(a,b,c){if(!(b>=a.length)&&c){for(var d=a.length,e=b+c>d?d-b:c,f=d-e,g=b;g<f;++g)a[g]=a[g+e];a.length=f}}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this.x=b,this.y=c}return e(a,[{key:"set",value:function(a,b){return this.x="number"==typeof a?a:this.x,this.y="number"==typeof b?b:this.y,this}},{key:"add",value:function(a,b){return a instanceof Exo.Vector?(this.x+=a.x,this.y+=a.y,this):(this.x+="number"==typeof a?a:0,this.y+="number"==typeof b?b:0,this)}},{key:"subtract",value:function(a,b){return a instanceof Exo.Vector?(this.x-=a.x,this.y-=a.y,this):(this.x-="number"==typeof a?a:0,this.y-="number"==typeof b?b:0,this)}},{key:"multiply",value:function(a,b){return a instanceof Exo.Vector?(this.x*=a.x,this.y*=a.y,this):(this.x*="number"==typeof a?a:1,this.y*="number"==typeof b?b:1,this)}},{key:"divide",value:function(a,b){return a instanceof Exo.Vector?(this.x/=a.x,this.y/=a.y,this):(this.x/="number"==typeof a?a:1,this.y/="number"==typeof b?b:1,this)}},{key:"min",value:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}},{key:"max",value:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}},{key:"normalize",value:function(){var a=this.magnitude;return this.x/=a,this.y/=a,this}},{key:"copy",value:function(a){return this.x=a.x,this.y=a.y,this}},{key:"clone",value:function(){return new a(this.x,this.y)}},{key:"toArray",value:function(){return[this.x,this.y]}},{key:"destroy",value:function(){this.x=null,this.y=null}},{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set:function(a){var b=this.direction;this.x=Math.cos(b)*a,this.y=Math.sin(b)*a}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(3),j=d(i),k=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g._channelBuffer=a,g._channels=new Float32Array(a,4*c,d),g._active=!0,g}return g(b,a),h(b,[{key:"setChannelOffset",value:function(a,b){this._channels=new Float32Array(this._channelBuffer,4*a,b)}},{key:"resetChannels",value:function(){this._channels.fill(0)}},{key:"destroy",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.resetChannels(),this._channelBuffer=null,this._channels=null,this.off()}},{key:"active",get:function(){return this._active},set:function(a){this._active=!!a}},{key:"channels",get:function(){return this._channels}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._events=new Map}return e(a,[{key:"on",value:function(a,b,c){return this._events.has(a)||this._events.set(a,[]),this._events.get(a).push({callback:b,context:c||this}),this}},{key:"once",value:function(a,b,c){var d=this,e=arguments,f=function f(){d.off(a,f,c),b.apply(d,e)};return this.on(a,f,c)}},{key:"off",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",b=this,c=arguments[1],d=arguments[2];return("*"===a?Object.keys(this._events):[a]).forEach(function(a){var e=b._events.get(a);if(!e)return!1;if(!c&&!d)return e.length=0,b._events.delete(a),!0;for(var f=e.length-1;f>=0;f--){var g=e[f];c&&c!==g.callback||d&&d!==g.context||e.splice(f,1)}}),this}},{key:"trigger",value:function(a){if(!this._events.has(a))return this;for(var b=this._events.get(a),c=b.length,d=Array.prototype.slice.call(arguments,1),e=0;e<c;e++){var f=b[e];switch(d.length){case 0:f.callback.call(f.context);break;case 1:f.callback.call(f.context,d[0]);break;case 2:f.callback.call(f.context,d[0],d[1]);break;case 3:f.callback.call(f.context,d[0],d[1],d[2]);break;default:f.callback.apply(f.context,d)}}return this}},{key:"destroy",value:function(){this.off()}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,a),this.x=b,this.y=c,this.width=e,this.height=f}return e(a,[{key:"set",value:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this}},{key:"copy",value:function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this}},{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height)}},{key:"contains",value:function(a,b){return!(this.width<=0||this.height<=0)&&(a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height)}},{key:"left",get:function(){return this.x},set:function(a){this.x=a}},{key:"right",get:function(){return this.x+this.width},set:function(a){this.x=a-this.width}},{key:"top",get:function(){return this.y},set:function(a){this.y=a}},{key:"bottom",get:function(){return this.y+this.height},set:function(a){this.y=a-this.height}}]),a}();b.default=f,f.Empty=new f(0,0,0,0)},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"Keyboard",get:function(){return 0}},{key:"Mouse",get:function(){return 1}},{key:"Gamepad",get:function(){return 2}},{key:"Pointer",get:function(){return 3}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,a),this._r=(0,f.clamp)(0|b,0,255)||0,this._g=(0,f.clamp)(0|c,0,255)||0,this._b=(0,f.clamp)(0|e,0,255)||0,this._a=(0,f.clamp)(g,0,1)||1}return e(a,[{key:"set",value:function(a,b,c,d){return this.r=a,this.g=b,this.b=c,this.a=d,this}},{key:"getHexCode",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,f.rgbToHex)(this._r,this._g,this._b,a)}},{key:"getHsl",value:function(){var a=this.r/255,b=this.g/255,c=this.b/255,d=Math.min(a,b,c),e=Math.max(a,b,c),f=e-d,g=(e+d)/2,h=0,i=0;if(e!==d){switch(i=g>.5?f/(2-e-d):f/(e+d),e){case a:h=(b-c)/(f+(b<c?6:0));break;case b:h=(c-a)/(f+2);break;case c:h=(a-b)/(f+4)}h/=6}return{h:h,s:i,l:g}}},{key:"setHsl",value:function(a,b,c){if(0===b)this.r=this.g=this.b=255;else{var d=c<.5?c*(1+b):c+b-c*b,e=2*c-d;this.r=255*(0,f.hueToRgb)(e,d,a+1/3),this.g=255*(0,f.hueToRgb)(e,d,a),this.b=255*(0,f.hueToRgb)(e,d,a-1/3)}return this}},{key:"darken",value:function(a){var b=Math.round(2.55*a);return this.r=Math.max(0,this.r-b),this.g=Math.max(0,this.g-b),this.b=Math.max(0,this.b-b),this}},{key:"lighten",value:function(a){var b=Math.round(2.55*a);return this.r=Math.max(255,this.r+b),this.g=Math.max(255,this.g+b),this.b=Math.max(255,this.b+b),this}},{key:"copy",value:function(a){return this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this}},{key:"clone",value:function(){return new a(this._r,this._g,this._b,this._a)}},{key:"toArray",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._array||(this._array=new Float32Array(4));return a?(b[0]=this._r/255,b[1]=this._g/255,b[2]=this._b/255,b[3]=this._a):(b[0]=this._r,b[1]=this._g,b[2]=this._b,b[3]=this._a),b}},{key:"r",get:function(){return this._r},set:function(a){this._r=(0,f.clamp)(0|a,0,255)||0}},{key:"g",get:function(){return this._g},set:function(a){this._g=(0,f.clamp)(0|a,0,255)||0}},{key:"b",get:function(){return this._b},set:function(a){this._b=(0,f.clamp)(0|a,0,255)||0}},{key:"a",get:function(){return this._a},set:function(a){this._a=(0,f.clamp)(a,0,1)||0}},{key:"rgb",get:function(){return((255&this._r)<<16)+((255&this._g)<<8)+(255&this._b)},set:function(a){this._r=a>>16&255,this._g=a>>8&255,this._b=255&a}},{key:"rgba",get:function(){return((255*this._a|0)<<24)+(this._b<<16)+(this._g<<8)+this._r>>>0},set:function(a){this._a=(a>>24&255)/255,this._r=a>>16&255,this._g=a>>8&255,this._b=255&a}}]),a}();b.default=g,g.AliceBlue=new g(240,248,255,1),g.AntiqueWhite=new g(250,235,215,1),g.Aqua=new g(0,255,255,1),g.Aquamarine=new g(127,255,212,1),g.Azure=new g(240,255,255,1),g.Beige=new g(245,245,220,1),g.Bisque=new g(255,228,196,1),g.Black=new g(0,0,0,1),g.BlanchedAlmond=new g(255,235,205,1),g.Blue=new g(0,0,255,1),g.BlueViolet=new g(138,43,226,1),g.Brown=new g(165,42,42,1),g.BurlyWood=new g(222,184,135,1),g.CadetBlue=new g(95,158,160,1),g.Chartreuse=new g(127,255,0,1),g.Chocolate=new g(210,105,30,1),g.Coral=new g(255,127,80,1),g.CornflowerBlue=new g(100,149,237,1),g.Cornsilk=new g(255,248,220,1),g.Crimson=new g(220,20,60,1),g.Cyan=new g(0,255,255,1),g.DarkBlue=new g(0,0,139,1),g.DarkCyan=new g(0,139,139,1),g.DarkGoldenrod=new g(184,134,11,1),g.DarkGray=new g(169,169,169,1),g.DarkGreen=new g(0,100,0,1),g.DarkKhaki=new g(189,183,107,1),g.DarkMagenta=new g(139,0,139,1),g.DarkOliveGreen=new g(85,107,47,1),g.DarkOrange=new g(255,140,0,1),g.DarkOrchid=new g(153,50,204,1),g.DarkRed=new g(139,0,0,1),g.DarkSalmon=new g(233,150,122,1),g.DarkSeaGreen=new g(143,188,139,1),g.DarkSlateBlue=new g(72,61,139,1),g.DarkSlateGray=new g(47,79,79,1),g.DarkTurquoise=new g(0,206,209,1),g.DarkViolet=new g(148,0,211,1),g.DeepPink=new g(255,20,147,1),g.DeepSkyBlue=new g(0,191,255,1),g.DimGray=new g(105,105,105,1),g.DodgerBlue=new g(30,144,255,1),g.Firebrick=new g(178,34,34,1),g.FloralWhite=new g(255,250,240,1),g.ForestGreen=new g(34,139,34,1),g.Fuchsia=new g(255,0,255,1),g.Gainsboro=new g(220,220,220,1),g.GhostWhite=new g(248,248,255,1),g.Gold=new g(255,215,0,1),g.Goldenrod=new g(218,165,32,1),g.Gray=new g(128,128,128,1),g.Green=new g(0,128,0,1),g.GreenYellow=new g(173,255,47,1),g.Honeydew=new g(240,255,240,1),g.HotPink=new g(255,105,180,1),g.IndianRed=new g(205,92,92,1),g.Indigo=new g(75,0,130,1),g.Ivory=new g(255,255,240,1),g.Khaki=new g(240,230,140,1),g.Lavender=new g(230,230,250,1),g.LavenderBlush=new g(255,240,245,1),g.LawnGreen=new g(124,252,0,1),g.LemonChiffon=new g(255,250,205,1),g.LightBlue=new g(173,216,230,1),g.LightCoral=new g(240,128,128,1),g.LightCyan=new g(224,255,255,1),g.LightGoldenrodYellow=new g(250,250,210,1),g.LightGray=new g(211,211,211,1),g.LightGreen=new g(144,238,144,1),g.LightPink=new g(255,182,193,1),g.LightSalmon=new g(255,160,122,1),g.LightSeaGreen=new g(32,178,170,1),g.LightSkyBlue=new g(135,206,250,1),g.LightSlateGray=new g(119,136,153,1),g.LightSteelBlue=new g(176,196,222,1),g.LightYellow=new g(255,255,224,1),g.Lime=new g(0,255,0,1),g.LimeGreen=new g(50,205,50,1),g.Linen=new g(250,240,230,1),g.Magenta=new g(255,0,255,1),g.Maroon=new g(128,0,0,1),g.MediumAquamarine=new g(102,205,170,1),g.MediumBlue=new g(0,0,205,1),g.MediumOrchid=new g(186,85,211,1),g.MediumPurple=new g(147,112,219,1),g.MediumSeaGreen=new g(60,179,113,1),g.MediumSlateBlue=new g(123,104,238,1),g.MediumSpringGreen=new g(0,250,154,1),g.MediumTurquoise=new g(72,209,204,1),g.MediumVioletRed=new g(199,21,133,1),g.MidnightBlue=new g(25,25,112,1),g.MintCream=new g(245,255,250,1),g.MistyRose=new g(255,228,225,1),g.Moccasin=new g(255,228,181,1),g.NavajoWhite=new g(255,222,173,1),g.Navy=new g(0,0,128,1),g.OldLace=new g(253,245,230,1),g.Olive=new g(128,128,0,1),g.OliveDrab=new g(107,142,35,1),g.Orange=new g(255,165,0,1),g.OrangeRed=new g(255,69,0,1),g.Orchid=new g(218,112,214,1),g.PaleGoldenrod=new g(238,232,170,1),g.PaleGreen=new g(152,251,152,1),g.PaleTurquoise=new g(175,238,238,1),g.PaleVioletRed=new g(219,112,147,1),g.PapayaWhip=new g(255,239,213,1),g.PeachPuff=new g(255,218,185,1),g.Peru=new g(205,133,63,1),g.Pink=new g(255,192,203,1),g.Plum=new g(221,160,221,1),g.PowderBlue=new g(176,224,230,1),g.Purple=new g(128,0,128,1),g.Red=new g(255,0,0,1),g.RosyBrown=new g(188,143,143,1),g.RoyalBlue=new g(65,105,225,1),g.SaddleBrown=new g(139,69,19,1),g.Salmon=new g(250,128,114,1),g.SandyBrown=new g(244,164,96,1),g.SeaGreen=new g(46,139,87,1),g.SeaShell=new g(255,245,238,1),g.Sienna=new g(160,82,45,1),g.Silver=new g(192,192,192,1),g.SkyBlue=new g(135,206,235,1),g.SlateBlue=new g(106,90,205,1),g.SlateGray=new g(112,128,144,1),g.Snow=new g(255,250,250,1),g.SpringGreen=new g(0,255,127,1),g.SteelBlue=new g(70,130,180,1),g.Tan=new g(210,180,140,1),g.Teal=new g(0,128,128,1),g.Thistle=new g(216,191,216,1),g.Tomato=new g(255,99,71,1),g.TransparentBlack=new g(0,0,0,0),g.TransparentWhite=new g(255,255,255,0),g.Turquoise=new g(64,224,208,1),g.Violet=new g(238,130,238,1),g.Wheat=new g(245,222,179,1),g.White=new g(255,255,255,1),g.WhiteSmoke=new g(245,245,245,1),g.Yellow=new g(255,255,0,1),g.YellowGreen=new g(154,205,50,1)},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,k=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;d(this,a),this.a=b,this.b=c,this.x=e,this.c=f,this.d=g,this.y=h,this.e=i,this.f=j,this.z=k}return e(a,[{key:"set",value:function(a,b,c,d,e,f,g,h,i){return this.a=a,this.b=b,this.x=c,this.c=d,this.d=e,this.y=f,this.e=g,this.f=h,this.z=i,this}},{key:"copy",value:function(a){return this.set(a.a,a.b,a.x,a.c,a.d,a.y,a.e,a.f,a.z)}},{key:"clone",value:function(){return new a(this.a,this.b,this.x,this.c,this.d,this.y,this.e,this.f,this.z)}},{key:"multiply",value:function(a){return this.set(this.a*a.a+this.c*a.b+this.e*a.x,this.b*a.a+this.d*a.b+this.f*a.x,this.x*a.a+this.y*a.b+this.z*a.x,this.a*a.c+this.c*a.d+this.e*a.y,this.b*a.c+this.d*a.d+this.f*a.y,this.x*a.c+this.y*a.d+this.z*a.y,this.a*a.e+this.c*a.f+this.e*a.z,this.b*a.e+this.d*a.f+this.f*a.z,this.x*a.e+this.y*a.f+this.z*a.z)}},{key:"toArray",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.array;return a?(b[0]=this.a,b[1]=this.b,b[2]=this.x,b[3]=this.c,b[4]=this.d,b[5]=this.y,b[6]=this.e,b[7]=this.f,b[8]=this.z):(b[0]=this.a,b[1]=this.c,b[2]=this.e,b[3]=this.b,b[4]=this.d,b[5]=this.f,b[6]=this.x,b[7]=this.y,b[8]=this.z),b}},{key:"reset",value:function(){return this.set(1,0,0,0,1,0,0,0,1)}},{key:"array",get:function(){return this._array||(this._array=new Float32Array(9))}}],[{key:"add",value:function(){for(var b=new a,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return d.forEach(function(a){b.add(a)}),b}},{key:"subtract",value:function(){for(var b=new a,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return d.forEach(function(a){b.subtract(a)}),b}},{key:"multiply",value:function(){for(var b=new a,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return d.forEach(function(a){b.multiply(a)}),b}}]),a}();b.default=f,f.Identity=new f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Milliseconds;d(this,a),this._milliseconds=b*c}return e(a,[{key:"setMilliseconds",value:function(a){return this._milliseconds=a,this}},{key:"setSeconds",value:function(b){return this._milliseconds=b*a.Seconds,this}},{key:"setMinutes",value:function(b){return this._milliseconds=b*a.Minutes,this}},{key:"asMilliseconds",value:function(){return this._milliseconds}},{key:"asSeconds",value:function(){return this._milliseconds/a.Seconds}},{key:"asMinutes",value:function(){return this._milliseconds/a.Minutes}},{key:"equals",value:function(a){return this._milliseconds===a._milliseconds}},{key:"greaterThan",value:function(a){return this._milliseconds>a._milliseconds}},{key:"lessThan",value:function(a){return this._milliseconds<a._milliseconds}},{key:"clone",value:function(){return new a(this._milliseconds)}},{key:"copy",value:function(a){return this._milliseconds=a.asMilliseconds(),this}},{key:"add",value:function(a){return this._milliseconds+=a.asMilliseconds(),this}},{key:"subtract",value:function(a){return this._milliseconds-=a.asMilliseconds(),this}}],[{key:"Milliseconds",get:function(){return 1}},{key:"Seconds",get:function(){return 1e3}},{key:"Minutes",get:function(){return 6e4}},{key:"Hours",get:function(){return 36e5}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"getGLEnum",value:function(b,c){return c===a.Linear?b.LINEAR:b.NEAREST}},{key:"Linear",get:function(){return 0}},{key:"Nearest",get:function(){return 1}},{key:"Default",get:function(){return a.Nearest}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"getGLEnum",value:function(b,c){return c===a.ClampToEdge?b.CLAMP_TO_EDGE:c===a.Repeat?b.REPEAT:b.MIRRORED_REPEAT}},{key:"ClampToEdge",get:function(){return 0}},{key:"Repeat",get:function(){return 1}},{key:"MirroredRepeat",get:function(){return 2}},{key:"Default",get:function(){return a.ClampToEdge}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"None",get:function(){return 0}},{key:"Int",get:function(){return 1}},{key:"Float",get:function(){return 2}},{key:"Vector",get:function(){return 3}},{key:"IntVector",get:function(){return 4}},{key:"Matrix",get:function(){return 5}},{key:"Texture",get:function(){return 6}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b){d(this,a),this._source=b}return e(a,[{key:"connect",value:function(a){}},{key:"play",value:function(a){this.paused&&(this.applyOptions(a),this._source.play())}},{key:"pause",value:function(){this.playing&&this._source.pause()}},{key:"stop",value:function(){this.pause(),this.currentTime=0}},{key:"toggle",value:function(){this.paused?this.play():this.pause()}},{key:"applyOptions",value:function(a){a&&("boolean"==typeof a.loop&&(this.loop=a.loop),"number"==typeof a.playbackRate&&(this.playbackRate=a.playbackRate),"number"==typeof a.volume&&(this.volume=a.volume),"number"==typeof a.time&&(this.currentTime=a.time))}},{key:"destroy",value:function(){this.stop(),this._source=null}},{key:"source",get:function(){return this._source}},{key:"duration",get:function(){return this._source.duration}},{key:"volume",get:function(){return this._source.volume},set:function(a){this._source.volume=(0,f.clamp)(a,0,2)}},{key:"currentTime",get:function(){return this._source.currentTime},set:function(a){this._source.currentTime=Math.max(0,a)}},{key:"loop",get:function(){return this._source.loop},set:function(a){this._source.loop=!!a}},{key:"playbackRate",get:function(){return this._source.playbackRate},set:function(a){this._source.playbackRate=Math.max(0,a)}},{key:"paused",get:function(){return this._source.paused},set:function(a){a?this.pause():this.play()}},{key:"playing",get:function(){return!this.paused},set:function(a){a?this.play():this.pause()}},{key:"analyserTarget",get:function(){return null}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"apply",value:function(a,b){}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"apply",value:function(a,b){}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(8),h=d(g),i=function(){function a(b){e(this,a),this._startTime=0,this._timeBuffer=0,this._isRunning=!1,this._time=new h.default,b&&this.start()}return f(a,[{key:"start",value:function(){return this._isRunning?this:(this._startTime=Date.now(),this._isRunning=!0,this)}},{key:"stop",value:function(){return this._isRunning?(this._timeBuffer+=Date.now()-this._startTime,this._isRunning=!1,this):this}},{key:"reset",value:function(){return this._timeBuffer=0,this._isRunning=!1,this}},{key:"restart",value:function(){return this.reset().start()}},{key:"getElapsedMilliseconds",value:function(){return this._isRunning?this._timeBuffer+(Date.now()-this._startTime):this._timeBuffer}},{key:"getElapsedSeconds",value:function(){return this.getElapsedMilliseconds()/h.default.Seconds}},{key:"getElapsedMinutes",value:function(){return this.getElapsedMilliseconds()/h.default.Minutes}},{key:"getElapsedTime",value:function(){return this._time.setMilliseconds(this.getElapsedMilliseconds())}},{key:"isRunning",get:function(){return this._isRunning}}]),a}();b.default=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._context=null}return e(a,[{key:"setContext",value:function(a){this._context||(this._context=a,this._indexBuffer=a.createBuffer(),this._vertexBuffer=a.createBuffer())}},{key:"createIndexBuffer",value:function(a){for(var b=new Uint16Array(a),c=b.length,d=0,e=0;d<c;d+=6,e+=4)b[d]=e,b[d+1]=e+1,b[d+2]=e+3,b[d+3]=e,b[d+4]=e+2,b[d+5]=e+3;return b}},{key:"start",value:function(){}},{key:"draw",value:function(a){}},{key:"flush",value:function(){}},{key:"stop",value:function(){this.flush()}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(37),h=d(g),i=c(38),j=d(i),k=c(39),l=d(k),m=c(7),n=d(m),o=c(11),p=d(o),q=c(9),r=d(q),s=c(10),t=d(s),u=function(){function a(){e(this,a),this._context=null,this._program=null,this._vertexSource="",this._fragmentSource="",this._uniforms={},this._attributes={},this._inUse=!1,this._currentTextureUnit=-1}return f(a,[{key:"program",get:function(){return this._program}},{key:"inUse",get:function(){return this._inUse},set:function(a){this._inUse=!!a}}]),f(a,[{key:"setContext",value:function(a){this._context||(this._context=a,this._program=this.compileProgram())}},{key:"compileProgram",value:function(){var a=this._context,b=this._vertexSource,c=this._fragmentSource,d=this.compileShader(b,a.VERTEX_SHADER),e=this.compileShader(c,a.FRAGMENT_SHADER),f=a.createProgram();if(a.attachShader(f,d),a.attachShader(f,e),a.linkProgram(f),a.deleteShader(d),a.deleteShader(e),!a.getProgramParameter(f,a.LINK_STATUS))throw a.deleteProgram(f),new Error("Error: Could not initialize shader.",a.getError());return f}},{key:"compileShader",value:function(a,b){if(!a)throw new Error("Vertex or Fragment source need to be set first!")
;var c=this._context,d=c.createShader(b);if(c.shaderSource(d,a instanceof Array?a.join("\n"):a),c.compileShader(d),!c.getShaderParameter(d,c.COMPILE_STATUS))throw new Error(["SHADER COMPILE ERROR:","- LOG -",c.getShaderInfoLog(d),"- SOURCE -",a].join("\n\n"));return d}},{key:"bind",value:function(){this._context.useProgram(this._program),this._inUse=!0,this.syncAttributes(),this.syncUniforms()}},{key:"setVertexSource",value:function(a){this._vertexSource=a instanceof Array?a.join("\n"):a}},{key:"setFragmentSource",value:function(a){this._fragmentSource=a instanceof Array?a.join("\n"):a}},{key:"addAttribute",value:function(a,b){if(a in this._attributes)throw new Error('Attribute "'+a+'" was already added.');this._attributes[a]=new h.default(a,!1!==b)}},{key:"getAttribute",value:function(a){if(!(a in this._attributes))throw new Error('Attribute "'+a+'" is missing.');return this._attributes[a]}},{key:"setAttributeActive",value:function(a,b){this.getAttribute(a).active=b}},{key:"removeAttribute",value:function(a){a in this._attributes&&(this._attributes[a].destroy(),delete this._attributes[a])}},{key:"syncAttributes",value:function(){var a=this,b=this._context,c=this._attributes;Object.keys(c).forEach(function(d){var e=c[d];null===e.location&&(e.location=a.getAttributeLocation(d)),e.active?b.enableVertexAttribArray(e.location):b.disableVertexAttribArray(e.location)})}},{key:"addUniform",value:function(a,b){if(a in this._uniforms)throw new Error('Uniform "'+a+'" was already added.');this._uniforms[a]=new j.default(a,b)}},{key:"getUniform",value:function(a){if(!(a in this._uniforms))throw new Error('Uniform "'+a+'" is missing.');return this._uniforms[a]}},{key:"setUniformValue",value:function(a,b,c){var d=this.getUniform(a);d.value=b,"number"==typeof c&&(d.textureUnit=c),this._inUse&&this._uploadUniform(d)}},{key:"removeUniform",value:function(a){a in this._uniforms&&(this._uniforms[a].destroy(),delete this._uniforms[a])}},{key:"syncUniforms",value:function(){var a=this,b=this._uniforms;Object.keys(b).forEach(function(c){a._uploadUniform(b[c])})}},{key:"setUniformNumber",value:function(a,b){this.setUniformValue(a,b)}},{key:"setUniformVector",value:function(a,b){this.setUniformValue(a,b)}},{key:"setUniformColor",value:function(a,b){this.setUniformValue(a,b.toArray(!0))}},{key:"setUniformMatrix",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setUniformValue(a,b instanceof n.default?b.toArray(c):b)}},{key:"setUniformTexture",value:function(a,b,c){this.setUniformValue(a,b,c||0)}},{key:"setProjection",value:function(a){this.setUniformValue("projectionMatrix",a.toArray())}},{key:"getAttributeLocation",value:function(a){return this._context.getAttribLocation(this._program,a)}},{key:"getUniformLocation",value:function(a){return this._context.getUniformLocation(this._program,a)}},{key:"createWebGLTexture",value:function(a,b,c){var d=this._context,e=r.default.getGLEnum(d,b),f=t.default.getGLEnum(d,c),g=d.createTexture();return d.bindTexture(d.TEXTURE_2D,g),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,e),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,e),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,f),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,f),d.bindTexture(d.TEXTURE_2D,null),g}},{key:"destroy",value:function(){var a=this;Object.keys(this._uniforms).forEach(function(b){a.removeUniform(b)}),Object.keys(this._attributes).forEach(function(b){a.removeAttribute(b)}),this._program&&(this._context.deleteProgram(this._program),this._program=null),this._context=null,this._vertexSource=null,this._fragmentSource=null,this._uniforms=null,this._attributes=null}},{key:"_getLength",value:function(a){var b=0;return a instanceof Array?a.length:("number"==typeof a.x&&(b++,"number"==typeof a.y&&(b++,"number"==typeof a.z&&(b++,"number"==typeof a.w&&b++))),b)}},{key:"_uploadUniform",value:function(a){var b=this._context,c=a.location||(a.location=this.getUniformLocation(a.name)),d=a.value,e=void 0;if(a.dirty)switch(a.type){case p.default.Int:return void b.uniform1i(c,d);case p.default.Float:return void b.uniform1f(c,d);case p.default.Vector:if(d instanceof Array){switch(this._getLength(d)){case 1:return void b.uniform1fv(c,d);case 2:return void b.uniform2fv(c,d);case 3:return void b.uniform3fv(c,d);case 4:return void b.uniform4fv(c,d)}return}switch(this._getLength(d)){case 1:return void b.uniform1f(c,d);case 2:return void b.uniform2f(c,d.x,d.y);case 3:return void b.uniform3f(c,d.x,d.y,d.z);case 4:return void b.uniform4f(c,d.x,d.y,d.z,d.w)}return;case p.default.IntVector:if(d instanceof Array){switch(this._getLength(d)){case 1:return void b.uniform1iv(c,d);case 2:return void b.uniform2iv(c,d);case 3:return void b.uniform3iv(c,d);case 4:return void b.uniform4iv(c,d)}return}switch(this._getLength(d)){case 1:return void b.uniform1i(c,d);case 2:return void b.uniform2i(c,d.x,d.y);case 3:return void b.uniform3i(c,d.x,d.y,d.z);case 4:return void b.uniform4i(c,d.x,d.y,d.z,d.w)}return;case p.default.Matrix:switch(d.length){case 4:return void b.uniformMatrix2fv(c,!1,d);case 9:return void b.uniformMatrix3fv(c,!1,d);case 16:return void b.uniformMatrix4fv(c,!1,d)}return;case p.default.Texture:return e=a.textureUnit,e!==this._currentTextureUnit&&(b.activeTexture(b["TEXTURE"+e]),this._currentTextureUnit=e),a.textureUnitChanged&&(b.uniform1i(c,e),a.textureUnitChanged=!1),d.webGLTexture||(d.webGLTexture=this.createWebGLTexture(d.source,d.scaleMode,d.wrapMode)),void b.bindTexture(b.TEXTURE_2D,d.webGLTexture);case p.default.None:return e=a.textureUnit,e!==this._currentTextureUnit&&(b.activeTexture(b.TEXTURE0+e),this._currentTextureUnit=e),a.textureUnitChanged&&(b.uniform1i(c,e),a.textureUnitChanged=!1),d.webGLTexture||(d.webGLTexture=new l.default(b),d.webGLTexture.setSource(d.source),d.webGLTexture.setScaleMode(d.scaleMode),d.webGLTexture.setWrapMode(d.wrapMode),d.webGLTexture.unbind()),void d.webGLTexture.bind();default:throw new Error("Wrong UniformType set! Uniform: "+a.name)}}}]),a}();b.default=u},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(2),k=d(j),l=c(5),m=d(l),n=c(47),o=d(n),p=m.default.Gamepad<<8,q=32,r=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,p|c<<5,q));return g._index=0|c,g._rawGamepad=d,g._mapping=new o.default,g}return g(b,a),i(b,[{key:"rawGamepad",get:function(){return this._rawGamepad},set:function(a){this._rawGamepad=a}},{key:"index",get:function(){return this._index},set:function(a){this._index!==a&&(this._index=0|a,this.setChannelOffset(p|this._index<<5,q))}},{key:"mapping",get:function(){return this._mapping},set:function(a){this._mapping=a}}]),i(b,[{key:"update",value:function(){var a=this._rawGamepad,b=this._mapping;this.active&&(this.updateButtons(a.buttons,b.buttons),this.updateButtons(a.axes,b.axes))}},{key:"updateButtons",value:function(a,b){var c=this.channels;b.forEach(function(b){b.index in a&&(c[b.keyCode]=b.getMappedValue(a[b.index]))})}},{key:"destroy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,a),this._mapping.destroy(),this._mapping=null,this._rawGamepad=null,this._index=null}}],[{key:"getChannelCode",value:function(a,b){return p|255&a|b<<5}}]),b}(k.default);b.default=r,r.FaceButtonBottom=0|p,r.FaceButtonLeft=1|p,r.FaceButtonRight=2|p,r.FaceButtonTop=3|p,r.LeftTriggerBottom=4|p,r.RightTriggerBottom=5|p,r.LeftTriggerTop=6|p,r.RightTriggerTop=7|p,r.Select=8|p,r.Start=9|p,r.LeftStickButton=10|p,r.RightStickButton=11|p,r.DPadUp=12|p,r.DPadDown=13|p,r.DPadLeft=14|p,r.DPadRight=15|p,r.Special=16|p,r.LeftStickLeft=17|p,r.LeftStickRight=18|p,r.LeftStickUp=19|p,r.LeftStickDown=20|p,r.RightStickLeft=21|p,r.RightStickRight=22|p,r.RightStickUp=23|p,r.RightStickDown=24|p},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"loadSource",value:function(a){return Promise.resolve(null)}},{key:"create",value:function(a){return Promise.resolve(a)}},{key:"load",value:function(a){var b=this;return this.loadSource(a).then(function(a){return b.create(a)})}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(19),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return fetch(a,{method:"GET",mode:"cors"}).then(function(a){return a.arrayBuffer()})}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(20),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"load",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain/text";return this.loadSource(a).then(function(a){return b.create(a,c)})}},{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain/text";return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a).then(function(a){return new Blob([a],{type:c})})}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(9),h=d(g),i=c(10),j=d(i),k=c(1),l=d(k),m=function(){function a(b,c,d){e(this,a),this._source=b||null,this._size=b?new l.default(b.width,b.height):new l.default,this._scaleMode="number"==typeof c?c:h.default.Default,this._wrapMode="number"==typeof d?c:j.default.Default,this._webGLTexture=null}return f(a,[{key:"destroy",value:function(){this._webGLTexture&&(this._webGLTexture.destroy(),this._webGLTexture=null),this._source=null,this._size=null}},{key:"source",get:function(){return this._source},set:function(a){this._source=a,this._webGLTexture&&this._webGLTexture.setSource(a)}},{key:"width",get:function(){return this._size.x},set:function(a){this._size.x=a}},{key:"height",get:function(){return this._size.y},set:function(a){this._size.y=a}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"webGLTexture",get:function(){return this._webGLTexture},set:function(a){this._webGLTexture=a}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(a){this._scaleMode=a,this._webGLTexture&&this._webGLTexture.setScaleMode(a)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(a){this._wrapMode=a,this._webGLTexture&&this._webGLTexture.setWrapMode(a)}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(24),k=d(j),l=c(1),m=d(l),n=c(4),o=d(n),p=c(6),q=d(p),r=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._texture=null,c._vertexData=new Float32Array(20),c._textureRect=new o.default,c._size=new m.default,c._tint=q.default.White.clone(),a&&(c.texture=a),c}return g(b,a),h(b,[{key:"setTextureRect",value:function(a,b){this._textureRect.copy(a),b||this._size.set(a.width,a.height),this._updatePositions(),this._updateTexCoords()}},{key:"getLocalBounds",value:function(){return new o.default(0,0,this.width,this.height)}},{key:"setOrigin",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this.getLocalBounds(),e=this._origin;if(this._dirtyTransform=!0,c)return e.x=a,void(e.y=b);e.x=a*d.width,e.y=b*d.height}},{key:"setSize",value:function(a,b){this._size.set(a,b),this._updatePositions()}},{key:"draw",value:function(a,b){this.visible&&(this._worldTransform.copy(b),this._worldTransform.multiply(this.transform),a.setCurrentRenderer("sprite"),a.getCurrentRenderer().draw(this))}},{key:"destroy",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),a&&this._texture&&this._texture.destroy(),this._vertexData.fill(0),this._vertexData=null,this._texture=null,this._textureRect=null,this._size=null}},{key:"_updatePositions",value:function(){var a=this._vertexData,b=this.getLocalBounds();a[0]=a[1]=a[5]=a[8]=0,a[4]=a[12]=b.width,a[9]=a[13]=b.height}},{key:"_updateTexCoords",value:function(){var a=this._vertexData,b=this._texture,c=this._textureRect,d=c.x/b.width,e=c.y/b.height;a[2]=a[10]=d,a[3]=a[7]=e,a[6]=a[14]=d+c.width/b.width,a[11]=a[15]=e+c.height/b.height}},{key:"vertexData",get:function(){return this._vertexData}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a),this._updatePositions()}},{key:"width",get:function(){return this._size.x},set:function(a){this._size.x=a,this._updatePositions()}},{key:"height",get:function(){return this._size.y},set:function(a){this._size.y=a,this._updatePositions()}},{key:"top",get:function(){return this.y-(this.height-this._origin.y)}},{key:"bottom",get:function(){return this.y+(this.height-this._origin.y)}},{key:"left",get:function(){return this.x-this.width*this._origin.x}},{key:"right",get:function(){return this.x+this.width*(1-this._origin.x)}},{key:"texture",get:function(){return this._texture},set:function(a){this._texture=a,this.setTextureRect(new o.default(0,0,this._texture.width,this._texture.height))}},{key:"textureRect",get:function(){return this._textureRect},set:function(a){this.setTextureRect(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint.copy(a)}}]),b}(k.default);b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(27),k=d(j),l=c(7),m=d(l),n=c(4),o=d(n),p=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._worldTransform=new m.default,a._visible=!0,a._parent=null,a}return g(b,a),h(b,[{key:"getBounds",value:function(){return this.getLocalBounds()}},{key:"getLocalBounds",value:function(){return o.default.Empty}},{key:"draw",value:function(a,b){}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._worldTransform=null,this._visible=!1,this._parent=null}},{key:"worldTransform",get:function(){return this._worldTransform},set:function(a){this._worldTransform.copy(a)}},{key:"visible",get:function(){return this._visible},set:function(a){this._visible=a}},{key:"parent",get:function(){return this._parent},set:function(a){this._parent=a}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(26),j=d(i),k=function(){function a(b){f(this,a),this._seed=void 0===b?this.generateSeed():b,this._rc4=new j.default(this.getMixedKeys(this.flatten(this._seed,3),[]))}return h(a,[{key:"seed",get:function(){return this._seed},set:function(a){this._seed=null===a?this.generateSeed():a,this._rc4.setKeys(this.getMixedKeys(this.flatten(this._seed,3),[]))}}]),h(a,[{key:"flatten",value:function(a,b){var c=this,d=[];return b>=0&&"object"===(void 0===a?"undefined":g(a))&&Object.keys(a).forEach(function(e){d.push(c.flatten(a[e],b-1))}),d.length?this.arrayToString(d):"string"==typeof a?a:a+"\0"}},{key:"getMixedKeys",value:function(a,b){for(var c=[],d=""+a,e=d.length,f=0,g=0;g<e;g++)c[255&g]=255&(f^=19*b[255&g])+d.charCodeAt(g);return c}},{key:"generateSeed",value:function(){var a=new Uint8Array(256);try{crypto.getRandomValues(a)}catch(b){a.forEach(function(b,c){a[c]=256*Math.random()|0})}return this.arrayToString(a)}},{key:"arrayToString",value:function(a){return String.fromCharCode.apply(String,e(a))}},{key:"next",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=this._rc4,d=Math.pow(2,52),e=2*d,f=c.next(6),g=Math.pow(256,6),h=0;f<d;)f=256*(f+h),g*=256,h=c.next(1);for(;f>=e;)f/=2,g/=2,h>>>=1;return(f+h)/g*(b-a)+a}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this._i=0,this._j=0,this._keys=[],this.setKeys(b)}return e(a,[{key:"setKeys",value:function(a){var b=this._keys,c=256,d=255,e=a.length,f=0;this._i=0,this._j=0,b.length=0,e||(a=[e++]);for(var g=0;g<c;g++)b[g]=g;for(var h=0;h<c;h++){var i=b[h];f=d&f+a[h%e]+i,b[h]=b[f],b[f]=i}this.next(c)}},{key:"next",value:function(a){for(var b=this._keys,c=0,d=this._i,e=this._j,f=void 0;a--;)d=255&d+1,f=b[d],e=255&e+f,b[d]=b[e],b[e]=f,c=256*c+b[255&b[d]+b[e]];return this._i=d,this._j=e,c}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(3),j=d(i),k=c(1),l=d(k),m=c(7),n=d(m),o=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._transform=new n.default,a._position=new l.default,a._scale=new l.default(1,1),a._rotation=0,a._origin=new l.default,a._dirtyTransform=!0,a}return g(b,a),h(b,[{key:"setPosition",value:function(a,b){this._position.set(a,b),this._dirtyTransform=!0}},{key:"setScale",value:function(a,b){this._scale.set(a,b),this._dirtyTransform=!0}},{key:"setOrigin",value:function(a,b){this._origin.set(a,b),this._dirtyTransform=!0}},{key:"setRotation",value:function(a){var b=a%360;this._rotation=b<0?b+360:b,this._dirtyTransform=!0}},{key:"move",value:function(a,b){this.setPosition(this.x+a,this.y+b)}},{key:"rotate",value:function(a){this.setRotation(this._rotation+a)}},{key:"updateTransform",value:function(){var a=this._transform,b=this._position,c=this._scale,d=this._origin,e=this._rotation*Math.PI/-180,f=Math.cos(e),g=Math.sin(e),h=c.x*f,i=c.y*f,j=c.x*g,k=c.y*g;a.a=h,a.b=k,a.x=-d.x*h-d.y*k+b.x,a.c=-j,a.d=i,a.y=d.x*j-d.y*i+b.y}},{key:"destroy",value:function(){this.off(),this._position=null,this._scale=null,this._origin=null,this._transform=null}},{key:"x",get:function(){return this._position.x},set:function(a){this._position.x=a,this._dirtyTransform=!0}},{key:"y",get:function(){return this._position.y},set:function(a){this._position.y=a,this._dirtyTransform=!0}},{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a),this._dirtyTransform=!0}},{key:"scale",get:function(){return this._scale},set:function(a){this.setScale(a.x,a.y)}},{key:"rotation",get:function(){return this._rotation},set:function(a){this.setRotation(a)}},{key:"origin",get:function(){return this._origin},set:function(a){this.setOrigin(a.x,a.y)}},{key:"transform",get:function(){return this._dirtyTransform&&(this.updateTransform(),this._dirtyTransform=!1),this._transform},set:function(a){this._transform.copy(a)}}]),b}(j.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(6),h=d(g),i=function(){function a(b){e(this,a);var c=Object.assign({basepath:"",width:1280,height:720,soundVolume:1,musicVolume:1,masterVolume:1,canvas:null,canvasParent:null,clearColor:h.default.Black,clearBeforeRender:!0,contextOptions:{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1,depth:!1}},b);this._basePath=c.basePath,this._width=c.width,this._height=c.height,this._soundVolume=c.soundVolume,this._musicVolume=c.musicVolume,this._masterVolume=c.masterVolume,this._canvasParent="string"==typeof c.canvasParent?document.querySelector(c.canvasParent):c.canvasParent,this._canvas="string"==typeof c.canvas?document.querySelector(c.canvas):c.canvas,this._clearColor=c.clearColor,this._clearBeforeRender=c.clearBeforeRender,this._contextOptions=c.contextOptions}return f(a,[{key:"destroy",value:function(){this._width=null,this._height=null,this._soundVolume=null,this._musicVolume=null,this._masterVolume=null,this._canvasParent=null,this._canvas=null,this._clearColor=null,this._contextOptions=null}},{key:"basePath",get:function(){return this._basePath}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"soundVolume",get:function(){return this._soundVolume}},{key:"musicVolume",get:function(){return this._musicVolume}},{key:"masterVolume",get:function(){return this._masterVolume}},{key:"canvasParent",get:function(){return this._canvasParent}},{key:"canvas",get:function(){return this._canvas}},{key:"clearColor",get:function(){return this._clearColor}},{key:"clearBeforeRender",get:function(){return this._clearBeforeRender}},{key:"contextOptions",get:function(){return this._contextOptions}}]),a}();b.default=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},g=function(){function a(b){d(this,a),this._game=b,this._currentScene=null,this._sceneActive=!1,b.on("scene:change",this.onSceneChange,this).on("scene:start",this.onSceneStart,this).on("scene:stop",this.onSceneStop,this)}return e(a,[{key:"update",value:function(a){this._currentScene&&this._sceneActive&&this._currentScene.update(a)}},{key:"onSceneChange",value:function(a){this._game.trigger("scene:stop"),this._currentScene=a,this._currentScene.game=this._game,this._currentScene.load(this._game.loader)}},{key:"onSceneStart",value:function(){if(!this._currentScene)throw new Error("No scene was specified, use scene:change!");if(this._sceneActive)throw new Error("Scene can only be started once!");this._sceneActive=!0,this._currentScene.init()}},{key:"onSceneStop",value:function(){this._currentScene&&(this._sceneActive&&(this._currentScene.unload(),this._sceneActive=!1),this._currentScene.destroy(),this._currentScene=null,this._game.loader.off())}},{key:"destroy",value:function(){f(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this),this._game.trigger("scene:stop").off("scene:change",this.onSceneChange,this).off("scene:start",this.onSceneStart,this).off("scene:stop",this.onSceneStop,this),this._game=null}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(31),h=d(g),i=c(33),j=d(i),k=c(35),l=d(k),m=c(40),n=d(m),o=c(7),p=d(o),q=function(){function a(b){e(this,a);var c=b.config;if(this._canvas=b.canvas,this._context=this._createContext(c.contextOptions),!this._context)throw new Error("This browser or hardware does not support WebGL.");this._clearColor=c.clearColor.clone(),this._clearBeforeRender=c.clearBeforeRender,this._isDrawing=!1,this._renderers=new Map,this._currentRenderer=null,this._worldTransform=new p.default,this._contextLost=!1,this._rootRenderTarget=new h.default(c.width,c.height,!0),this._renderTarget=null,
this._blendMode=null,this._shader=null,this._projection=new p.default,this._addEvents(),this._setGLFlags(),this.setBlendMode(j.default.Default),this.setClearColor(this._clearColor),this.setRenderTarget(this._rootRenderTarget),this.addRenderer("sprite",new l.default),this.addRenderer("particle",new n.default),this.setCurrentRenderer("sprite"),this.resize(c.width,c.height),b.on("display:begin",this.onBegin,this).on("display:render",this.onRender,this).on("display:end",this.onEnd,this).on("display:clear",this.onClear,this).on("display:resize",this.resize,this)}return f(a,[{key:"addRenderer",value:function(a,b){if(this._renderers.has(a))throw new Error('Renderer "'+a+'" was already added.');b.setContext(this._context),this._renderers.set(a,b)}},{key:"getRenderer",value:function(a){if(!this._renderers.has(a))throw new Error('Could not find renderer "'+a+'".');return this._renderers.get(a)}},{key:"removeRenderer",value:function(a){this._renderers.has(a)&&(this._renderers.get(a).destroy(),this._renderers.delete(a))}},{key:"setCurrentRenderer",value:function(a){var b=this.getRenderer(a),c=this._currentRenderer;c!==b&&(c&&c.stop(),this._currentRenderer=b,b.start(this))}},{key:"getCurrentRenderer",value:function(){return this._currentRenderer}},{key:"setRenderTarget",value:function(a){var b=a||this._rootRenderTarget;this._renderTarget!==b&&(b.setContext(this._context),b.bind(),this._renderTarget=b)}},{key:"setBlendMode",value:function(a){a!==this._blendMode&&(this._blendMode=a,this._context.blendFunc(a.sFactor,a.dFactor))}},{key:"setShader",value:function(a){var b=this._context,c=this._shader;c!==a&&(c&&(c.inUse=!1),a.setContext(b),a.setProjection(this._projection),a.bind(),this._shader=a)}},{key:"resize",value:function(a,b){this._canvas.width=a,this._canvas.height=b,this._rootRenderTarget.resize(a,b),this._projection.copy(this._rootRenderTarget.getProjection()),this._shader&&this._shader.setProjection(this._projection)}},{key:"setView",value:function(a){this._renderTarget.setView(a),this._renderTarget===this._rootRenderTarget&&(this._projection.copy(this._rootRenderTarget.getProjection()),this._shader.setProjection(this._projection))}},{key:"onClear",value:function(a){var b=this._context;a&&this.setClearColor(a),b.clear(b.COLOR_BUFFER_BIT)}},{key:"onBegin",value:function(){if(this._isDrawing)throw new Error("Renderer has already begun!");this._isDrawing=!0,this._clearBeforeRender&&this.onClear()}},{key:"onRender",value:function(a){if(!this._isDrawing)throw new Error("Renderer needs to begin first!");this._contextLost||a.draw(this,this._worldTransform)}},{key:"onEnd",value:function(){if(!this._isDrawing)throw new Error("Renderer needs to begin first!");this._isDrawing=!1,this._contextLost||this._currentRenderer.flush()}},{key:"setClearColor",value:function(a){this._context.clearColor(a.r/255,a.g/255,a.b/255,a.a)}},{key:"destroy",value:function(){var a=this;this._removeEvents(),this._renderers.forEach(function(b,c){a.removeRenderer(c)}),this._canvas=null,this._context=null,this._clearColor=null,this._renderers=null,this._currentRenderer=null,this._worldTransform=null}},{key:"_createContext",value:function(a){var b=Object.assign({alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!0,depth:!1},a);try{return this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b)}catch(a){return null}}},{key:"_addEvents",value:function(){this._onContextLostHandler=this._onContextLost.bind(this),this._onContextRestoredHandler=this._onContextRestored.bind(this),this._canvas.addEventListener("webglcontextlost",this._onContextLostHandler,!1),this._canvas.addEventListener("webglcontextrestored",this._onContextRestoredHandler,!1)}},{key:"_removeEvents",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLostHandler,!1),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestoredHandler,!1),this._onContextLostHandler=null,this._onContextRestoredHandler=null}},{key:"_setGLFlags",value:function(){var a=this._context;a.colorMask(!0,!0,!0,!1),a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND)}},{key:"_onContextLost",value:function(){this._contextLost=!0}},{key:"_onContextRestored",value:function(){this._contextLost=!1}},{key:"context",get:function(){return this._context}},{key:"renderTarget",get:function(){return this._renderTarget},set:function(a){this.setRenderTarget(a)}},{key:"blendMode",get:function(){return this._blendMode},set:function(a){this.setBlendMode(a)}},{key:"clearColor",get:function(){return this._clearColor},set:function(a){this.setClearColor(a)}}]),a}();b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(32),h=d(g),i=c(4),j=d(i),k=c(1),l=d(k),m=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,a),this._context=null,this._frameBuffer=null,this._isRoot=d,this._size=new l.default(b,c),this._defaultView=new h.default(new j.default(0,0,b,c)),this._view=this._defaultView}return f(a,[{key:"setContext",value:function(a){this._context||(this._context=a,this._frameBuffer=this._isRoot?null:a.createFramebuffer())}},{key:"bind",value:function(){var a=this._context;a.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer)}},{key:"getViewport",value:function(a){var b=this.width,c=this.height,d=a.viewport;return new j.default(.5+b*d.x|0,.5+c*d.y|0,.5+b*d.width|0,.5+c*d.height|0)}},{key:"resize",value:function(a,b){this._size.set(a,b),this.setViewport()}},{key:"setViewport",value:function(){var a=this.getViewport(this._view);this._context.viewport(a.x,a.y,a.width,a.height)}},{key:"setView",value:function(a){this._view=a,this.setViewport()}},{key:"getProjection",value:function(){return this._view.transform}},{key:"width",get:function(){return this._size.x},set:function(a){this._size.x=0|a}},{key:"height",get:function(){return this._size.y},set:function(a){this._size.y=0|a}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=d(g),i=c(4),j=d(i),k=c(7),l=d(k),m=function(){function a(b){e(this,a),this._center=new h.default,this._size=new h.default,this._rotation=0,this._viewport=new j.default(0,0,1,1),this._transform=new l.default,this._dirtyTransform=!0,this.reset(b||new j.default(0,0,100,100))}return f(a,[{key:"setCenter",value:function(a,b){this._center.set(a,b),this._dirtyTransform=!0}},{key:"setSize",value:function(a,b){this._size.set(a,b),this._dirtyTransform=!0}},{key:"setRotation",value:function(a){var b=a%360;this._rotation=b<0?b+360:b,this._dirtyTransform=!0}},{key:"setViewport",value:function(a){this._viewport.copy(a)}},{key:"move",value:function(a,b){this.setCenter(this._center.x+a,this._center.y+b)}},{key:"zoom",value:function(a){this.setSize(this._size.x*a,this._size.y*a)}},{key:"rotate",value:function(a){this.setRotation(this._rotation+a)}},{key:"reset",value:function(a){this._center.set(a.x+a.width/2,a.y+a.height/2),this._size.set(a.width,a.height),this._rotation=0,this._dirtyTransform=!0}},{key:"updateTransform",value:function(){var a=this._transform,b=this._rotation*Math.PI/-180,c=this._center,d=this._size,e=Math.cos(b),f=Math.sin(b),g=2/d.x,h=-2/d.y,i=-g*c.x,j=-h*c.y,k=-c.x*e-c.y*f+c.x,l=c.x*f-c.y*e+c.y;a.a=g*e,a.b=g*f,a.x=g*k+i,a.c=-h*f,a.d=h*e,a.y=h*l+j}},{key:"width",get:function(){return this._size.x}},{key:"height",get:function(){return this._size.y}},{key:"left",get:function(){return this._center.x-this._size.x/2}},{key:"top",get:function(){return this._center.y-this._size.y/2}},{key:"right",get:function(){return this._center.x+this._size.x/2}},{key:"bottom",get:function(){return this._center.y+this._size.y/2}},{key:"center",get:function(){return this._center},set:function(a){this._center.copy(a),this._dirtyTransform=!0}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a),this._dirtyTransform=!0}},{key:"rotation",get:function(){return this._rotation},set:function(a){this.setRotation(a)}},{key:"viewport",get:function(){return this._viewport},set:function(a){this._viewport.copy(a),this._dirtyTransform=!0}},{key:"transform",get:function(){return this._dirtyTransform&&(this.updateTransform(),this._dirtyTransform=!1),this._transform},set:function(a){this._transform.copy(a)}}]),a}();b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(34),h=d(g),i=window.WebGLRenderingContext,j=i.ONE,k=i.SRC_ALPHA,l=i.DST_ALPHA,m=i.ONE_MINUS_SRC_ALPHA,n=new h.default(j,m,"source-over"),o=new h.default(k,l,"lighter"),p=new h.default(l,m,"multiply"),q=new h.default(k,j,"screen"),r=new h.default(j,m,"overlay"),s=new h.default(j,m,"darken"),t=new h.default(j,m,"lighten"),u=new h.default(j,m,"color-dodge"),v=new h.default(j,m,"color-burn"),w=new h.default(j,m,"hard-light"),x=new h.default(j,m,"soft-light"),y=new h.default(j,m,"difference"),z=new h.default(j,m,"exclusion"),A=new h.default(j,m,"hue"),B=new h.default(j,m,"saturation"),C=new h.default(j,m,"color"),D=new h.default(j,m,"luminosity"),E=function(){function a(){e(this,a)}return f(a,null,[{key:"Default",get:function(){return n}},{key:"SourceOver",get:function(){return n}},{key:"Add",get:function(){return o}},{key:"Multiply",get:function(){return p}},{key:"Screen",get:function(){return q}},{key:"Overlay",get:function(){return r}},{key:"Darken",get:function(){return s}},{key:"Lighten",get:function(){return t}},{key:"ColorDodge",get:function(){return u}},{key:"ColorBurn",get:function(){return v}},{key:"HardLight",get:function(){return w}},{key:"SoftLight",get:function(){return x}},{key:"Difference",get:function(){return y}},{key:"Exclusion",get:function(){return z}},{key:"Hue",get:function(){return A}},{key:"Saturation",get:function(){return B}},{key:"Color",get:function(){return C}},{key:"Luminosity",get:function(){return D}}]),a}();b.default=E},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e){d(this,a),this._sFactor=b,this._dFactor=c,this._canvasBlending=e}return e(a,[{key:"destroy",value:function(){this._sFactor=null,this._dFactor=null,this._canvasBlending=null}},{key:"sFactor",get:function(){return this._sFactor}},{key:"dFactor",get:function(){return this._dFactor}},{key:"canvasBlending",get:function(){return this._canvasBlending}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(16),j=d(i),k=c(36),l=d(k),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._spriteVertexSize=20,a._indexCount=6,a._maxSprites=Math.pow(2,16)/a._indexCount|0,a._vertexData=new ArrayBuffer(a._maxSprites*a._spriteVertexSize*4),a._vertexView=new Float32Array(a._vertexData),a._colorView=new Uint32Array(a._vertexData),a._indexData=a.createIndexBuffer(a._maxSprites*a._indexCount),a._currentBatchSize=0,a._context=null,a._vertexBuffer=null,a._indexBuffer=null,a._shader=new l.default,a._currentTexture=null,a}return g(b,a),h(b,[{key:"start",value:function(a){var b=this._context,c=this._shader,d=this._spriteVertexSize;a.setShader(c),b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this._vertexData,b.DYNAMIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this._indexData,b.STATIC_DRAW),b.vertexAttribPointer(c.getAttribute("aVertexPosition").location,2,b.FLOAT,!1,d,0),b.vertexAttribPointer(c.getAttribute("aTextureCoord").location,2,b.FLOAT,!1,d,8),b.vertexAttribPointer(c.getAttribute("aColor").location,4,b.UNSIGNED_BYTE,!0,d,16)}},{key:"draw",value:function(a){var b=this._vertexView,c=this._colorView,d=a.worldTransform,e=a.vertexData,f=a.texture,g=this._currentTexture!==f,h=this._currentBatchSize*this._spriteVertexSize;(this._currentBatchSize>=this._maxSprites||g)&&(this.flush(),h=0,g&&(this._currentTexture=f,this._shader.setUniformTexture("uSampler",f,0))),b[h]=e[0]*d.a+e[1]*d.b+d.x,b[h+1]=e[0]*d.c+e[1]*d.d+d.y,b[h+2]=e[2],b[h+3]=e[3],b[h+5]=e[4]*d.a+e[5]*d.b+d.x,b[h+6]=e[4]*d.c+e[5]*d.d+d.y,b[h+7]=e[6],b[h+8]=e[7],b[h+10]=e[8]*d.a+e[9]*d.b+d.x,b[h+11]=e[8]*d.c+e[9]*d.d+d.y,b[h+12]=e[10],b[h+13]=e[11],b[h+15]=e[12]*d.a+e[13]*d.b+d.x,b[h+16]=e[12]*d.c+e[13]*d.d+d.y,b[h+17]=e[14],b[h+18]=e[15],c[h+4]=c[h+9]=c[h+14]=c[h+19]=a.tint.rgba,this._currentBatchSize++}},{key:"flush",value:function(){var a=this._context,b=this._currentBatchSize;b&&(a.bufferSubData(a.ARRAY_BUFFER,0,this._vertexView.subarray(0,b*this._spriteVertexSize)),a.drawElements(a.TRIANGLES,b*this._indexCount,a.UNSIGNED_SHORT,0),this._currentBatchSize=0)}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(17),i=d(h),j=c(11),k=d(j),l=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setVertexSource(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void) {","vTextureCoord = aTextureCoord;","vColor = vec4(aColor.rgb * aColor.a, aColor.a);","gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","}"]),a.setFragmentSource(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"]),a.addAttribute("aVertexPosition",!0),a.addAttribute("aTextureCoord",!0),a.addAttribute("aColor",!0),a.addUniform("uSampler",k.default.Texture),a.addUniform("projectionMatrix",k.default.Matrix),a}return g(b,a),b}(i.default);b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._name=b,this._active=c,this._location=null}return e(a,[{key:"destroy",value:function(){this._name=null,this._active=null,this._location=null}},{key:"name",get:function(){return this._name}},{key:"location",get:function(){return this._location},set:function(a){this._location=a}},{key:"active",get:function(){return this._active},set:function(a){this._active=!!a}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._name=b,this._type=c,this._value=null,this._location=null,this._textureUnit=-1,this._dirty=!1,this._textureUnitChanged=!1}return e(a,[{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"location",get:function(){return this._location},set:function(a){this._location=a}},{key:"value",get:function(){return this._value},set:function(a){this._value=a,this._dirty=!0}},{key:"textureUnit",get:function(){return this._textureUnit},set:function(a){this._textureUnit!==a&&(this._textureUnit=a,this._textureUnitChanged=!0)}},{key:"dirty",get:function(){return this._dirty},set:function(a){this._dirty=!!a}},{key:"textureUnitChanged",get:function(){return this._textureUnitChanged},set:function(a){this._textureUnitChanged=!!a}}]),e(a,[{key:"destroy",value:function(){this._location=null,this._value=null}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(9),h=d(g),i=c(10),j=d(i),k=function(){function a(b){e(this,a),this._context=b,this._texture=b.createTexture(),this._premultiplyAlpha=!0,this._width=-1,this._height=-1}return f(a,[{key:"bind",value:function(a){var b=this._context;"number"==typeof a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this._texture)}},{key:"unbind",value:function(){var a=this._context;a.bindTexture(a.TEXTURE_2D,null)}},{key:"setSource",value:function(a){var b=this._context,c=a.videoWidth||a.width,d=a.videoHeight||a.height;this.bind(),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),d!==this._height||c!==this._width?b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a):b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,a),this._width=c,this._height=d}},{key:"setScaleMode",value:function(a){var b=this._context,c=h.default.getGLEnum(a);this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c)}},{key:"setWrapMode",value:function(a){var b=this._context,c=j.default.getGLEnum(a);this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c)}},{key:"destroy",value:function(){this._context.deleteTexture(this._texture),this._texture=null,this._context=null}}]),a}();b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(16),j=d(i),k=c(41),l=d(k),m=c(0),n=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._vertexCount=4,a._vertexPropCount=10,a._particleVertexSize=a._vertexCount*a._vertexPropCount,a._indexCount=6,a._maxParticles=~~(Math.pow(2,16)/a._indexCount),a._vertexData=new ArrayBuffer(a._maxParticles*a._particleVertexSize*4),a._vertexView=new Float32Array(a._vertexData),a._colorView=new Uint32Array(a._vertexData),a._indexData=a.createIndexBuffer(a._maxParticles*a._indexCount),a._currentBatchSize=0,a._vertexBuffer=null,a._indexBuffer=null,a._shader=new l.default,a._currentTexture=null,a}return g(b,a),h(b,[{key:"start",value:function(a){var b=this._context,c=this._shader,d=this._particleVertexSize;a.setShader(c),b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this._vertexData,b.STREAM_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this._indexData,b.STATIC_DRAW),b.vertexAttribPointer(c.getAttribute("aVertexPosition").location,2,b.FLOAT,!1,d,0),b.vertexAttribPointer(c.getAttribute("aTextureCoord").location,2,b.FLOAT,!1,d,8),b.vertexAttribPointer(c.getAttribute("aPosition").location,2,b.FLOAT,!1,d,16),b.vertexAttribPointer(c.getAttribute("aScale").location,2,b.FLOAT,!1,d,24),b.vertexAttribPointer(c.getAttribute("aRotation").location,1,b.FLOAT,!1,d,32),b.vertexAttribPointer(c.getAttribute("aColor").location,4,b.UNSIGNED_BYTE,!0,d,36)}},{key:"draw",value:function(a){var b=this._vertexView,c=this._colorView,d=a.particles,e=a.texture,f=a.textureRect,g=a.textureCoords,h=this._currentTexture!==e,i=this._particleVertexSize,j=d.length;(this._currentBatchSize>=this._maxParticles||h)&&(this.flush(),h&&(this._currentTexture=e,this._shader.setUniformTexture("uSampler",e,0)));for(var k=0,l=this._currentBatchSize*this._particleVertexSize;k<j;k++,l+=i){this._currentBatchSize>=this._maxParticles&&(this.flush(),l=this._currentBatchSize*this._particleVertexSize);var n=d[k];b[l]=b[l+1]=b[l+11]=b[l+20]=0,b[l+2]=b[l+22]=g.x,b[l+3]=b[l+13]=g.y,b[l+10]=b[l+30]=f.width,b[l+21]=b[l+31]=f.height,b[l+12]=b[l+32]=g.width,b[l+23]=b[l+33]=g.height,b[l+4]=b[l+14]=b[l+24]=b[l+34]=n.position.x,b[l+5]=b[l+15]=b[l+25]=b[l+35]=n.position.y,b[l+6]=b[l+16]=b[l+26]=b[l+36]=n.scale.x,b[l+7]=b[l+17]=b[l+27]=b[l+37]=n.scale.y,b[l+8]=b[l+18]=b[l+28]=b[l+38]=(0,m.degreesToRadians)(n.rotation),c[l+9]=c[l+19]=c[l+29]=c[l+39]=n.color.rgba,this._currentBatchSize++}}},{key:"flush",value:function(){var a=this._currentBatchSize,b=this._context;a&&(b.bufferSubData(b.ARRAY_BUFFER,0,this._vertexView.subarray(0,a*this._particleVertexSize)),b.drawElements(b.TRIANGLES,a*this._indexCount,b.UNSIGNED_SHORT,0),this._currentBatchSize=0)}}]),b}(j.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(17),i=d(h),j=c(11),k=d(j),l=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setVertexSource(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aPosition;","attribute vec2 aScale;","attribute float aRotation;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void) {","vec2 vp = aVertexPosition;","vp.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","vp.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","vp = (vp * aScale) + aPosition;","vTextureCoord = aTextureCoord;","vColor = vec4(aColor.rgb * aColor.a, aColor.a);","gl_Position = vec4((projectionMatrix * vec3(vp, 1.0)).xy, 0.0, 1.0);","}"]),a.setFragmentSource(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"]),a.addAttribute("aVertexPosition",!0),a.addAttribute("aTextureCoord",!0),a.addAttribute("aPosition",!0),a.addAttribute("aScale",!0),a.addAttribute("aRotation",!0),a.addAttribute("aColor",!0),a.addUniform("uSampler",k.default.Texture),a.addUniform("projectionMatrix",k.default.Matrix),a}return g(b,a),b}(i.default);b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b){d(this,a),this._game=b,this._context=new AudioContext,this._destination=this._context.destination,this._compressor=this._context.createDynamicsCompressor(),this._compressor.connect(this._destination),this._masterGain=this._context.createGain(),this._masterGain.connect(this._compressor),this._musicGain=this._context.createGain(),this._musicGain.connect(this._masterGain),this._soundGain=this._context.createGain(),this._soundGain.connect(this._masterGain),this._masterVolume=1,this._musicVolume=1,this._soundVolume=1,b.on("audio:play",this.onPlay,this).on("audio:volume:master",this.onVolumeMaster,this).on("audio:volume:sound",this.onVolumeSound,this).on("audio:volume:music",this.onVolumeMusic,this)}return e(a,[{key:"destroy",value:function(){this._destination=null,this._soundGain.disconnect(),this._soundGain=null,this._musicGain.disconnect(),this._musicGain=null,this._masterGain.disconnect(),this._masterGain=null,this._compressor.disconnect(),this._compressor=null,this._context.close(),this._context=null,this._game.off("audio:play",this.onPlay,this).off("audio:volume:master",this.onVolumeMaster,this).off("audio:volume:sound",this.onVolumeSound,this).off("audio:volume:music",this.onVolumeMusic,this),this._game=null}},{key:"onPlay",value:function(a,b){a.connect(this),a.play(b)}},{key:"onVolumeMaster",value:function(a){this.masterVolume=a}},{key:"onVolumeSound",value:function(a){this.soundVolume=a}},{key:"onVolumeMusic",value:function(a){this.musicVolume=a}},{key:"context",get:function(){return this._context}},{key:"masterNode",get:function(){return this._masterGain}},{key:"musicNode",get:function(){return this._musicGain}},{key:"soundNode",get:function(){return this._soundGain}},{key:"analyserTarget",get:function(){return this._compressor}},{key:"masterVolume",get:function(){return this._masterVolume},set:function(a){var b=(0,f.clamp)(a,0,1);this._masterVolume!==b&&(this._masterGain.gain.value=this._masterVolume=b)}},{key:"soundVolume",get:function(){return this._soundVolume},set:function(a){var b=(0,f.clamp)(a,0,1);this._soundVolume!==b&&(this._soundGain.gain.value=this._soundVolume=b)}},{key:"musicVolume",get:function(){return this._musicVolume},set:function(a){var b=(0,f.clamp)(a,0,1);this._musicVolume!==b&&(this._musicGain.gain.value=this._musicVolume=b)}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=c(44),m=d(l),n=c(45),o=d(n),p=c(46),q=d(p),r=c(50),s=d(r),t=1024,u=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new ArrayBuffer(4*t),0,t));return c._game=a,c._inputs=new Set,c._keyboard=new m.default(a,c._channelBuffer),c._mouse=new o.default(a,c._channelBuffer),c._gamepadManager=new q.default(a,c._channelBuffer),c._pointerManager=new s.default(a,c._channelBuffer),a.on("input:add",c.onInputAdd,c).on("input:remove",c.onInputRemove,c).on("input:clear",c.onInputClear,c),c}return g(b,a),h(b,[{key:"onInputAdd",value:function(a){var b=this;if(Array.isArray(a))return void a.forEach(function(a){b._inputs.add(a)});this._inputs.add(a)}},{key:"onInputRemove",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(a))return void a.forEach(function(a){b.onInputRemove(a,c)});c&&a.destroy(),this._inputs.delete(a)}},{key:"onInputClear",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this._inputs.forEach(function(a){a.destroy()}),this._inputs.clear()}},{key:"update",value:function(){var a=this.channels;this._gamepadManager.update(),this._inputs.forEach(function(b){b.update(a)}),this._mouse.update()}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,!0),this._game.trigger("input:clear"),
this._inputs=null,this._keyboard.destroy(),this._keyboard=null,this._mouse.destroy(),this._mouse=null,this._gamepadManager.destroy(),this._gamepadManager=null,this._pointerManager.destroy(),this._pointerManager=null,this._game=null}}]),b}(k.default);b.default=u},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=c(5),m=d(l),n=m.default.Keyboard<<8,o=256,p=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,n,o));return d._game=a,d._addEventListeners(),d}return g(b,a),h(b,[{key:"destroy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,a),this._removeEventListeners(),this._game=null}},{key:"_addEventListeners",value:function(){this._onKeyDownHandler=this._onKeyDown.bind(this),this._onKeyUpHandler=this._onKeyUp.bind(this),window.addEventListener("keydown",this._onKeyDownHandler,!0),window.addEventListener("keyup",this._onKeyUpHandler,!0)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("keydown",this._onKeyDownHandler,!0),window.removeEventListener("keyup",this._onKeyUpHandler,!0),this._onKeyDownHandler=null,this._onKeyUpHandler=null}},{key:"_onKeyDown",value:function(a){var c=a.keyCode;this.active&&(this._channels[c]=1,this.trigger("keyboard:down",b.getChannelCode(c),this))}},{key:"_onKeyUp",value:function(a){var c=a.keyCode;this.active&&(this._channels[c]=0,this.trigger("keyboard:up",b.getChannelCode(c),this))}}],[{key:"getChannelCode",value:function(a){return n|255&a}}]),b}(k.default);b.default=p,p.Backspace=8|n,p.Tab=9|n,p.Clear=12|n,p.Enter=13|n,p.Shift=16|n,p.Control=17|n,p.Alt=18|n,p.Pause=19|n,p.CapsLock=20|n,p.Escape=27|n,p.Space=32|n,p.PageUp=33|n,p.PageDown=34|n,p.End=35|n,p.Home=36|n,p.Left=37|n,p.Up=38|n,p.Right=39|n,p.Down=40|n,p.Insert=45|n,p.Delete=46|n,p.Help=47|n,p.Zero=48|n,p.One=49|n,p.Two=50|n,p.Three=51|n,p.Four=52|n,p.Five=53|n,p.Six=54|n,p.Seven=55|n,p.Eight=56|n,p.Nine=57|n,p.A=65|n,p.B=66|n,p.C=67|n,p.D=68|n,p.E=69|n,p.F=70|n,p.G=71|n,p.H=72|n,p.I=73|n,p.J=74|n,p.K=75|n,p.L=76|n,p.M=77|n,p.N=78|n,p.O=79|n,p.P=80|n,p.Q=81|n,p.R=82|n,p.S=83|n,p.T=84|n,p.U=85|n,p.V=86|n,p.W=87|n,p.X=88|n,p.Y=89|n,p.Z=90|n,p.NumPad0=96|n,p.NumPad1=97|n,p.NumPad2=98|n,p.NumPad3=99|n,p.NumPad4=100|n,p.NumPad5=101|n,p.NumPad6=102|n,p.NumPad7=103|n,p.NumPad8=104|n,p.NumPad9=105|n,p.NumPadMultiply=106|n,p.NumPadAdd=107|n,p.NumPadEnter=108|n,p.NumPadSubtract=109|n,p.NumPadDecimal=110|n,p.NumPadDivide=111|n,p.F1=112|n,p.F2=113|n,p.F3=114|n,p.F4=115|n,p.F5=116|n,p.F6=117|n,p.F7=118|n,p.F8=119|n,p.F9=120|n,p.F10=121|n,p.F11=122|n,p.F12=123|n,p.NumLock=144|n,p.ScrollLock=145|n,p.Colon=186|n,p.Equals=187|n,p.Comma=188|n,p.Dash=189|n,p.Period=190|n,p.QuestionMark=191|n,p.Tilde=192|n,p.OpenBracket=219|n,p.BackwardSlash=220|n,p.ClosedBracket=221|n,p.Quotes=222|n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=c(5),m=d(l),n=c(1),o=d(n),p=m.default.Mouse<<8,q=256,r=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,p,q));return d._game=a,d._canvas=a.canvas,d._position=new o.default,d._insideWindow=!1,d._positionChanged=!1,d._wheelChanged=!1,d._stateChanged=!1,d._addEventListeners(),d}return g(b,a),h(b,[{key:"update",value:function(){var a=this._game;this.active&&(this._stateChanged&&(this._insideWindow=this.windowEntered,this._insideWindow?a.trigger("mouse:enter",this):a.trigger("mouse:leave",this),this._setStateDelta(0),this._stateChanged=!1),this._positionChanged&&(a.trigger("mouse:move",this),this._setPositionDelta(0,0),this._positionChanged=!1),this._wheelChanged&&(a.trigger("mouse:scroll",this),this._setWheelDelta(0,0,0),this._wheelChanged=!1))}},{key:"destroy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,a),this._removeEventListeners(),this._stateChanged=null,this._positionChanged=null,this._wheelChanged=null,this._game=null}},{key:"_addEventListeners",value:function(){var a=this._canvas;this._onMouseDownHandler=this._onMouseDown.bind(this),this._onMouseUpHandler=this._onMouseUp.bind(this),this._onMouseMoveHandler=this._onMouseMove.bind(this),this._onMouseOverHandler=this._onMouseOver.bind(this),this._onMouseOutHandler=this._onMouseOut.bind(this),this._onMouseWheelHandler=this._onMouseWheel.bind(this),this._killEventHandler=this._killEvent.bind(this),a.addEventListener("mousedown",this._onMouseDownHandler,!0),a.addEventListener("mouseup",this._onMouseUpHandler,!0),a.addEventListener("mousemove",this._onMouseMoveHandler,!0),a.addEventListener("mouseover",this._onMouseOverHandler,!0),a.addEventListener("mouseout",this._onMouseOutHandler,!0),a.addEventListener("wheel",this._onMouseWheelHandler,!0),a.addEventListener("contextmenu",this._killEventHandler,!0),a.addEventListener("selectstart",this._killEventHandler,!0)}},{key:"_removeEventListeners",value:function(){var a=this._canvas;a.removeEventListener("mousedown",this._onMouseDownHandler,!0),a.removeEventListener("mouseup",this._onMouseUpHandler,!0),a.removeEventListener("mousemove",this._onMouseMoveHandler,!0),a.removeEventListener("mouseover",this._onMouseOverHandler,!0),a.removeEventListener("mouseout",this._onMouseOutHandler,!0),a.removeEventListener("wheel",this._onMouseWheelHandler,!0),a.removeEventListener("contextmenu",this._killEventHandler,!0),a.removeEventListener("selectstart",this._killEventHandler,!0),this._onMouseDownHandler=null,this._onMouseUpHandler=null,this._onMouseMoveHandler=null,this._onMouseOverHandler=null,this._onMouseOutHandler=null,this._onMouseWheelHandler=null,this._killEventHandler=null}},{key:"_killEvent",value:function(a){a.preventDefault(),a.stopImmediatePropagation()}},{key:"_onMouseDown",value:function(a){var c=Math.min(a.button,4);this._channels[c]=1,this._game.trigger("mouse:down",b.getChannelCode(c),this),a.preventDefault()}},{key:"_onMouseUp",value:function(a){var c=Math.min(a.button,4);this._channels[c]=0,this._game.trigger("mouse:up",b.getChannelCode(c),this),a.preventDefault()}},{key:"_onMouseMove",value:function(a){var b=this._canvas,c=this._position,d=a.clientX-b.offsetLeft,e=a.clientY-b.offsetTop;this._setPositionDelta(d-c.x,e-c.y),c.set(d,e),this._positionChanged=!0}},{key:"_onMouseOver",value:function(){this._setStateDelta(1)}},{key:"_onMouseOut",value:function(){this._setStateDelta(-1)}},{key:"_onMouseWheel",value:function(a){this._setWheelDelta(a.deltaX,a.deltaY,a.deltaZ),this._wheelChanged=!0}},{key:"_setWheelDelta",value:function(a,b,c){var d=this.channels;d[5]=Math.abs(Math.min(0,a)),d[6]=Math.max(0,a),d[7]=Math.abs(Math.min(0,b)),d[8]=Math.max(0,b),d[9]=Math.abs(Math.min(0,c)),d[10]=Math.max(0,c)}},{key:"_setPositionDelta",value:function(a,b){var c=this.channels;c[11]=Math.abs(Math.min(0,a)),c[12]=Math.max(0,a),c[13]=Math.abs(Math.min(0,b)),c[14]=Math.max(0,b)}},{key:"_setStateDelta",value:function(a){var b=this.channels;b[15]=Math.max(0,a),b[16]=Math.abs(Math.min(0,a))}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"position",get:function(){return this._position}},{key:"insideWindow",get:function(){return this._insideWindow}},{key:"wheelX",get:function(){return this._channels[5]-this._channels[6]}},{key:"wheelY",get:function(){return this._channels[7]-this._channels[8]}},{key:"wheelZ",get:function(){return this._channels[9]-this._channels[10]}},{key:"deltaX",get:function(){return this._channels[11]-this._channels[12]}},{key:"deltaY",get:function(){return this._channels[13]-this._channels[14]}},{key:"windowEntered",get:function(){return!!this._channels[15]}},{key:"windowLeft",get:function(){return!!this._channels[16]}}],[{key:"getChannelCode",value:function(a){return p|255&a}}]),b}(k.default);b.default=r,r.LeftButton=0|p,r.MiddleButton=1|p,r.RightButton=2|p,r.BackButton=3|p,r.ForwardButton=4|p,r.ScrollLeft=5|p,r.ScrollRight=6|p,r.ScrollUp=7|p,r.ScrollDown=8|p,r.ScrollForward=9|p,r.ScrollBackward=10|p,r.MoveLeft=11|p,r.MoveRight=12|p,r.MoveUp=13|p,r.MoveDown=14|p,r.EnterWindow=15|p,r.LeaveWindow=16|p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(18),k=d(j),l=c(2),m=d(l),n=c(5),o=d(n),p=o.default.Gamepad<<8,q=256,r=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,p,q));return d._game=a,d._gamepads=[],d}return g(b,a),h(b,[{key:"getGamepads",value:function(){return this._gamepads}},{key:"getGamepad",value:function(a){return this._gamepads[a]||null}},{key:"update",value:function(){this.updateGamepads(),this.active&&this._gamepads.forEach(function(a){a.update()})}},{key:"updateGamepads",value:function(){var a=this._game,b=this._gamepads,c=b.length,d=this.getRawGamepads(),e=d.length;c!==e&&(c<e?this.addGamepads(d):this.removeGamepads(d),a.trigger("gamepad:change",b))}},{key:"addGamepads",value:function(a){for(var b=this._game,c=this._channelBuffer,d=this._gamepads,e=d.length;e<a.length;e++)d.push(new k.default(c,e,a[e])),b.trigger("gamepad:add",d)}},{key:"removeGamepads",value:function(a){for(var b=this._game,c=this._gamepads,d=a.length,e=c.length-1;e>=0;e--){var f=c[e];e<d?(f.rawGamepad=a[e],f.index=e):(f.destroy(!0),c.splice(e,1),b.trigger("gamepad:remove",c))}}},{key:"getRawGamepads",value:function(){for(var a=window.navigator,b=a.getGamepads(),c=[],d=b.length,e=0;e<d;e++)b[e]&&c.push(b[e]);return c}},{key:"destroy",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,a),this._gamepads.forEach(function(a){a.destroy()}),this._gamepads.length=0,this._gamepads=null,this._defaultMapping.destroy(),this._defaultMapping=null,this._game=null}}]),b}(m.default);b.default=r},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(48),i=d(h),j=c(49),k=d(j),l=c(18),m=d(l),n=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.setButtons([new k.default(0,m.default.FaceButtonBottom),new k.default(1,m.default.FaceButtonLeft),new k.default(2,m.default.FaceButtonRight),new k.default(3,m.default.FaceButtonTop),new k.default(4,m.default.LeftTriggerBottom),new k.default(5,m.default.RightTriggerBottom),new k.default(6,m.default.LeftTriggerTop),new k.default(7,m.default.RightTriggerTop),new k.default(8,m.default.Select),new k.default(9,m.default.Start),new k.default(10,m.default.LeftStickButton),new k.default(11,m.default.RightStickButton),new k.default(12,m.default.DPadUp),new k.default(13,m.default.DPadDown),new k.default(14,m.default.DPadLeft),new k.default(15,m.default.DPadRight),new k.default(16,m.default.Special)]),a.setAxes([new k.default(0,m.default.LeftStickLeft,{negate:!0}),new k.default(0,m.default.LeftStickRight),new k.default(1,m.default.LeftStickUp,{negate:!0}),new k.default(1,m.default.LeftStickDown),new k.default(2,m.default.RightStickLeft,{negate:!0}),new k.default(2,m.default.RightStickRight),new k.default(3,m.default.RightStickUp,{negate:!0}),new k.default(3,m.default.RightStickDown)]),a}return g(b,a),b}(i.default);b.default=n},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._buttons=[],this._axes=[]}return e(a,[{key:"buttons",get:function(){return this._buttons},set:function(a){this.setButtons(a)}},{key:"axes",get:function(){return this._axes},set:function(a){this.setAxes(a)}}]),e(a,[{key:"setButtons",value:function(a){var b=this._buttons;b.length=0,a.forEach(function(a){b.push(a)})}},{key:"setAxes",value:function(a){var b=this._axes;b.length=0,a.forEach(function(a){b.push(a)})}},{key:"destroy",value:function(){this._buttons.length=0,this._buttons=null,this._axes.length=0,this._axes=null}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,a),this._index=0|b,this._channel=0|c,this._threshold=(0,f.clamp)(e.threshold||.2,0,1),this._negate=e.negate,this._normalize=e.normalize}return e(a,[{key:"index",get:function(){return this._index},set:function(a){this._index=0|a}},{key:"channel",get:function(){return this._channel},set:function(a){this._channel=0|a}},{key:"threshold",get:function(){return this._threshold},set:function(a){this._threshold=(0,f.clamp)(a,0,1)}},{key:"negate",get:function(){return this._negate},set:function(a){this._negate=!!a}},{key:"normalize",get:function(){return this._normalize},set:function(a){this._normalize=!!a}},{key:"keyCode",get:function(){return 31&this._channel}}]),e(a,[{key:"getMappedValue",value:function(a){var b="number"==typeof a.value?a.value:a;return this._negate&&(b*=-1),this._normalize&&(b=(b+1)/2),b>=this._threshold?b:0}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=c(5),m=d(l),n=m.default.Pointer<<8,o=256,p=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,n,o));return d._game=a,d._canvas=a.canvas,d._pointers=[],d._addEventListeners(),d}return g(b,a),h(b,[{key:"getPointers",value:function(){return this._pointers}},{key:"getPointer",value:function(a){return this._pointers[a]}},{key:"destroy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,a),this._removeEventListeners(),this._game=null}},{key:"_addEventListeners",value:function(){this._onTouchStartHandler=this._onTouchStart.bind(this),this._onTouchEndHandler=this._onTouchEnd.bind(this),this._onTouchMoveHandler=this._onTouchMove.bind(this),this._canvas.addEventListener("touchstart",this._onTouchStartHandler,!0),this._canvas.addEventListener("touchend",this._onTouchEndHandler,!0),this._canvas.addEventListener("touchmove",this._onTouchMoveHandler,!0)}},{key:"_removeEventListeners",value:function(){this._canvas.removeEventListener("touchstart",this._onTouchStartHandler,!0),this._canvas.removeEventListener("touchend",this._onTouchEndHandler,!0),this._canvas.removeEventListener("touchmove",this._onTouchMoveHandler,!0),this._onTouchStartHandler=null,this._onTouchEndHandler=null,this._onTouchMoveHandler=null}},{key:"_onTouchStart",value:function(a){this.active&&console.log("touchdown",a)}},{key:"_onTouchEnd",value:function(a){this.active&&console.log("touchup",a)}},{key:"_onTouchMove",value:function(a){this.active&&console.log("touchmove",a)}}]),b}(k.default);b.default=p},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},k=c(3),l=e(k),m=c(52),n=e(m),o=c(53),p=d(o),q=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._queue=[],c._basePath=a,c._requestQuery="",c._resources=new n.default,c._types=new Map,c._loadingPromise=null,c._itemsLoaded=0,c.registerTypes(),c}return h(b,a),i(b,[{key:"registerType",value:function(a,b){return this._types.set(a,b),this._resources.addType(a),this}},{key:"registerTypes",value:function(){return this.registerType("arrayBuffer",new p.ArrayBufferType).registerType("audioBuffer",new p.AudioBufferType).registerType("audio",new p.AudioType).registerType("blob",new p.BlobType).registerType("image",new p.ImageType).registerType("json",new p.JSONType).registerType("music",new p.MusicType).registerType("sound",new p.SoundType).registerType("sprite",new p.SpriteType).registerType("text",new p.TextType).registerType("texture",new p.TextureType)}},{key:"load",value:function(){var a=this;return this._loadingPromise?this._loadingPromise:(this._itemsLoaded=0,this.trigger("start",this._queue.length),this._loadingPromise=this._queue.map(function(b){return a.loadItem(b.type,b.key,b.path)}).reduce(function(b,c){return b.then(function(){return c}).then(function(b){a.trigger("progress",b,++a._itemsLoaded,a._queue.length)})},Promise.resolve()).then(function(){a._queue.length=0,a.trigger("complete",a._itemsLoaded)}),this._loadingPromise)}},{key:"loadItem",value:function(a,b,c){var d=this;if(!this._types.has(a))throw new Error('Invalid resource type "'+a+'".');if(this._resources.has(a,b))return Promise.resolve(this._resources.get(a,b));var e=this._types.get(a);return this._database?this._database.loadData(a,b).then(function(f){return f?e.create(f):e.loadSource(d._basePath+c).then(function(c){return d._database.saveData(a,b,c).then(function(){return e.create(c)})})}).then(function(c){return d._resources.set(a,b,c),c}):e.load(this._basePath+c).then(function(c){return d._resources.set(a,b,c),c})}},{key:"add",value:function(a,b,c){if(!this._types.has(a))throw new Error('Invalid resource type "'+a+'".');return this._queue.push({path:c,type:a,key:b}),this}},{key:"addList",value:function(a,b){var c=this;return b instanceof Map?(b.forEach(function(b,d){c.add(a,d,b)}),this):(Object.keys(b).forEach(function(d){c.add(a,d,b[d])}),this)}},{key:"reset",value:function(){return this._queue.length=0,this._resources.clear(),this.off("*"),this}},{key:"destroy",value:function(){j(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._queue.length=0,this._queue=null,this._resources.destroy(),this._resources=null,this._types.clear(),this._types=null,this._loadingPromise=null}},{key:"items",get:function(){return this._resources}},{key:"resources",get:function(){return this._resources}},{key:"itemsLoaded",get:function(){return this._itemsLoaded}},{key:"isLoading",get:function(){return null!==this._loadingPromise}},{key:"basePath",get:function(){return this._basePath},set:function(a){this._basePath=a}},{key:"requestQuery",get:function(){return this._requestQuery},set:function(a){this._requestQuery=a}}]),b}(l.default);b.default=q},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._mapping=new Map}return e(a,[{key:"addType",value:function(a){return this._mapping.has(a)||this._mapping.set(a,new Map),this}},{key:"has",value:function(a,b){return!!this._mapping.has(a)&&this._mapping.get(a).has(b)}},{key:"get",value:function(a,b){return this._mapping.has(a)?this._mapping.get(a).get(b)||null:null}},{key:"set",value:function(a,b,c){return this._mapping.has(a)&&this._mapping.get(a).set(b,c),this}},{key:"delete",value:function(a,b){return this._mapping.has(a)&&this._mapping.get(a).delete(b),this}},{key:"clear",value:function(){return this._mapping.forEach(function(a){a.clear()}),this}},{key:"destroy",value:function(){this.clear(),this._mapping.clear(),this._mapping=null}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(19);Object.defineProperty(b,"ResourceType",{enumerable:!0,get:function(){return d(e).default}});var f=c(20);Object.defineProperty(b,"ArrayBufferType",{enumerable:!0,get:function(){return d(f).default}});var g=c(54);Object.defineProperty(b,"AudioBufferType",{enumerable:!0,get:function(){return d(g).default}});var h=c(55);Object.defineProperty(b,"AudioType",{enumerable:!0,get:function(){return d(h).default}});var i=c(21);Object.defineProperty(b,"BlobType",{enumerable:!0,get:function(){return d(i).default}});var j=c(56);Object.defineProperty(b,"ImageType",{enumerable:!0,get:function(){return d(j).default}});var k=c(73);Object.defineProperty(b,"JSONType",{enumerable:!0,get:function(){return d(k).default}});var l=c(74);Object.defineProperty(b,"MusicType",{enumerable:!0,get:function(){return d(l).default}});var m=c(75);Object.defineProperty(b,"SoundType",{enumerable:!0,get:function(){return d(m).default}});var n=c(76);Object.defineProperty(b,"SpriteType",{enumerable:!0,get:function(){return d(n).default}});var o=c(57);Object.defineProperty(b,"TextType",{enumerable:!0,get:function(){return d(o).default}});var p=c(60);Object.defineProperty(b,"TextureType",{enumerable:!0,get:function(){return d(p).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(20),k=d(j),l=c(0),m=l.webAudioSupported?new AudioContext:null,n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){return l.webAudioSupported?i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a).then(function(a){return new Promise(function(b,c){m.decodeAudioData(a,b,c)})}):Promise.reject()}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(21),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,"audio/ogg").then(function(a){return new Promise(function(b,c){var d=new Audio;d.oncanplaythrough=function(){return b(d)},d.onerror=function(){return c(d)},d.src=window.URL.createObjectURL(a)})})}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c]
;d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(21),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,c).then(function(a){return new Promise(function(b,c){var d=new Image;d.onload=function(){return b(d)},d.onerror=function(){return c(d)},d.src=window.URL.createObjectURL(a)})})}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(19),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return fetch(a,{method:"GET",mode:"cors"}).then(function(a){return a.text()})}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(12),k=d(j),l=c(0),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));if(!l.webAudioSupported)throw new Error("Web Audio API is not supported, use the fallback Exo.Audio instead.");return c._context=null,c._sourceNode=null,c._gainNode=null,c}return g(b,a),h(b,[{key:"connect",value:function(a){this._context||(this._context=a.context,this._gainNode=this._context.createGain(),this._gainNode.connect(a.musicNode),this._sourceNode=this._context.createMediaElementSource(this._source),this._sourceNode.connect(this._gainNode))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._context&&(this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null,this._context=null)}},{key:"context",get:function(){return this._context}},{key:"volume",get:function(){return this._context?this._gainNode.gain.value:1},set:function(a){this._context&&(this._gainNode.gain.value=(0,l.clamp)(a,0,1))}},{key:"analyserTarget",get:function(){return this._gainNode}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(12),k=d(j),l=c(0),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));if(!l.webAudioSupported)throw new Error("Web Audio API is not supported, use the fallback Exo.Audio instead.");return c._context=null,c._sourceNode=null,c._gainNode=null,c._paused=!0,c._startTime=0,c._currentTime=0,c._volume=1,c._playbackRate=1,c._loop=!1,c}return g(b,a),h(b,[{key:"connect",value:function(a){this._context||(this._context=a.context,this._gainNode=this._context.createGain(),this._gainNode.connect(a.soundNode))}},{key:"play",value:function(a){this._paused&&(this._paused=!1,this._sourceNode&&(this._sourceNode.stop(0),this._sourceNode.disconnect()),this.applyOptions(a),this._sourceNode=this._context.createBufferSource(),this._sourceNode.buffer=this._source,this._sourceNode.loop=this._loop,this._sourceNode.playbackRate.value=this._playbackRate,this._sourceNode.connect(this._gainNode),this._sourceNode.start(0,this._currentTime),this._startTime=this._context.currentTime)}},{key:"pause",value:function(){if(!this._paused){this._paused=!0;var a=this.duration,b=this.currentTime;this._currentTime=b<=a?b:(b-a)*(b/a|0),this._sourceNode.stop(0)}}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._context&&(this._sourceNode.disconnect(),this._sourceNode=null,this._gainNode.disconnect(),this._gainNode=null,this._context=null)}},{key:"context",get:function(){return this._context}},{key:"volume",get:function(){return this._volume},set:function(a){this._volume=(0,l.clamp)(a,0,2),this._gainNode&&(this._gainNode.gain.value=this._volume)}},{key:"currentTime",get:function(){return this._startTime&&this._context?this._currentTime+this._context.currentTime-this._startTime:0},set:function(a){this.pause(),this._currentTime=Math.max(0,a),this.play()}},{key:"loop",get:function(){return this._loop},set:function(a){this._loop=!!a,this._sourceNode&&(this._sourceNode.loop=this._loop)}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(a){this._playbackRate=Math.max(0,a),this._sourceNode&&(this._sourceNode.playbackRate.value=this._playbackRate)}},{key:"paused",get:function(){return!(!this._paused||this._loop)&&this.currentTime>=this.duration},set:function(a){a?this.pause():this.play()}},{key:"playing",get:function(){return!this._paused},set:function(a){a?this.play():this.pause()}},{key:"analyserTarget",get:function(){return this._gainNode}}]),b}(k.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(56),k=d(j),l=c(22),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,c).then(function(a){return new m.default(a)})}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,a),this._duration=b,this._rectangle=c.clone(),this._origin=e,this._applyOrigin=!!e}return e(a,[{key:"duration",get:function(){return this._duration},set:function(a){this._duration=a}},{key:"rectangle",get:function(){return this._rectangle},set:function(a){this._rectangle.copy(a)}},{key:"origin",get:function(){return this._origin},set:function(a){if(!a)return this._origin=null,void(this._applyOrigin=!1);this._origin?this._origin.copy(a):this._origin=a.clone()}},{key:"applyOrigin",get:function(){return this._applyOrigin}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=d(g),i=c(6),j=d(i),k=c(8),l=d(k),m=function(){function a(b){e(this,a),this._position=new h.default,this._velocity=new h.default,this._rotation=0,this._rotationSpeed=0,this._scale=new h.default(1,1),this._color=j.default.White.clone(),this._elapsedLifetime=new l.default,this._totalLifetime=b.clone()}return f(a,[{key:"position",get:function(){return this._position},set:function(a){this._position.copy(a)}},{key:"velocity",get:function(){return this._velocity},set:function(a){this._velocity.copy(a)}},{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a}},{key:"rotationSpeed",get:function(){return this._rotationSpeed},set:function(a){this._rotationSpeed=a}},{key:"scale",get:function(){return this._scale},set:function(a){this._velocity.copy(a)}},{key:"color",get:function(){return this._color},set:function(a){this._color.copy(a)}},{key:"elapsedLifetime",get:function(){return this._elapsedLifetime},set:function(a){this._elapsedLifetime.copy(a)}},{key:"totalLifetime",get:function(){return this._totalLifetime},set:function(a){this._totalLifetime.copy(a)}},{key:"remainingLifetime",get:function(){return new l.default(this.totalLifetime.asMilliseconds()-this.elapsedLifetime.asMilliseconds())}},{key:"elapsedRatio",get:function(){return this.elapsedLifetime.asMilliseconds()/this.totalLifetime.asMilliseconds()}},{key:"remainingRatio",get:function(){return this.remainingLifetime.asMilliseconds()/this.totalLifetime.asMilliseconds()}}]),a}();b.default=m},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(64);Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return d[a]}})});var e=c(68);Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}})});var f=c(83);Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}})});var g=c(85);Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return g[a]}})});var h=c(88);Object.keys(h).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return h[a]}})});var i=c(91);Object.keys(i).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return i[a]}})})},function(a,b,c){"use strict";c(65),c(66),c(67)},function(a,b,c){"use strict";!function(a){if(a.AudioContext=a.AudioContext||a.webkitAudioContext,a.OfflineAudioContext=a.OfflineAudioContext||a.webkitOfflineAudioContext,a.AudioContext){var b=a.AudioContext.prototype;b.createGain=b.createGain||b.createGainNode,b.createDelay=b.createDelay||b.createDelayNode,b.createScriptProcessor=b.createScriptProcessor||b.createJavaScriptNode}if(a.AudioBufferSourceNode){var c=a.AudioBufferSourceNode.prototype;c.start=c.start||c.noteOn,c.stop=c.stop||c.noteOff}if(a.OscillatorNode){var d=a.OscillatorNode.prototype;d.start=d.start||d.noteOn,d.stop=d.stop||d.noteOff}}(window)},function(a,b,c){"use strict";!function(a){for(var b=["webkit","moz","ms","o"],c=b.length;!a.requestAnimationFrame&&c>=0;c--){var d=b[c];a.requestAnimationFrame=a[d+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d+"CancelAnimationFrame"]||a[d+"CancelRequestAnimationFrame"]}if(!a.requestAnimationFrame){var e=Date.now();a.requestAnimationFrame=function(b){var c=Date.now(),d=Math.max(0,16-(c-e));return e=c+d,a.setTimeout(function(){b(c+d)},d)}}a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)})}(window)},function(a,b,c){"use strict";!function(a){a.ArrayBuffer||(a.ArrayBuffer=Array),a.Float32Array||(a.Float32Array=Array),a.Uint32Array||(a.Uint32Array=Array),a.Uint16Array||(a.Uint16Array=Array)}(window)},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.Animator=b.AnimationFrame=b.FrameAnimation=b.FadeAnimation=b.ColorAnimation=b.Animation=b.Timer=b.Clock=b.Time=b.SceneManager=b.Scene=b.Config=b.Game=b.Random=b.RC4=b.Collision=b.Transformable=b.Color=b.Polygon=b.Circle=b.Rectangle=b.Vector=b.EventEmitter=b.Utils=void 0;var f=c(3);Object.defineProperty(b,"EventEmitter",{enumerable:!0,get:function(){return e(f).default}});var g=c(1);Object.defineProperty(b,"Vector",{enumerable:!0,get:function(){return e(g).default}});var h=c(4);Object.defineProperty(b,"Rectangle",{enumerable:!0,get:function(){return e(h).default}});var i=c(69);Object.defineProperty(b,"Circle",{enumerable:!0,get:function(){return e(i).default}});var j=c(70);Object.defineProperty(b,"Polygon",{enumerable:!0,get:function(){return e(j).default}});var k=c(6);Object.defineProperty(b,"Color",{enumerable:!0,get:function(){return e(k).default}});var l=c(27);Object.defineProperty(b,"Transformable",{enumerable:!0,get:function(){return e(l).default}});var m=c(71);Object.defineProperty(b,"Collision",{enumerable:!0,get:function(){return e(m).default}});var n=c(26);Object.defineProperty(b,"RC4",{enumerable:!0,get:function(){return e(n).default}});var o=c(25);Object.defineProperty(b,"Random",{enumerable:!0,get:function(){return e(o).default}});var p=c(72);Object.defineProperty(b,"Game",{enumerable:!0,get:function(){return e(p).default}});var q=c(28);Object.defineProperty(b,"Config",{enumerable:!0,get:function(){return e(q).default}});var r=c(77);Object.defineProperty(b,"Scene",{enumerable:!0,get:function(){return e(r).default}});var s=c(29);Object.defineProperty(b,"SceneManager",{enumerable:!0,get:function(){return e(s).default}});var t=c(8);Object.defineProperty(b,"Time",{enumerable:!0,get:function(){return e(t).default}});var u=c(15);Object.defineProperty(b,"Clock",{enumerable:!0,get:function(){return e(u).default}});var v=c(78);Object.defineProperty(b,"Timer",{enumerable:!0,get:function(){return e(v).default}});var w=c(13);Object.defineProperty(b,"Animation",{enumerable:!0,get:function(){return e(w).default}});var x=c(79);Object.defineProperty(b,"ColorAnimation",{enumerable:!0,get:function(){return e(x).default}});var y=c(80);Object.defineProperty(b,"FadeAnimation",{enumerable:!0,get:function(){return e(y).default}});var z=c(81);Object.defineProperty(b,"FrameAnimation",{enumerable:!0,get:function(){return e(z).default}});var A=c(61);Object.defineProperty(b,"AnimationFrame",{enumerable:!0,get:function(){return e(A).default}});var B=c(82);Object.defineProperty(b,"Animator",{enumerable:!0,get:function(){return e(B).default}});var C=c(0),D=d(C);b.Utils=D},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(4),h=d(g),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e(this,a),this._x=b,this._y=c,this._radius=d}return f(a,[{key:"clone",value:function(){return new a(this.x,this.y,this.radius)}},{key:"copy",value:function(a){return this.position.copy(a.position),this.radius=a.radius,this}},{key:"contains",value:function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b;return c*c+d*d<=this.radius*this.radius}},{key:"getBounds",value:function(){return new h.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{key:"x",get:function(){return this._x},set:function(a){this._x=a}},{key:"y",get:function(){return this._y},set:function(a){this._y=a}},{key:"radius",get:function(){return this._radius},set:function(a){this._radius=a}}]),a}();b.default=i},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a);for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];this._vectors=c}return e(a,[{key:"clone",value:function(){return new a(this._vectors.map(function(a){return a.clone()}))}},{key:"contains",value:function(a,b){for(var c=this.points.length/2,d=!1,e=0,f=c-1;e<c;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1];h>b!=j>b&&a<(b-h)/(j-h)*(i-g)+g&&(d=!d)}return d}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"checkCircles",value:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)<a.radius+b.radius}},{key:"checkRectangles",value:function(a,b){return!1}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(3),k=d(j),l=c(15),m=d(l),n=c(28),o=d(n),p=c(29),q=d(p),r=c(30),s=d(r),t=c(42),u=d(t),v=c(43),w=d(v),x=c(51),y=d(x),z=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a instanceof o.default||(a=new o.default(a)),c._config=a,c._canvas=a.canvas||document.createElement("canvas"),c._loader=new y.default(a.basePath),c._displayManager=new s.default(c),c._audioManager=new u.default(c),c._inputManager=new w.default(c),c._sceneManager=new q.default(c),c._updateHandler=c._updateGameLoop.bind(c),c._updateId=0,c._delta=new m.default(!1),c._running=!1,a.canvasParent&&a.canvasParent.appendChild(c._canvas),c}return g(b,a),h(b,[{key:"start",value:function(a){if(this._running)throw new Error("Game instance is already running!");this._running=!0,this.trigger("scene:change",a),this._startGameLoop()}},{key:"stop",value:function(){if(!this._running)throw new Error("Game instance is not running.");this._running=!1,this.trigger("scene:stop"),this._stopGameLoop()}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._stopGameLoop(),this._config.canvasParent&&this._config.canvasParent.removeChild(this._canvas),this._sceneManager.destroy(),this._sceneManager=null,this._contentManager.destroy(),this._contentManager=null,this._inputManager.destroy(),this._inputManager=null,this._audioManager.destroy(),this._audioManager=null,this._displayManager.destroy(),this._displayManager=null,this._config.destroy(),this._config=null,this._canvas=null}},{key:"_startGameLoop",value:function(){this._updateId=requestAnimationFrame(this._updateHandler),this._delta.restart()}},{key:"_updateGameLoop",value:function(){this._inputManager.update(),this._sceneManager.update(this._delta.getElapsedTime()),this._delta.restart(),this._updateId=requestAnimationFrame(this._updateHandler)}},{key:"_stopGameLoop",value:function(){cancelAnimationFrame(this._updateId),this._delta.stop()}},{key:"canvas",get:function(){return this._canvas}},{key:"config",get:function(){return this._config}},{key:"loader",get:function(){return this._loader}},{key:"displayManager",get:function(){return this._displayManager}},{key:"audioManager",get:function(){return this._audioManager}},{key:"inputManager",get:function(){return this._inputManager}},{key:"sceneManager",get:function(){return this._sceneManager}}]),b}(k.default);b.default=z},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(57),k=d(j),l=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a).then(function(a){return JSON.parse(a)})}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(55),k=d(j),l=c(58),m=d(l),n=c(0),o=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){return n.webAudioSupported?i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a).then(function(a){return new m.default(a)}):Promise.reject()}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(54),k=d(j),l=c(59),m=d(l),n=c(0),o=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){return n.webAudioSupported?i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a).then(function(a){return new m.default(a)}):Promise.reject()}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(60),k=d(j),l=c(23),m=d(l),n=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"loadSource",value:function(a){return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"loadSource",this).call(this,a)}},{key:"create",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png"
;return i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"create",this).call(this,a,c).then(function(a){return new m.default(a)})}}]),b}(k.default);b.default=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(3),k=d(j),l=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._game=null,a}return g(b,a),i(b,[{key:"game",get:function(){return this._game},set:function(a){this._game=a}}]),i(b,[{key:"load",value:function(a){this._game.trigger("scene:start")}},{key:"init",value:function(){}},{key:"update",value:function(a){}},{key:"unload",value:function(){}},{key:"destroy",value:function(){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._game=null}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(15),j=d(i),k=c(8),l=d(k),m=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,!1));return g._limit=0,a&&g.restart(c,d),g}return g(b,a),h(b,[{key:"reset",value:function(a,b){return this._limit=a*(b||1),this._timeBuffer=0,this._isRunning=!1,this}},{key:"restart",value:function(a,b){return this.reset(a,b).start()}},{key:"getRemainingMilliseconds",value:function(){return Math.max(0,this._limit-this.getElapsedMilliseconds())}},{key:"getRemainingSeconds",value:function(){return this.getRemainingMilliseconds()/l.default.Seconds}},{key:"getRemainingMinutes",value:function(){return this.getRemainingMilliseconds()/l.default.Minutes}},{key:"getRemainingTime",value:function(){return this._time.setMilliseconds(this.getRemainingMilliseconds())}},{key:"isRunning",get:function(){return this._isRunning&&!this.isExpired}},{key:"isExpired",get:function(){return this.getElapsedMilliseconds()>=this._limit}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=c(13),i=d(h),j=function(a){function b(){e(this,b);for(var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),c=arguments.length,d=Array(c),g=0;g<c;g++)d[g]=arguments[g];return a._colorGradient=d,a}return g(b,a),b}(i.default);b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(13),j=d(i),k=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._inRatio=a,d._outRatio=c,d}return g(b,a),h(b,[{key:"apply",value:function(a,b){var c=this._inRatio,d=this._outRatio;b<c?a.color.a=255*b/c:b>1-d&&(a.color.a=255*(1-b)/d)}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(13),j=d(i),k=c(61),l=d(k),m=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._frames=[],a._normalized=!1,a}return g(b,a),h(b,[{key:"addFrame",value:function(a,b,c){this._frames.push(new l.default(a,b,c)),this._normalized=!1}},{key:"ensureNormalized",value:function(){if(!this._normalized){var a=this._frames.reduce(function(a,b){return a+b.duration},0);this._frames.forEach(function(b){b.duration/=a}),this._normalized=!0}}},{key:"apply",value:function(a,b){if(!(!this._frames.length||b<0||b>1)){this.ensureNormalized();for(var c=0,d=this._frames.length;c<d;c++){var e=this._frames[c];if((b-=e.duration)>0){a.setTextureRect(e.subrect),e.applyOrigin&&a.setOrigin(e.origin);break}}}}}]),b}(j.default);b.default=m},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"addAnimation",value:function(a,b,c){}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(84);Object.defineProperty(b,"Database",{enumerable:!0,get:function(){return d(e).default}});var f=c(51);Object.defineProperty(b,"Loader",{enumerable:!0,get:function(){return d(f).default}});var g=c(52);Object.defineProperty(b,"ResourceContainer",{enumerable:!0,get:function(){return d(g).default}});var h=c(53);Object.keys(h).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(b,a,{enumerable:!0,get:function(){return h[a]}})})},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(b,c){if(d(this,a),!f.indexedDBSupported)throw new Error("This browser does not support indexedDB!");this._name=b,this._version=c,this._database=null,this._connectionPromise=null,this._types=new Set(["arrayBuffer","audioBuffer","audio","blob","image","json","music","sound","sprite","text","texture"])}return e(a,[{key:"open",value:function(){var a=this;return this._connectionPromise||(this._connectionPromise=new Promise(function(b,c){var d=indexedDB.open(a._name,a._version);d.onupgradeneeded=function(b){var c=b.target.result;a._types.forEach(function(a){c.createObjectStore(a,{keyPath:"key"})})},d.onsuccess=function(c){a._database=c.target.result,b(c)},d.onerror=function(a){return c(a)}}))}},{key:"close",value:function(){return this._database&&(this._database.close(),this._database=null),this._connectionPromise=null,Promise.resolve()}},{key:"clear",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===b?Promise.all(this._types.map(function(b){return a.clear(b)})):this.getObjectStore(b,"readwrite").then(function(a){return new Promise(function(b,c){var d=a.clear();d.onsuccess=function(){return b()},d.onerror=function(){return c()}})})}},{key:"delete",value:function(){var a=this;return this.close().then(function(){return new Promise(function(b,c){var d=indexedDB.deleteDatabase(a.name);d.onsuccess=function(){return b()},d.onerror=function(){return c()}})})}},{key:"loadData",value:function(a,b){return this.getObjectStore(a).then(function(a){return new Promise(function(c,d){var e=a.get(b);e.onsuccess=function(a){var b=a.target&&a.target.result;c(b&&b.value)},e.onerror=function(){return d()}})})}},{key:"saveData",value:function(a,b,c){return this.getObjectStore(a,"readwrite").then(function(a){return new Promise(function(d,e){var f=a.put({key:b,value:c});f.onsuccess=function(){return d()},f.onerror=function(){return e()}})})}},{key:"removeData",value:function(a,b){return this.getObjectStore(a,"readwrite").then(function(a){return new Promise(function(c,d){var e=a.delete(b);e.onsuccess=function(){return c()},e.onerror=function(){return d()}})})}},{key:"destroy",value:function(){return this._types.clear(),this._types=null,this.close()}},{key:"getObjectStore",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return this._types.contains(a)?this.open().then(function(){return b._database.transaction([a],c).objectStore(a)}):Promise.reject('Could not find ObjectStore named "'+a+'".')}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"isOpen",get:function(){return null!==this._database}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(2);Object.defineProperty(b,"ChannelHandler",{enumerable:!0,get:function(){return d(e).default}});var f=c(86);Object.defineProperty(b,"Input",{enumerable:!0,get:function(){return d(f).default}});var g=c(43);Object.defineProperty(b,"InputManager",{enumerable:!0,get:function(){return d(g).default}});var h=c(5);Object.defineProperty(b,"InputDevice",{enumerable:!0,get:function(){return d(h).default}});var i=c(44);Object.defineProperty(b,"Keyboard",{enumerable:!0,get:function(){return d(i).default}});var j=c(45);Object.defineProperty(b,"Mouse",{enumerable:!0,get:function(){return d(j).default}});var k=c(49);Object.defineProperty(b,"GamepadButton",{enumerable:!0,get:function(){return d(k).default}});var l=c(48);Object.defineProperty(b,"GamepadMapping",{enumerable:!0,get:function(){return d(l).default}});var m=c(47);Object.defineProperty(b,"GamepadDefaultMapping",{enumerable:!0,get:function(){return d(m).default}});var n=c(18);Object.defineProperty(b,"Gamepad",{enumerable:!0,get:function(){return d(n).default}});var o=c(46);Object.defineProperty(b,"GamepadManager",{enumerable:!0,get:function(){return d(o).default}});var p=c(87);Object.defineProperty(b,"Pointer",{enumerable:!0,get:function(){return d(p).default}});var q=c(50);Object.defineProperty(b,"PointerManager",{enumerable:!0,get:function(){return d(q).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(3),k=d(j),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._channels=new Set(a),c._value=0,c._triggered=!1,c._lastTrigger=0,c._triggerThreshold=300,c}return g(b,a),h(b,[{key:"update",value:function(a){var b=this;this._value=0,this._channels.forEach(function(c){a[c]&&(b._value=Math.max(a[c],b._value))}),this.active?(this._triggered||(this._triggered=!0,this._lastTrigger=Date.now(),this.trigger("start",this._value)),this.trigger("active",this._value)):this._triggered&&(this._triggered=!1,Date.now()-this._lastTrigger<this._triggerThreshold&&this.trigger("trigger",this._value),this.trigger("stop",this._value))}},{key:"destroy",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),this._channels.clear(),this._channels=null,this._value=null,this._triggered=null,this._lastTrigger=null,this._triggerThreshold=null}},{key:"channels",get:function(){return this._channels}},{key:"value",get:function(){return this._value}},{key:"triggered",get:function(){return this._triggered}},{key:"active",get:function(){return this._value>0}},{key:"triggerThreshold",get:function(){return this._triggerThreshold},set:function(a){this._triggerThreshold=a}}]),b}(k.default);b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(2),k=d(j),l=c(5),m=d(l),n=m.default.Pointer<<8,o=32,p=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,n,o))}return g(b,a),h(b,[{key:"onPress",value:function(a,b,c){this.identifier=c,this.pressed=!0,this.setPosition(a,b)}},{key:"onRelease",value:function(){this.identifier=0,this.pressed=!1}},{key:"setPosition",value:function(a,b){!1===this.moved&&(this.moved=!0,this.previousX=this.currentX,this.previousY=this.currentY),this.currentX=a>>>0,this.currentY=b>>>0}},{key:"destroy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this,a)}}]),b}(k.default);b.default=p,p.Down=0|n,p.SwipeLeft=0|n,p.SwipeRight=0|n,p.SwipeUp=0|n,p.SwipeDown=0|n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(12);Object.defineProperty(b,"Playable",{enumerable:!0,get:function(){return d(e).default}});var f=c(89);Object.defineProperty(b,"Audio",{enumerable:!0,get:function(){return d(f).default}});var g=c(59);Object.defineProperty(b,"Sound",{enumerable:!0,get:function(){return d(g).default}});var h=c(58);Object.defineProperty(b,"Music",{enumerable:!0,get:function(){return d(h).default}});var i=c(42);Object.defineProperty(b,"AudioManager",{enumerable:!0,get:function(){return d(i).default}});var j=c(90);Object.defineProperty(b,"AudioAnalyser",{enumerable:!0,get:function(){return d(j).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(12),j=d(i),k=c(0),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c._volume=1,c._parentVolume=1,c}return g(b,a),h(b,[{key:"connect",value:function(a){this.parentVolume=a.masterVolume}},{key:"parentVolume",get:function(){return this._parentVolume},set:function(a){var b=(0,k.clamp)(a,0,1);this._parentVolume!==b&&(this._parentVolume=b,this._source.volume=this._volume*this._parentVolume)}},{key:"volume",get:function(){return this._volume},set:function(a){var b=(0,k.clamp)(a,0,2);this._volume!==b&&(this._volume=b,this._source.volume=this._volume*this._parentVolume)}}]),b}(j.default);b.default=l},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){if(d(this,a),this._context=b.context,!this._context)throw new Error("Target has no AudioContext to work with.");if(this._targetNode=b.analyserTarget,!this._targetNode)throw new Error("Target has no valid AudioNode to analyse.");this._analyser=this._context.createAnalyser(),this._targetNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount),this._frequencyData=new Uint8Array(this._analyser.frequencyBinCount),this._preciseTimeDomainData=new Float32Array(this._analyser.frequencyBinCount),this._preciseFrequencyData=new Float32Array(this._analyser.frequencyBinCount)}return e(a,[{key:"getTimeDomainData",value:function(){return this._analyser.getByteTimeDomainData(this._timeDomainData),this._timeDomainData}},{key:"getFrequencyData",value:function(){return this._analyser.getByteFrequencyData(this._frequencyData),this._frequencyData}},{key:"getPreciseTimeDomainData",value:function(){return this._analyser.getFloatTimeDomainData(this._preciseTimeDomainData),this._preciseTimeDomainData}},{key:"getPreciseFrequencyData",value:function(){return this._analyser.getFloatFrequencyData(this._preciseFrequencyData),this._preciseFrequencyData}},{key:"destroy",value:function(){this._timeDomainData=null,this._frequencyData=null,this._preciseTimeDomainData=null,this._preciseFrequencyData=null,this._targetNode.disconnect(this._analyser),this._targetNode=null,this._analyser.disconnect(),this._analyser=null,this._context=null}}]),a}();b.default=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(30);Object.defineProperty(b,"DisplayManager",{enumerable:!0,get:function(){return d(e).default}});var f=c(31);Object.defineProperty(b,"RenderTarget",{enumerable:!0,get:function(){return d(f).default}});var g=c(22);Object.defineProperty(b,"Texture",{enumerable:!0,get:function(){return d(g).default}});var h=c(32);Object.defineProperty(b,"View",{enumerable:!0,get:function(){return d(h).default}});var i=c(39);Object.defineProperty(b,"WebGLTexture",{enumerable:!0,get:function(){return d(i).default}});var j=c(34);Object.defineProperty(b,"BlendMode",{enumerable:!0,get:function(){return d(j).default}});var k=c(24);Object.defineProperty(b,"Drawable",{enumerable:!0,get:function(){return d(k).default}});var l=c(92);Object.defineProperty(b,"Container",{enumerable:!0,get:function(){return d(l).default}});var m=c(16);Object.defineProperty(b,"Renderer",{enumerable:!0,get:function(){return d(m).default}});var n=c(17);Object.defineProperty(b,"Shader",{enumerable:!0,get:function(){return d(n).default}});var o=c(37);Object.defineProperty(b,"ShaderAttribute",{enumerable:!0,get:function(){return d(o).default}});var p=c(38);Object.defineProperty(b,"ShaderUniform",{enumerable:!0,get:function(){return d(p).default}});var q=c(23);Object.defineProperty(b,"Sprite",{enumerable:!0,get:function(){return d(q).default}});var r=c(93);Object.defineProperty(b,"Text",{enumerable:!0,get:function(){return d(r).default}});var s=c(36);Object.defineProperty(b,"SpriteShader",{enumerable:!0,get:function(){return d(s).default}});var t=c(35);Object.defineProperty(b,"SpriteRenderer",{enumerable:!0,get:function(){return d(t).default}});var u=c(62);Object.defineProperty(b,"Particle",{enumerable:!0,get:function(){return d(u).default}});var v=c(94);Object.defineProperty(b,"ParticleEmitter",{enumerable:!0,get:function(){return d(v).default}});var w=c(41);Object.defineProperty(b,"ParticleShader",{enumerable:!0,get:function(){return d(w).default}});var x=c(40);Object.defineProperty(b,"ParticleRenderer",{enumerable:!0,get:function(){return d(x).default}});var y=c(14);Object.defineProperty(b,"ParticleModifier",{enumerable:!0,get:function(){return d(y).default}});var z=c(95);Object.defineProperty(b,"ForceModifier",{enumerable:!0,get:function(){return d(z).default}});var A=c(96);Object.defineProperty(b,"ScaleModifier",{enumerable:!0,get:function(){return d(A).default}});var B=c(97);Object.defineProperty(b,"TorqueModifier",{enumerable:!0,get:function(){return d(B).default}});var C=c(33);Object.defineProperty(b,"BlendModes",{enumerable:!0,get:function(){return d(C).default}});var D=c(9);Object.defineProperty(b,"ScaleModes",{enumerable:!0,get:function(){return d(D).default}});var E=c(11);Object.defineProperty(b,"UniformType",{enumerable:!0,get:function(){return d(E).default}});var F=c(10);Object.defineProperty(b,"WrapModes",{enumerable:!0,get:function(){return d(F).default}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=c(24),k=d(j),l=c(1),m=d(l),n=c(0),o=function(a){function b(){e(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._children=[],a._size=new m.default,a}return g(b,a),h(b,[{key:"addChild",value:function(a){return a===this?this:(a.parent&&a.parent.removeChild(a),a.parent=this,this._children.push(a),this)}},{key:"addChildAt",value:function(a,b){if(b<0||b>this._children.length)throw new Error("The index "+b+" is out of bounds "+this._children.length);return a===this?this:(a.parent&&a.parent.removeChild(a),a.parent=this,this._children.splice(b,0,a),this)}},{key:"swapChildren",value:function(a,b){return a===b?this:(this._children[this.getChildIndex(a)]=b,this._children[this.getChildIndex(b)]=a,this)}},{key:"getChildIndex",value:function(a){var b=this._children.indexOf(a);if(-1===b)throw new Error("Drawable is not a child of the container.");return b}},{key:"setChildIndex",value:function(a,b){if(b<0||b>=this._children.length)throw new Error("The index "+b+" is out of bounds "+this._children.length);return(0,n.removeItems)(this._children,this.getChildIndex(b),1),this._children.splice(b,0,a),this}},{key:"getChildAt",value:function(a){if(a<0||a>=this._children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this._children[a]}},{key:"removeChild",value:function(a){var b=this._children.indexOf(a);return-1===b?this:(a.parent=null,(0,n.removeItems)(this._children,b,1),this)}},{key:"removeChildAt",value:function(a){return this.getChildAt(a).parent=null,(0,n.removeItems)(this._children,a,1),this}},{key:"removeChildren",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=this._children,d="number"==typeof b?b:c.length,e=d-a;if(!e&&!c.length)return this;if(e<0&&e>d)throw new Error("removeChildren: numeric values are outside the acceptable range.");return c.splice(a,e),this}},{key:"draw",value:function(a,b){if(this.visible){this._worldTransform.copy(b),this._worldTransform.multiply(this.transform);for(var c=0,d=this._children.length;c<d;c++)this._children[c].draw(a,this._worldTransform)}}},{key:"destroy",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this),a&&this._children.forEach(function(a){a.destroy()}),this._children.length=0,this._children=null,this._size.destroy(),this._size=null}},{key:"children",get:function(){return this._children}},{key:"size",get:function(){return this._size},set:function(a){this._size.copy(a)}},{key:"width",get:function(){return this._size.x},set:function(a){this._size.x=a}},{key:"height",get:function(){return this._size.y},set:function(a){this._size.y=a}}]),b}(k.default);b.default=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(23),j=d(i),k=c(22),l=d(k),m=c(9),n=d(m),o=c(6),p=d(o),q={align:"left",color:"black",outlineColor:"black",outlineWidth:0,fontSize:20,fontWeight:"bold",fontFamily:"Arial",wordWrap:!1,wordWrapWidth:100,baseline:"top"},r=new Map,s=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new l.default(document.createElement("canvas"),d)));return g._canvas=g._texture.source,g._scaleMode=g._texture.scaleMode,g._context=g._canvas.getContext("2d"),g._text=a||"",g._style=Object.assign(Object.create(q),c||null),g._updateCanvas(),g}return g(b,a),h(b,[{key:"_updateCanvas",value:function(){var a=this._canvas,b=this._context,c=this._style,d=c.wordWrap?this._getWordWrappedText():this._text,e=c.fontWeight+" "+c.fontSize+"px "+c.fontFamily,f=c.outlineWidth,g=d.split(/(?:\r\n|\r|\n)/),h=g.length,i=[],j=this._determineFontHeight(e)+f,k=0;b.font=e;for(var m=0;m<h;m++){var n=b.measureText(g[m]).width;i[m]=n,k=Math.max(k,n)}a.width=k+f,a.height=j*g.length,b.fillStyle=c.color,b.font=e,b.strokeStyle=c.outlineColor,b.lineWidth=f,b.textBaseline=c.baseline;for(var o=0;o<h;o++){var p=f/2+o*j,q=f/2;"right"===c.align?q+=k-i[o]:"center"===c.align&&(q+=(k-i[o])/2),c.outlineColor&&c.outlineWidth&&b.strokeText(g[o],q,p),c.color&&b.fillText(g[o],q,p)}this.texture=new l.default(a,this._scaleMode)}},{key:"_getWordWrappedText",value:function(){for(var a=this._context,b=this._text.split("\n"),c=b.length,d=this._style.wordWrapWidth,e="",f=0;f<c;f++){for(var g=b[f].split(" "),h=g.length,i=0;i<h;i++){var j=a.measureText(g[i]).width,k=j+a.measureText(" ").width;k>d?(i>0&&(e+="\n"),d-=j):d-=k,e+=g[i]+" "}f<c-1&&(e+="\n")}return e}},{key:"_determineFontHeight",value:function(a){if(!r.has(a)){
var b=document.getElementsByTagName("body")[0],c=document.createElement("div");c.appendChild(document.createTextNode("M")),c.setAttribute("style","font: "+a+";position:absolute;top:0;left:0"),b.appendChild(c),r.set(a,c.offsetHeight),b.removeChild(c)}return r.get(a)}},{key:"canvas",get:function(){return this._canvas}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(a){this._scaleMode="number"==typeof a?a:n.default.Default,this._updateCanvas()}},{key:"text",get:function(){return this._text},set:function(a){this._text=a||"",this._updateCanvas()}},{key:"style",get:function(){return this._style},set:function(a){this._style=Object.assign(Object.create(q),a||null),this._updateCanvas()}},{key:"align",get:function(){return this._style.align},set:function(a){this._style.align=a||"left",this._updateCanvas()}},{key:"color",get:function(){return this._style.color},set:function(a){this._style.color=a instanceof p.default?a.getHexCode(!0):a||"",this._updateCanvas()}},{key:"outlineColor",get:function(){return this._style.outlineColor},set:function(a){this._style.outlineColor=a instanceof p.default?a.getHexCode(!0):a||"",this._updateCanvas()}},{key:"outlineWidth",get:function(){return this._style.outlineWidth},set:function(a){this._style.outlineWidth=a||0,this._updateCanvas()}},{key:"fontSize",get:function(){return this._style.fontSize},set:function(a){this._style.fontSize=a||0,this._updateCanvas()}},{key:"fontWeight",get:function(){return this._style.fontWeight},set:function(a){this._style.fontWeight=a||"normal",this._updateCanvas()}},{key:"fontFamily",get:function(){return this._style.fontFamily},set:function(a){this._style.fontFamily=a||"Arial",this._updateCanvas()}},{key:"wordWrap",get:function(){return this._style.wordWrap},set:function(a){this._style.wordWrap=!!a,this._updateCanvas()}},{key:"wordWrapWidth",get:function(){return this._style.wordWrapWidth},set:function(a){this._style.wordWrapWidth="number"==typeof a?a:100,this._updateCanvas()}},{key:"baseline",get:function(){return this._style.baseline},set:function(a){this._style.baseline=a||"top",this._updateCanvas()}}]),b}(j.default);b.default=s},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(62),h=d(g),i=c(4),j=d(i),k=c(1),l=d(k),m=c(6),n=d(m),o=c(8),p=d(o),q=function(){function a(b){e(this,a),this._texture=b,this._textureRect=new j.default(0,0,b.width,b.height),this._textureCoords=new j.default,this._emissionRate=1,this._emissionDelta=0,this._modifiers=[],this._particles=[],this._particleLifeTime=new p.default(1,p.default.Seconds),this._particlePosition=new l.default,this._particleVelocity=new l.default,this._particleRotation=1,this._particleRotationSpeed=0,this._particleScale=new l.default(1,1),this._particleColor=n.default.White.clone()}return f(a,[{key:"setTextureRect",value:function(a){var b=this._texture,c=b.width,d=b.height,e=a.x/c,f=a.y/d;this._textureCoords.set(e,f,e+a.width/c,f+a.height/d),this._textureRect.copy(a)}},{key:"addModifier",value:function(a){this._modifiers.push(a)}},{key:"computeParticleCount",value:function(a){var b=this._emissionRate*a.asSeconds()+this._emissionDelta,c=0|b;return this._emissionDelta=b-c,c}},{key:"update",value:function(a){for(var b=this._particles,c=this._modifiers,d=this.computeParticleCount(a),e=c.length,f=0;f<d;f++){var g=new h.default(this._particleLifeTime);g.position.copy(this._particlePosition),g.velocity.copy(this._particleVelocity),g.rotation=this._particleRotation,g.rotationSpeed=this._particleRotationSpeed,g.scale.copy(this._particleScale),g.color.copy(this._particleColor),b.push(g)}for(var i=b.length-1;i>=0;i--){var j=b[i];if(this.updateParticle(j,a),j.elapsedLifetime.greaterThan(j.totalLifetime))b.splice(i,1);else for(var k=0;k<e;k++)c[k].apply(j,a)}}},{key:"updateParticle",value:function(a,b){var c=b.asSeconds(),d=a.velocity;a.elapsedLifetime.add(b),a.position.add(c*d.x,c*d.y),a.rotation+=c*a.rotationSpeed}},{key:"draw",value:function(a){a.setCurrentRenderer("particle"),a.getCurrentRenderer().draw(this)}},{key:"particles",get:function(){return this._particles}},{key:"modifiers",get:function(){return this._modifiers}},{key:"textureRect",get:function(){return this._textureRect}},{key:"texture",get:function(){return this._texture},set:function(a){this._texture=a}},{key:"textureCoords",get:function(){return this._textureCoords},set:function(a){this._textureCoords.copy(a)}},{key:"emissionRate",get:function(){return this._emissionRate},set:function(a){this._emissionRate=a}},{key:"particleLifeTime",get:function(){return this._particleLifeTime},set:function(a){this._particleLifeTime.copy(a)}},{key:"particlePosition",get:function(){return this._particlePosition},set:function(a){this._particlePosition.copy(a)}},{key:"particleVelocity",get:function(){return this._particleVelocity},set:function(a){this._particleVelocity.copy(a)}},{key:"particleRotation",get:function(){return this._particleRotation},set:function(a){this._particleRotation=a%360}},{key:"particleRotationSpeed",get:function(){return this._particleRotationSpeed},set:function(a){this._particleRotationSpeed=a}},{key:"particleScale",get:function(){return this._particleScale},set:function(a){this._particleScale.copy(a)}},{key:"particleColor",get:function(){return this._particleColor},set:function(a){this._particleColor.copy(a)}}]),a}();b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(14),j=d(i),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._acceleration=a.clone(),c}return g(b,a),h(b,[{key:"setAcceleration",value:function(a){this._acceleration.copy(a)}},{key:"getAcceleration",value:function(){return this._acceleration}},{key:"apply",value:function(a,b){var c=this._acceleration,d=b.asSeconds();a.velocity.add(d*c.x,d*c.y)}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(14),j=d(i),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._scaleFactor=a.clone(),c}return g(b,a),h(b,[{key:"setScaleFactor",value:function(a){this._scaleFactor.copy(a)}},{key:"getScaleFactor",value:function(){return this._scaleFactor}},{key:"apply",value:function(a,b){var c=this._scaleFactor,d=b.asSeconds();a.scale.add(d*c.x,d*c.y)}}]),b}(j.default);b.default=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(14),j=d(i),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._angularAcceleration=a,c}return g(b,a),h(b,[{key:"setAngularAcceleration",value:function(a){this._angularAcceleration=a}},{key:"getAngularAcceleration",value:function(){return this._angularAcceleration}},{key:"apply",value:function(a,b){a.rotationSpeed+=b.asSeconds()*this._angularAcceleration}}]),b}(j.default);b.default=k}]);
//# sourceMappingURL=exo.min.js.map