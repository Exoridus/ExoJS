{"version":3,"sources":["webpack:///webpack/bootstrap dffd4021c1995752b412","webpack:///./examples/audio/src/js/index.js","webpack:///./examples/audio/src/js/GameScene.js"],"names":["window","addEventListener","game","Exo","Game","basePath","canvas","document","querySelector","width","innerWidth","height","innerHeight","start","GameScene","loader","add","load","then","trigger","_music","resources","get","_analyser","AudioAnalyser","audioManager","_canvas","_context","getContext","_flashColor","Color","_time","Time","_toggleInput","Input","Keyboard","Space","on","toggle","updateCanvas","bind","loop","delta","paused","context","freqData","getFrequencyData","timeDomain","getTimeDomainData","time","asSeconds","length","barWidth","Math","ceil","redModifier","cos","greenModifier","sin","r","g","b","i","set","clearRect","beginPath","barHeight","lineHeight","offsetX","fillRect","lineTo","stroke","effectHeight","gradient","createLinearGradient","addColorStop","fillStyle","strokeStyle","lineWidth","lineCap","lineJoin","Scene"],"mappings":"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","file":"audio.build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dffd4021c1995752b412","import GameScene from './GameScene';\n\nwindow.addEventListener('load', () => {\n    const game = new Exo.Game({\n        basePath: 'assets/',\n        canvas: document.querySelector('#background'),\n        width: window.innerWidth,\n        height: window.innerHeight,\n    });\n\n    game.start(new GameScene());\n}, false);\n\n\n\n// WEBPACK FOOTER //\n// ./examples/audio/src/js/index.js","/**\n * @class GameScene\n * @extends {Exo.Scene}\n */\nexport default class GameScene extends Exo.Scene {\n\n    load(loader) {\n        loader.add('music', 'example', 'audio/example.ogg')\n            .load()\n            .then(() => this.game.trigger('scene:start'));\n    }\n\n    init() {\n        const game = this.game;\n\n        /**\n         * @private\n         * @member {Exo.Music}\n         */\n        this._music = game.loader.resources.get('music', 'example');\n\n        /**\n         * @private\n         * @member {Exo.AudioAnalyser}\n         */\n        this._analyser = new Exo.AudioAnalyser(game.audioManager);\n\n        /**\n         * @private\n         * @member {HTMLCanvasElement}\n         */\n        this._canvas = document.querySelector('#foreground');\n\n        /**\n         * @private\n         * @member {CanvasRenderingContext2D}\n         */\n        this._context = this._canvas.getContext('2d');\n\n        /**\n         * @private\n         * @member {Exo.Color}\n         */\n        this._flashColor = new Exo.Color();\n\n        /**\n         * @private\n         * @member {Exo.Time}\n         */\n        this._time = new Exo.Time();\n\n        /**\n         * @private\n         * @member {CanvasRenderingContext2D}\n         */\n        this._toggleInput = new Exo.Input([\n            Exo.Keyboard.Space,\n        ]);\n\n        this._toggleInput.on('trigger', () => {\n            this._music.toggle();\n        });\n\n        window.addEventListener('resize', this.updateCanvas.bind(this));\n\n        this.updateCanvas();\n\n        game.trigger('input:add', this._toggleInput)\n            .trigger('audio:play', this._music, {\n                loop: true,\n            });\n    }\n\n    /**\n     * @param {Exo.Time} delta\n     */\n    update(delta) {\n        if (this._music.paused) {\n            return;\n        }\n\n        const canvas = this._canvas,\n            context = this._context,\n            freqData = this._analyser.getFrequencyData(),\n            timeDomain = this._analyser.getTimeDomainData(),\n            time = this._time.add(delta).asSeconds(),\n            width = canvas.width,\n            height = canvas.height,\n            length = freqData.length,\n            barWidth = Math.ceil(width / length),\n            redModifier = (Math.cos(time) * 0.5) + 0.5,\n            greenModifier = (Math.sin(time) * 0.5) + 0.5;\n\n        let [r, g, b] = [0, 0, 0];\n\n        for (let i = 0; i < length; i++) {\n            switch (i / (length / 3) | 0) {\n                case 0:\n                    r += freqData[i] * redModifier;\n                    break;\n                case 1:\n                    g += freqData[i] * greenModifier;\n                    break;\n                case 2:\n                    b += freqData[i];\n                    break;\n            }\n        }\n\n        this.game.trigger('display:clear', this._flashColor.set(r / length, g / length, b / length));\n        context.clearRect(0, 0, width, height);\n\n        context.beginPath();\n\n        for (let i = 0; i < length; i++) {\n            const barHeight = height * freqData[i] / 255,\n                lineHeight = height * timeDomain[i] / 255,\n                offsetX = (i * barWidth) | 0;\n\n            context.fillRect(offsetX, ((height / 2) - (barHeight / 2)) | 0, barWidth, barHeight | 0);\n            context.lineTo(offsetX, ((height * 0.75) - (lineHeight / 2)) | 0);\n        }\n\n        context.stroke();\n    }\n\n    updateCanvas() {\n        const canvas = this._canvas,\n            context = this._context,\n            width = window.innerWidth,\n            height = window.innerHeight,\n            effectHeight = height * 0.75 | 0,\n            gradient = context.createLinearGradient(0, 0, 0, effectHeight);\n\n        gradient.addColorStop(0, '#f70');\n        gradient.addColorStop(0.5, '#f30');\n        gradient.addColorStop(1, '#f70');\n\n        this.game.trigger('display:resize', width, height);\n\n        canvas.width = width;\n        canvas.height = effectHeight;\n\n        context.fillStyle = gradient;\n        context.strokeStyle = '#fff';\n        context.lineWidth = 4;\n        context.lineCap = 'round';\n        context.lineJoin = 'round';\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./examples/audio/src/js/GameScene.js"],"sourceRoot":""}